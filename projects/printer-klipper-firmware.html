<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8" data-next-head=""/><meta name="viewport" content="width=device-width" data-next-head=""/><meta property="fb:app_id" content="395776161315353" data-next-head=""/><meta property="og:locale" content="en_GB" data-next-head=""/><meta property="og:site_name" content="I wish I was cool... I wish I was Mike Thomas" data-next-head=""/><link rel="apple-touch-icon" sizes="180x180" href="/favicon/apple-touch-icon.png" data-next-head=""/><link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png" data-next-head=""/><link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png" data-next-head=""/><link rel="manifest" href="/favicon/site.webmanifest" data-next-head=""/><link rel="mask-icon" href="/favicon/safari-pinned-tab.svg" color="#000000" data-next-head=""/><link rel="shortcut icon" href="/favicon/favicon.ico" data-next-head=""/><meta name="msapplication-TileColor" content="#000000" data-next-head=""/><meta name="msapplication-config" content="/favicon/browserconfig.xml" data-next-head=""/><meta name="theme-color" content="#000" data-next-head=""/><title data-next-head="">Klipper Firmware | I wish I was cool... I wish I was Mike Thomas</title><meta name="robots" content="index,follow" data-next-head=""/><meta name="description" content="Configuring MainsailOS with all the software to run Klipper on my 3D Printer." data-next-head=""/><meta property="og:title" content="Configuring the software to run a 3D Printer" data-next-head=""/><meta property="og:description" content="Configuring MainsailOS with all the software to run Klipper on my 3D Printer." data-next-head=""/><meta property="og:url" content="https://www.mikethomas.info/projects/printer-klipper-firmware" data-next-head=""/><meta property="og:type" content="article" data-next-head=""/><meta property="article:published_time" content="2025-08-29T22:45:11.067Z" data-next-head=""/><meta property="article:modified_time" content="2025-09-04T21:19:32.286Z" data-next-head=""/><meta property="article:tag" content="Raspberry Pi" data-next-head=""/><meta property="og:image" content="https://www.mikethomas.info/assets/blog/printer-klipper-firmware/klipper-firmware-hero.jpg" data-next-head=""/><link rel="canonical" href="https://www.mikethomas.info/projects/printer-klipper-firmware" data-next-head=""/><meta name="keywords" content="Klipper" data-next-head=""/><script type="application/ld+json" data-next-head="">{"@context":"https://schema.org","@type":"BlogPosting","datePublished":"2025-08-29T22:45:11.067Z","description":"Configuring MainsailOS with all the software to run Klipper on my 3D Printer.","mainEntityOfPage":{"@type":"WebPage","@id":"https://www.mikethomas.info/projects/printer-klipper-firmware"},"headline":"Configuring the software to run a 3D Printer","image":["https://www.mikethomas.info/assets/blog/printer-klipper-firmware/klipper-firmware-hero.jpg"],"dateModified":"2025-09-04T21:19:32.286Z","author":{"@type":"Person","name":"Mike Thomas"}}</script><link rel="preload" href="/assets/blog/printer-klipper-firmware/klipper-firmware-hero.jpg" as="image" data-next-head=""/><link rel="preload" href="/_next/static/css/c6f92de8e742614c.css" as="style"/><link rel="stylesheet" href="/_next/static/css/c6f92de8e742614c.css" data-n-g=""/><link rel="preload" href="/_next/static/css/393b0371505a9873.css" as="style"/><link rel="stylesheet" href="/_next/static/css/393b0371505a9873.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-42372ed130431b0a.js"></script><script src="/_next/static/chunks/webpack-a339f4a57035852b.js" defer=""></script><script src="/_next/static/chunks/framework-a6e0b7e30f98059a.js" defer=""></script><script src="/_next/static/chunks/main-a612c2988afed858.js" defer=""></script><script src="/_next/static/chunks/pages/_app-30e2974eb524b097.js" defer=""></script><script src="/_next/static/chunks/3614f49b-f41f0efde8a71c1f.js" defer=""></script><script src="/_next/static/chunks/04ce947b-4d20b65e4c63866a.js" defer=""></script><script src="/_next/static/chunks/982-f9815873e706e292.js" defer=""></script><script src="/_next/static/chunks/485-7196188b3ce17bec.js" defer=""></script><script src="/_next/static/chunks/pages/projects/%5Bslug%5D-0128a563287ec87a.js" defer=""></script><script src="/_next/static/Y5mSgE8YhqnLmiRs80-DT/_buildManifest.js" defer=""></script><script src="/_next/static/Y5mSgE8YhqnLmiRs80-DT/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div class="navigation"><a class="navigation_github-banner__Smckk github-fork-ribbon d-none d-md-block" href="https://github.com/mikepthomas/projects" target="_blank" rel="noopener noreferrer" data-ribbon="Fork me on GitHub" title="Fork me on GitHub">Fork me on GitHub</a><nav class="navbar navbar-expand-md navbar-dark bg-dark fixed-top"><div class="container-fluid"><a href="/" class="navbar-brand"><img class="navigation_navbar-logo__YrC5F" src="/logo-blue.png" alt="Mike Thomas"/></a><button aria-label="Toggle navigation" type="button" class="navbar-toggler"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse"><ul class="mr-auto navbar-nav"><li class="nav-item"><a href="https://github.com/mikepthomas" target="_blank" class="nav-link"><svg data-prefix="fab" data-icon="github" class="svg-inline--fa fa-github" role="img" viewBox="0 0 512 512" aria-hidden="true"><path fill="currentColor" d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3 .3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5 .3-6.2 2.3zm44.2-1.7c-2.9 .7-4.9 2.6-4.6 4.9 .3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM252.8 8c-138.7 0-244.8 105.3-244.8 244 0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1 100-33.2 167.8-128.1 167.8-239 0-138.7-112.5-244-251.2-244zM105.2 352.9c-1.3 1-1 3.3 .7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3 .3 2.9 2.3 3.9 1.6 1 3.6 .7 4.3-.7 .7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3 .7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3 .7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path></svg> <!-- -->GitHub<!-- --> Profile</a></li><li class="nav-item"><a href="https://www.linkedin.com/in/mikepaulthomas" target="_blank" class="nav-link"><svg data-prefix="fab" data-icon="linkedin" class="svg-inline--fa fa-linkedin" role="img" viewBox="0 0 448 512" aria-hidden="true"><path fill="currentColor" d="M416 32L31.9 32C14.3 32 0 46.5 0 64.3L0 447.7C0 465.5 14.3 480 31.9 480L416 480c17.6 0 32-14.5 32-32.3l0-383.4C448 46.5 433.6 32 416 32zM135.4 416l-66.4 0 0-213.8 66.5 0 0 213.8-.1 0zM102.2 96a38.5 38.5 0 1 1 0 77 38.5 38.5 0 1 1 0-77zM384.3 416l-66.4 0 0-104c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9l0 105.8-66.4 0 0-213.8 63.7 0 0 29.2 .9 0c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9l0 117.2z"></path></svg> <!-- -->LinkedIn<!-- --> Profile</a></li><li class="nav-item"><a href="https://instagram.com/montycrabapple" target="_blank" class="nav-link"><svg data-prefix="fab" data-icon="instagram" class="svg-inline--fa fa-instagram" role="img" viewBox="0 0 448 512" aria-hidden="true"><path fill="currentColor" d="M224.3 141a115 115 0 1 0 -.6 230 115 115 0 1 0 .6-230zm-.6 40.4a74.6 74.6 0 1 1 .6 149.2 74.6 74.6 0 1 1 -.6-149.2zm93.4-45.1a26.8 26.8 0 1 1 53.6 0 26.8 26.8 0 1 1 -53.6 0zm129.7 27.2c-1.7-35.9-9.9-67.7-36.2-93.9-26.2-26.2-58-34.4-93.9-36.2-37-2.1-147.9-2.1-184.9 0-35.8 1.7-67.6 9.9-93.9 36.1s-34.4 58-36.2 93.9c-2.1 37-2.1 147.9 0 184.9 1.7 35.9 9.9 67.7 36.2 93.9s58 34.4 93.9 36.2c37 2.1 147.9 2.1 184.9 0 35.9-1.7 67.7-9.9 93.9-36.2 26.2-26.2 34.4-58 36.2-93.9 2.1-37 2.1-147.8 0-184.8zM399 388c-7.8 19.6-22.9 34.7-42.6 42.6-29.5 11.7-99.5 9-132.1 9s-102.7 2.6-132.1-9c-19.6-7.8-34.7-22.9-42.6-42.6-11.7-29.5-9-99.5-9-132.1s-2.6-102.7 9-132.1c7.8-19.6 22.9-34.7 42.6-42.6 29.5-11.7 99.5-9 132.1-9s102.7-2.6 132.1 9c19.6 7.8 34.7 22.9 42.6 42.6 11.7 29.5 9 99.5 9 132.1s2.7 102.7-9 132.1z"></path></svg> <!-- -->Instagram<!-- --> Profile</a></li><li class="nav-item"><a href="https://discordapp.com/users/460182324626325535" target="_blank" class="nav-link"><svg data-prefix="fab" data-icon="discord" class="svg-inline--fa fa-discord" role="img" viewBox="0 0 576 512" aria-hidden="true"><path fill="currentColor" d="M492.5 69.8c-.2-.3-.4-.6-.8-.7-38.1-17.5-78.4-30-119.7-37.1-.4-.1-.8 0-1.1 .1s-.6 .4-.8 .8c-5.5 9.9-10.5 20.2-14.9 30.6-44.6-6.8-89.9-6.8-134.4 0-4.5-10.5-9.5-20.7-15.1-30.6-.2-.3-.5-.6-.8-.8s-.7-.2-1.1-.2c-41.3 7.1-81.6 19.6-119.7 37.1-.3 .1-.6 .4-.8 .7-76.2 113.8-97.1 224.9-86.9 334.5 0 .3 .1 .5 .2 .8s.3 .4 .5 .6c44.4 32.9 94 58 146.8 74.2 .4 .1 .8 .1 1.1 0s.7-.4 .9-.7c11.3-15.4 21.4-31.8 30-48.8 .1-.2 .2-.5 .2-.8s0-.5-.1-.8-.2-.5-.4-.6-.4-.3-.7-.4c-15.8-6.1-31.2-13.4-45.9-21.9-.3-.2-.5-.4-.7-.6s-.3-.6-.3-.9 0-.6 .2-.9 .3-.5 .6-.7c3.1-2.3 6.2-4.7 9.1-7.1 .3-.2 .6-.4 .9-.4s.7 0 1 .1c96.2 43.9 200.4 43.9 295.5 0 .3-.1 .7-.2 1-.2s.7 .2 .9 .4c2.9 2.4 6 4.9 9.1 7.2 .2 .2 .4 .4 .6 .7s.2 .6 .2 .9-.1 .6-.3 .9-.4 .5-.6 .6c-14.7 8.6-30 15.9-45.9 21.8-.2 .1-.5 .2-.7 .4s-.3 .4-.4 .7-.1 .5-.1 .8 .1 .5 .2 .8c8.8 17 18.8 33.3 30 48.8 .2 .3 .6 .6 .9 .7s.8 .1 1.1 0c52.9-16.2 102.6-41.3 147.1-74.2 .2-.2 .4-.4 .5-.6s.2-.5 .2-.8c12.3-126.8-20.5-236.9-86.9-334.5zm-302 267.7c-29 0-52.8-26.6-52.8-59.2s23.4-59.2 52.8-59.2c29.7 0 53.3 26.8 52.8 59.2 0 32.7-23.4 59.2-52.8 59.2zm195.4 0c-29 0-52.8-26.6-52.8-59.2s23.4-59.2 52.8-59.2c29.7 0 53.3 26.8 52.8 59.2 0 32.7-23.2 59.2-52.8 59.2z"></path></svg> <!-- -->Discord<!-- --> Profile</a></li></ul></div></div></nav></div><div class="min-h-screen"><main><nav class="breadcrumbs_breadcrumbs__p9HFN position-sticky" aria-label="breadcrumb"><nav class="p-3 bg-light" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="/"><svg data-prefix="fas" data-icon="house" class="svg-inline--fa fa-house mr-2" role="img" viewBox="0 0 512 512" aria-hidden="true"><path fill="currentColor" d="M277.8 8.6c-12.3-11.4-31.3-11.4-43.5 0l-224 208c-9.6 9-12.8 22.9-8 35.1S18.8 272 32 272l16 0 0 176c0 35.3 28.7 64 64 64l288 0c35.3 0 64-28.7 64-64l0-176 16 0c13.2 0 25-8.1 29.8-20.3s1.6-26.2-8-35.1l-224-208zM240 320l32 0c26.5 0 48 21.5 48 48l0 96-128 0 0-96c0-26.5 21.5-48 48-48z"></path></svg>Home</a></li><li class="breadcrumb-item"><a href="/projects">Projects</a></li><li class="active breadcrumb-item" aria-current="page">Klipper Firmware</li></ol></nav></nav><div class="container"><article class="mb-16"><div class="mt-24 mb-6 container"><h1 class="text-5xl md:text-7xl lg:text-8xl font-bold tracking-tighter leading-tight md:leading-none mb-12 text-center md:text-left">Configuring the software to run a 3D Printer</h1></div><div class="mb-6 container"><div class="flex items-center"><img src="/assets/authors/mike.jpg" class="w-12 h-12 rounded-full mr-4" alt="Mike Thomas"/><div class="text-xl font-bold">Mike Thomas</div></div></div><div class="mb-6 container"><svg data-prefix="fas" data-icon="calendar-day" class="svg-inline--fa fa-calendar-day mr-2" role="img" viewBox="0 0 448 512" aria-hidden="true"><path fill="currentColor" d="M128 0c17.7 0 32 14.3 32 32l0 32 128 0 0-32c0-17.7 14.3-32 32-32s32 14.3 32 32l0 32 32 0c35.3 0 64 28.7 64 64l0 288c0 35.3-28.7 64-64 64L64 480c-35.3 0-64-28.7-64-64L0 128C0 92.7 28.7 64 64 64l32 0 0-32c0-17.7 14.3-32 32-32zm0 256c-17.7 0-32 14.3-32 32l0 64c0 17.7 14.3 32 32 32l64 0c17.7 0 32-14.3 32-32l0-64c0-17.7-14.3-32-32-32l-64 0z"></path></svg>Created <time dateTime="2025-08-29T22:45:11.067Z">29 August 2025</time>, last modified <time dateTime="2025-09-04T21:19:32.286Z">4 September 2025</time></div><div class="mb-6 container"><span class="mr-2 badge bg-orange rounded-pill">Raspberry Pi</span></div><div class="mb-6 sm:mx-0 container"><div class="sm:mx-0"><img alt="Cover Image for Configuring the software to run a 3D Printer" width="1280" height="960" decoding="async" data-nimg="1" class="img-fluid img-thumbnail" style="color:transparent" src="/assets/blog/printer-klipper-firmware/klipper-firmware-hero.jpg"/></div></div><div class="nav-padding projects-page container"><div class="row"><div class="blog_markdown__sabr0 col-lg-8"><h2 id="table-of-contents">Table of contents</h2><ol><li><a href="/projects/printer-klipper-firmware#mainsailos">MainsailOS</a></li><li><a href="/projects/printer-klipper-firmware#update-apt-repositories">Update APT Repositories</a></li><li><a href="/projects/printer-klipper-firmware#klipper-motd">Klipper MOTD</a></li><li><a href="/projects/printer-klipper-firmware#kiauh">Kiauh</a><ol><li><a href="/projects/printer-klipper-firmware#install-klipperscreen">Install KlipperScreen</a></li><li><a href="/projects/printer-klipper-firmware#install-prettygcode">Install PrettyGCode</a></li></ol></li><li><a href="/projects/printer-klipper-firmware#ldo-installer">LDO Installer</a></li><li><a href="/projects/printer-klipper-firmware#candlelight-firmware">CandleLight Firmware</a></li><li><a href="/projects/printer-klipper-firmware#katapult-formerly-known-as-canboot">Katapult (formerly known as CanBoot)</a></li><li><a href="/projects/printer-klipper-firmware#flash-klipper-to-mcu">Flash Klipper to MCU</a><ol><li><a href="/projects/printer-klipper-firmware#anet-a8">Anet A8</a></li><li><a href="/projects/printer-klipper-firmware#arduino-mega">Arduino Mega</a></li><li><a href="/projects/printer-klipper-firmware#arduino-uno">Arduino Uno</a></li><li><a href="/projects/printer-klipper-firmware#easy-brd">Easy BRD</a></li><li><a href="/projects/printer-klipper-firmware#ebb-sb2240-can-v10">EBB SB2240 CAN V1.0</a></li><li><a href="/projects/printer-klipper-firmware#ebb36-v10">EBB36 V1.0</a></li><li><a href="/projects/printer-klipper-firmware#ebb42-v11">EBB42 V1.1</a></li><li><a href="/projects/printer-klipper-firmware#klipper-expander">Klipper Expander</a></li><li><a href="/projects/printer-klipper-firmware#mmb-can-v10">MMB CAN V1.0</a></li><li><a href="/projects/printer-klipper-firmware#picobilical">Picobilical</a></li><li><a href="/projects/printer-klipper-firmware#pitb-v10">PITB V1.0</a></li><li><a href="/projects/printer-klipper-firmware#skr-14">SKR 1.4</a></li><li><a href="/projects/printer-klipper-firmware#skr-14-turbo">SKR 1.4 Turbo</a></li><li><a href="/projects/printer-klipper-firmware#skr-mini-e3-v20">SKR Mini E3 V2.0</a></li><li><a href="/projects/printer-klipper-firmware#skr-pico">SKR Pico</a></li><li><a href="/projects/printer-klipper-firmware#super8">Super8</a></li></ol></li><li><a href="/projects/printer-klipper-firmware#rpi-microcontroller">RPi microcontroller</a><ol><li><a href="/projects/printer-klipper-firmware#install-the-rc-script">Install the RC Script</a></li><li><a href="/projects/printer-klipper-firmware#building-the-micro-controller-code">Building the Micro-Controller Code</a></li><li><a href="/projects/printer-klipper-firmware#optional-interface-options">Optional: Interface Options</a></li><li><a href="/projects/printer-klipper-firmware#optional-identify-the-correct-gpiochip">Optional: Identify the correct gpiochip</a></li><li><a href="/projects/printer-klipper-firmware#optional-hardware-pwm">Optional: Hardware PWM</a></li></ol></li><li><a href="/projects/printer-klipper-firmware#create-flash-mcu-convenience-script">Create Flash MCU Convenience Script</a></li><li><a href="/projects/printer-klipper-firmware#resonance-compensation">Resonance Compensation</a></li><li><a href="/projects/printer-klipper-firmware#setup-crowsnest">Setup Crowsnest</a></li><li><a href="/projects/printer-klipper-firmware#fix-for-reprapdiscount-128x64-full-graphic-smart-controller">Fix for RepRapDiscount 128x64 Full Graphic Smart Controller</a></li><li><a href="/projects/printer-klipper-firmware#klipperscreen-fix">KlipperScreen Fix</a></li></ol><h2 id="mainsailos">MainsailOS</h2><p>As Mainsail is my Klipper UI of choice I use <a href="https://docs-os.mainsail.xyz/" rel="noopener noreferrer" target="_blank">MainsailOS 2.1.0</a> for my printers as many of the tools come installed by default.</p><h2 id="update-apt-repositories">Update APT Repositories</h2><p>One of the first things I do when setting up a new machine is to update apt to use the <a href="/projects/thinkcenter#sonatype-nexus-repository">Nexus repository</a> to avoid downloading updates multiple times over the internet.</p><pre class="language-sh"><code class="language-sh code-highlight"><span class="code-line"><span class="token function">sudo</span> <span class="token function">nano</span> /etc/apt/auth.conf.d/nexus.mikethomas.info.conf
</span><span class="code-line"><span class="token function">sudo</span> <span class="token function">nano</span> /etc/apt/sources.list
</span><span class="code-line"><span class="token function">sudo</span> <span class="token function">nano</span> /etc/apt/sources.list.d/raspi.list
</span></code></pre><h2 id="klipper-motd">Klipper MOTD</h2><p>This adds a nice splash screen to the console that is really useful when logging into the printer via SSH.</p><pre class="language-sh"><code class="language-sh code-highlight"><span class="code-line"><span class="token function">git</span> clone https://www.github.com/tomaski/klipper-motd.git
</span><span class="code-line"><span class="token function">chmod</span> +x ./klipper-motd/setup.sh
</span><span class="code-line"><span class="token function">sudo</span> ./klipper-motd/setup.sh <span class="token parameter variable">--install</span>
</span></code></pre><ol><li>Enter <code>Y</code> to add update check to dashboard</li></ol><pre class="language-sh"><code class="language-sh code-highlight"><span class="code-line"><span class="token function">sudo</span> motd-config
</span></code></pre><ol start="2"><li>Select <code>OS Flavor</code> (Option 1)</li><li>Select theme you would like to use</li></ol><h2 id="kiauh">Kiauh</h2><p>Kiauh stands for &quot;Klipper Installation And Update Helper&quot; it is a set of scripts making it easier to set up the tools required for Klipper.</p><pre class="language-sh"><code class="language-sh code-highlight"><span class="code-line"><span class="token function">git</span> clone https://github.com/dw-0/kiauh.git
</span><span class="code-line">./kiauh/kiauh.sh
</span></code></pre><h3 id="install-klipperscreen">Install KlipperScreen</h3><ol><li>Select <code>Install</code> (Option 1)</li><li>Select <code>KlipperScreen</code> (Option 5)</li><li>Press Enter to install as service (Default)</li><li>Press Enter to use Xserver (Default)</li><li>Press Enter to install NetworkManager (Default)</li></ol><h3 id="install-prettygcode">Install PrettyGCode</h3><ol><li>Select <code>Install</code> (Option 1)</li><li>Select <code>PrettyGCode</code> (Option 7)</li><li>Press Enter to use port 7136 (Default)</li></ol><h2 id="ldo-installer">LDO Installer</h2><p>The LDO Installer sets up the printer configurations specifically for LDO Motors printer kits. It also has a nice option to create a splash screen for KlipperScreen whilst the printer is booting up.</p><pre class="language-sh"><code class="language-sh code-highlight"><span class="code-line"><span class="token function">git</span> clone https://github.com/MotorDynamicsLab/LDOInstaller.git
</span><span class="code-line">./LDOInstaller/LDOInstaller.sh
</span></code></pre><ol><li>Select LDO Kit you have</li><li>Select printer size you have</li><li>Select <code>Splash Screen</code> (Option 7)</li><li>Select <code>Install</code> (Option 1)</li></ol><h2 id="candlelight-firmware">CandleLight Firmware</h2><p>CandleLight Firmware is used for many boards connect the USB port of Raspberry Pi to CAN bus for 3D printing boards such as the <a href="https://github.com/bigtreetech/U2C" rel="noopener noreferrer" target="_blank">BigTreeTech U2C</a>.</p><pre class="language-sh"><code class="language-sh code-highlight"><span class="code-line"><span class="token function">git</span> clone https://github.com/candle-usb/candleLight_fw
</span><span class="code-line"><span class="token builtin class-name">cd</span> ~/candleLight_fw/
</span><span class="code-line"><span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> gcc-arm-none-eabi
</span><span class="code-line"><span class="token function">mkdir</span> build
</span><span class="code-line"><span class="token builtin class-name">cd</span> build
</span><span class="code-line">cmake <span class="token punctuation">..</span> <span class="token parameter variable">-DCMAKE_TOOLCHAIN_FILE</span><span class="token operator">=</span><span class="token punctuation">..</span>/cmake/gcc-arm-none-eabi-8-2019-q3-update.cmake
</span><span class="code-line"><span class="token function">make</span> candleLight_fw <span class="token parameter variable">-j4</span>
</span><span class="code-line"><span class="token function">sudo</span> dfu-util <span class="token parameter variable">-a</span> <span class="token number">0</span> <span class="token parameter variable">-D</span> ./candleLight_fw.bin --dfuse-address 0x08000000:force:mass-erase:leave <span class="token parameter variable">-d</span> 0483:df11
</span></code></pre><p>Create <code>/etc/network/interfaces.d/can0</code>:</p><pre class="bg-dark mb-3 p-4 rounded text-light"><code class="code-highlight"><span class="code-line">allow-hotplug can0
</span><span class="code-line">iface can0 can static
</span><span class="code-line">    bitrate 1000000
</span><span class="code-line">    up ifconfig $IFACE txqueuelen 128
</span></code></pre><pre class="language-sh"><code class="language-sh code-highlight"><span class="code-line"><span class="token function">sudo</span> <span class="token function">reboot</span>
</span><span class="code-line">~/klippy-env/bin/python ~/klipper/scripts/canbus_query.py can0
</span><span class="code-line"><span class="token function">ip</span> <span class="token parameter variable">-s</span> <span class="token function">link</span> show can0
</span></code></pre><h2 id="katapult-formerly-known-as-canboot">Katapult (formerly known as CanBoot)</h2><p><a href="https://github.com/Arksine/katapult" rel="noopener noreferrer" target="_blank">Katapult</a> is a bootloader mainly for MCUs that use CAN bus, however it now also supports USB and UART interfaces.</p><p>We will check out the code now ready for use when we flash Klipper to the MCUs in the next section as not all boards will use it.</p><pre class="language-sh"><code class="language-sh code-highlight"><span class="code-line"><span class="token function">git</span> clone https://github.com/Arksine/katapult
</span></code></pre><h2 id="flash-klipper-to-mcu">Flash Klipper to MCU</h2><p>Flashing the Klipper firmware to the MCU can be slightly different depending on the type of Micro-controller architecture that the MCU uses.</p><p>The basic firmware flashing steps are as follows:</p><pre class="language-sh"><code class="language-sh code-highlight"><span class="code-line"><span class="token builtin class-name">cd</span> ~/klipper/
</span><span class="code-line"><span class="token function">make</span> clean
</span><span class="code-line"><span class="token function">make</span> menuconfig
</span><span class="code-line"><span class="token function">make</span>
</span></code></pre><p>However, as I have many different controllers I have opted to use the <code>KCONFIG_CONFIG</code> method of configuring allowing me to save the multiple configs so they can be easily reused when I need to update the firmware.</p><p>You can find the configs used in the sections below in my <a href="https://github.com/mikepthomas/klipper_config/tree/main/Firmware" rel="noopener noreferrer" target="_blank">Klipper Config Firmware Repository</a>.</p><h3 id="anet-a8">Anet A8</h3><p>This is the board that originally came with <a href="/projects/printer">my first 3D printer</a>.</p><h4 id="klipper-firmware-configuration">Klipper Firmware Configuration</h4><h5 id="usb">USB</h5><pre class="language-sh"><code class="language-sh code-highlight"><span class="code-line"><span class="token builtin class-name">cd</span> ~/klipper/
</span><span class="code-line"><span class="token function">make</span> clean
</span><span class="code-line"><span class="token function">make</span> menuconfig <span class="token assign-left variable">KCONFIG_CONFIG</span><span class="token operator">=</span>config.anet_a8
</span></code></pre><p>Set the following configuration:</p><pre class="bg-dark mb-3 p-4 rounded text-light"><code class="code-highlight"><span class="code-line"><span class="menus_header__OXEok">(Top)</span></span><span class="code-line"><span class="menus_banner__Yjtri">Klipper Firmware Configuration</span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">[ ] Enable extra low-level configuration options</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">    Micro-controller Architecture (Atmega AVR)  ---&gt;</span></span></span><span class="code-line"><span class="menus_background__qukJD">    Processor model (atmega1284p)  ---&gt;<span class="menus_menu__6EDS9"> </span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9"> </span></span><span class="menus_banner__Yjtri"> </span><span class="menus_header__OXEok">[Space/Enter] Toggle/enter [?] Help [/] Search</span></span><span class="code-line"><span class="menus_header__OXEok">[Q] Quit (prompts for save) [ESC] Leave menu</span></span></code></pre><p>Backup config, Build and Flash to the board:</p><pre class="language-sh"><code class="language-sh code-highlight"><span class="code-line"><span class="token function">cp</span> config.anet_a8 <span class="token punctuation">..</span>/printer_data/config/Firmware/
</span><span class="code-line"><span class="token function">make</span> <span class="token assign-left variable">KCONFIG_CONFIG</span><span class="token operator">=</span>config.anet_a8 <span class="token parameter variable">-j4</span>
</span><span class="code-line">avrdude <span class="token parameter variable">-p</span> atmega1284p <span class="token parameter variable">-c</span> arduino <span class="token parameter variable">-b</span> <span class="token number">57600</span> <span class="token parameter variable">-P</span> /dev/serial/by-id/usb-1a86_USB2.0-Serial-if00-port0 <span class="token parameter variable">-U</span> out/klipper.elf.hex
</span></code></pre><h3 id="arduino-mega">Arduino Mega</h3><p>Used by <a href="https://reprap.org/wiki/RAMPS_1.6" rel="noopener noreferrer" target="_blank">RAMPS Shield</a>.</p><h4 id="klipper-firmware-configuration-1">Klipper Firmware Configuration</h4><h5 id="usb-1">USB</h5><pre class="language-sh"><code class="language-sh code-highlight"><span class="code-line"><span class="token builtin class-name">cd</span> ~/klipper/
</span><span class="code-line"><span class="token function">make</span> clean
</span><span class="code-line"><span class="token function">make</span> menuconfig <span class="token assign-left variable">KCONFIG_CONFIG</span><span class="token operator">=</span>config.arduino_mega
</span></code></pre><p>Set the following configuration:</p><pre class="bg-dark mb-3 p-4 rounded text-light"><code class="code-highlight"><span class="code-line"><span class="menus_header__OXEok">(Top)</span></span><span class="code-line"><span class="menus_banner__Yjtri">Klipper Firmware Configuration</span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">[ ] Enable extra low-level configuration options</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">    Micro-controller Architecture (Atmega AVR)  ---&gt;</span></span></span><span class="code-line"><span class="menus_background__qukJD">    Processor model (atmega2560)  ---&gt;<span class="menus_menu__6EDS9"> </span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9"> </span></span><span class="menus_banner__Yjtri"> </span><span class="menus_header__OXEok">[Space/Enter] Toggle/enter [?] Help [/] Search</span></span><span class="code-line"><span class="menus_header__OXEok">[Q] Quit (prompts for save) [ESC] Leave menu</span></span></code></pre><p>Backup config, Build and Flash to the board:</p><pre class="language-sh"><code class="language-sh code-highlight"><span class="code-line"><span class="token function">cp</span> config.arduino_mega <span class="token punctuation">..</span>/printer_data/config/Firmware/
</span><span class="code-line"><span class="token function">make</span> <span class="token assign-left variable">KCONFIG_CONFIG</span><span class="token operator">=</span>config.arduino_mega <span class="token parameter variable">-j4</span>
</span><span class="code-line"><span class="token function">make</span> <span class="token assign-left variable">KCONFIG_CONFIG</span><span class="token operator">=</span>config.arduino_mega flash <span class="token assign-left variable">FLASH_DEVICE</span><span class="token operator">=</span>/dev/serial/by-id/usb-1a86_USB_Serial-if00-port0
</span></code></pre><h3 id="arduino-uno">Arduino Uno</h3><p>Used by <a href="https://all3dp.com/2/arduino-cnc-shield/" rel="noopener noreferrer" target="_blank">Arduino CNC Shield</a>.</p><h4 id="klipper-firmware-configuration-2">Klipper Firmware Configuration</h4><h5 id="usb-2">USB</h5><pre class="language-sh"><code class="language-sh code-highlight"><span class="code-line"><span class="token builtin class-name">cd</span> ~/klipper/
</span><span class="code-line"><span class="token function">make</span> clean
</span><span class="code-line"><span class="token function">make</span> menuconfig <span class="token assign-left variable">KCONFIG_CONFIG</span><span class="token operator">=</span>config.arduino_uno
</span></code></pre><p>Set the following configuration:</p><pre class="bg-dark mb-3 p-4 rounded text-light"><code class="code-highlight"><span class="code-line"><span class="menus_header__OXEok">(Top)</span></span><span class="code-line"><span class="menus_banner__Yjtri">Klipper Firmware Configuration</span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">[ ] Enable extra low-level configuration options</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">    Micro-controller Architecture (Atmega AVR)  ---&gt;</span></span></span><span class="code-line"><span class="menus_background__qukJD">    Processor model (atmega328p)  ---&gt;<span class="menus_menu__6EDS9"> </span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">    Optional features (to reduce code size)  ---&gt;</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9"> </span></span><span class="menus_banner__Yjtri"> </span><span class="menus_header__OXEok">[Space/Enter] Toggle/enter [?] Help [/] Search</span></span><span class="code-line"><span class="menus_header__OXEok">[Q] Quit (prompts for save) [ESC] Leave menu</span></span></code></pre><p>As the firmware is too large to fit in the supplied flash, we also need to disable some features:</p><pre class="bg-dark mb-3 p-4 rounded text-light"><code class="code-highlight"><span class="code-line"><span class="menus_header__OXEok">(Top) → Optional features (to reduce code size)</span></span><span class="code-line"><span class="menus_banner__Yjtri">Klipper Firmware Configuration</span></span><span class="code-line"><span class="menus_background__qukJD">[*] Support micro-controller based ADC (analog to digital)<span class="menus_menu__6EDS9"> </span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">[ ] Support communicating with external chips via SPI bus</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">[ ] Support communicating with external chips via I2C bus</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">[*] Support hardware PWM (pulse width modulation)</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">[*] Support GPIO based button reading</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">[ ] Support Trinamic stepper motor driver UART communication</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">[ ] Support &#x27;neopixel&#x27; type LED control</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">[ ] Support measuring fan tachometer GPIO pins</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">    *** LCD chips ***</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">[*] Support ST7920 LCD display</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">[*] Support HD44780 LCD display</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">    *** External ADC type chips ***</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">[ ] Support HX711 and HX717 ADC chips</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9"> </span></span><span class="menus_banner__Yjtri"> </span><span class="menus_header__OXEok">[Space/Enter] Toggle/enter [?] Help [/] Search</span></span><span class="code-line"><span class="menus_header__OXEok">[Q] Quit (prompts for save) [ESC] Leave menu</span></span></code></pre><p>Backup config, Build and Flash to the board:</p><pre class="language-sh"><code class="language-sh code-highlight"><span class="code-line"><span class="token function">cp</span> config.arduino_uno <span class="token punctuation">..</span>/printer_data/config/Firmware/
</span><span class="code-line"><span class="token function">make</span> <span class="token assign-left variable">KCONFIG_CONFIG</span><span class="token operator">=</span>config.arduino_uno <span class="token parameter variable">-j4</span>
</span><span class="code-line"><span class="token function">make</span> <span class="token assign-left variable">KCONFIG_CONFIG</span><span class="token operator">=</span>config.arduino_uno flash <span class="token assign-left variable">FLASH_DEVICE</span><span class="token operator">=</span>/dev/serial/by-id/usb-1a86_USB2.0-Serial-if00-port0
</span></code></pre><h3 id="easy-brd">Easy BRD</h3><p>Get the most up to date info on the <a href="https://github.com/Tircown/ERCF-easy-brd" rel="noopener noreferrer" target="_blank">official page</a>.</p><p>This board will be used for the <a href="/projects/enraged-rabbit-carrot-feeder-1.1">6 channel Enraged Rabbit Carrot Feeder V1.1</a>.</p><h4 id="klipper-firmware-configuration-3">Klipper Firmware Configuration</h4><h5 id="usb-3">USB</h5><pre class="language-sh"><code class="language-sh code-highlight"><span class="code-line"><span class="token builtin class-name">cd</span> ~/klipper/
</span><span class="code-line"><span class="token function">make</span> clean
</span><span class="code-line"><span class="token function">make</span> menuconfig <span class="token assign-left variable">KCONFIG_CONFIG</span><span class="token operator">=</span>config.easy_brd
</span></code></pre><p>Set the following configuration:</p><pre class="bg-dark mb-3 p-4 rounded text-light"><code class="code-highlight"><span class="code-line"><span class="menus_header__OXEok">(Top)</span></span><span class="code-line"><span class="menus_banner__Yjtri">Klipper Firmware Configuration</span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">[ ] Enable extra low-level configuration options</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">    Micro-controller Architecture (SAMC21/SAMD21/SAMD51/SAME5x)  ---&gt;</span></span></span><span class="code-line"><span class="menus_background__qukJD">    Processor model (SAMD21G18)  ---&gt;<span class="menus_menu__6EDS9"> </span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">    Bootloader offset (8KiB bootloader)  ---&gt;</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">    Clock Reference (Internal clock)  ---&gt;</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">    Communication interface (USB)  ---&gt;</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9"> </span></span><span class="menus_banner__Yjtri"> </span><span class="menus_header__OXEok">[Space/Enter] Toggle/enter [?] Help [/] Search</span></span><span class="code-line"><span class="menus_header__OXEok">[Q] Quit (prompts for save) [ESC] Leave menu</span></span></code></pre><p>Backup config, Build and Flash to the board:</p><pre class="language-sh"><code class="language-sh code-highlight"><span class="code-line"><span class="token function">cp</span> config.easy_brd <span class="token punctuation">..</span>/printer_data/config/Firmware/
</span><span class="code-line"><span class="token function">make</span> <span class="token assign-left variable">KCONFIG_CONFIG</span><span class="token operator">=</span>config.easy_brd <span class="token parameter variable">-j4</span>
</span><span class="code-line"><span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> bossa-cli
</span><span class="code-line"><span class="token function">sudo</span> bossac <span class="token parameter variable">-i</span> <span class="token parameter variable">-d</span> <span class="token parameter variable">-p</span> /dev/ttyACM0 <span class="token parameter variable">-e</span> <span class="token parameter variable">-w</span> <span class="token parameter variable">-v</span> <span class="token parameter variable">-R</span> <span class="token parameter variable">--offset</span><span class="token operator">=</span>0x2000 out/klipper.bin
</span></code></pre><h3 id="ebb-sb2240-can-v10">EBB SB2240 CAN V1.0</h3><p>Get the most up to date info on the <a href="https://github.com/bigtreetech/docs/blob/master/docs/EBB%202240%202209%20CAN.md" rel="noopener noreferrer" target="_blank">official page</a>.</p><p>This board will be used for the <a href="/projects/voron-stealthburner">Stealthburner</a> on the <a href="/projects/printer-voron-2.4">Voron 2.4</a> when I upgrade to CAN.</p><h4 id="katapult-configuration">Katapult Configuration</h4><h5 id="can-bus">CAN Bus</h5><pre class="language-sh"><code class="language-sh code-highlight"><span class="code-line"><span class="token builtin class-name">cd</span> ~/katapult/
</span><span class="code-line"><span class="token function">make</span> clean
</span><span class="code-line"><span class="token function">make</span> menuconfig <span class="token assign-left variable">KCONFIG_CONFIG</span><span class="token operator">=</span>config.sb2240_can_katapult
</span><span class="code-line"><span class="token function">cp</span> config.sb2240_can_katapult <span class="token punctuation">..</span>/printer_data/config/Firmware/
</span><span class="code-line"><span class="token function">make</span> <span class="token assign-left variable">KCONFIG_CONFIG</span><span class="token operator">=</span>config.sb2240_can_katapult <span class="token parameter variable">-j4</span>
</span><span class="code-line"><span class="token function">sudo</span> dfu-util <span class="token parameter variable">-a</span> <span class="token number">0</span> <span class="token parameter variable">-d</span> 0483:df11 <span class="token parameter variable">-s</span> 0x08000000:mass-erase:force <span class="token parameter variable">-D</span> ~/katapult/out/katapult.bin
</span></code></pre><pre class="bg-dark mb-3 p-4 rounded text-light"><code class="code-highlight"><span class="code-line"><span class="menus_header__OXEok">(Top)</span></span><span class="code-line"><span class="menus_banner__Yjtri">Katapult Configuration</span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">    Micro-controller Architecture (STMicroelectronics STM32)  ---&gt;</span></span></span><span class="code-line"><span class="menus_background__qukJD">    Processor model (STM32G0B1)  ---&gt;<span class="menus_menu__6EDS9"> </span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">    Build Katapult deployment application (Do not build)  ---&gt;</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">    Clock Reference (8 MHz crystal)  ---&gt;</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">    Communication interface (CAN bus (on PB0/PB1))  ---&gt;</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">    Application start offset (8KiB offset)  ---&gt;</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">(1000000) CAN bus speed</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">() GPIO pins to set on bootloader entry</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">[*] Support bootloader entry on rapid double click of reset button</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">[ ] Enable bootloader entry on button (or gpio) state</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">[*] Enable Status LED</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">(PA13) Status LED GPIO Pin</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9"> </span></span><span class="menus_banner__Yjtri"> </span><span class="menus_header__OXEok">[Space/Enter] Toggle/enter [?] Help [/] Search</span></span><span class="code-line"><span class="menus_header__OXEok">[Q] Quit (prompts for save) [ESC] Leave menu</span></span></code></pre><h5 id="usb-4">USB</h5><pre class="language-sh"><code class="language-sh code-highlight"><span class="code-line"><span class="token builtin class-name">cd</span> ~/katapult/
</span><span class="code-line"><span class="token function">make</span> clean
</span><span class="code-line"><span class="token function">make</span> menuconfig <span class="token assign-left variable">KCONFIG_CONFIG</span><span class="token operator">=</span>config.sb2240_katapult
</span><span class="code-line"><span class="token function">cp</span> config.sb2240_katapult <span class="token punctuation">..</span>/printer_data/config/Firmware/
</span><span class="code-line"><span class="token function">make</span> <span class="token assign-left variable">KCONFIG_CONFIG</span><span class="token operator">=</span>config.sb2240_katapult <span class="token parameter variable">-j4</span>
</span><span class="code-line"><span class="token function">sudo</span> dfu-util <span class="token parameter variable">-a</span> <span class="token number">0</span> <span class="token parameter variable">-d</span> 0483:df11 <span class="token parameter variable">-s</span> 0x08000000:mass-erase:force <span class="token parameter variable">-D</span> ~/katapult/out/katapult.bin
</span></code></pre><pre class="bg-dark mb-3 p-4 rounded text-light"><code class="code-highlight"><span class="code-line"><span class="menus_header__OXEok">(Top)</span></span><span class="code-line"><span class="menus_banner__Yjtri">Katapult Configuration</span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">    Micro-controller Architecture (STMicroelectronics STM32)  ---&gt;</span></span></span><span class="code-line"><span class="menus_background__qukJD">    Processor model (STM32G0B1)  ---&gt;<span class="menus_menu__6EDS9"> </span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">    Build Katapult deployment application (Do not build)  ---&gt;</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">    Clock Reference (8 MHz crystal)  ---&gt;</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">    Communication interface (USB (on PA11/PA12))  ---&gt;</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">    Application start offset (8KiB offset)  ---&gt;</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">    USB ids  ---&gt;</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">() GPIO pins to set on bootloader entry</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">[*] Support bootloader entry on rapid double click of reset button</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">[ ] Enable bootloader entry on button (or gpio) state</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">[*] Enable Status LED</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">(PA13) Status LED GPIO Pin</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9"> </span></span><span class="menus_banner__Yjtri"> </span><span class="menus_header__OXEok">[Space/Enter] Toggle/enter [?] Help [/] Search</span></span><span class="code-line"><span class="menus_header__OXEok">[Q] Quit (prompts for save) [ESC] Leave menu</span></span></code></pre><h4 id="klipper-firmware-configuration-4">Klipper Firmware Configuration</h4><h5 id="can-bus-1">CAN Bus</h5><pre class="language-sh"><code class="language-sh code-highlight"><span class="code-line"><span class="token builtin class-name">cd</span> ~/klipper/
</span><span class="code-line"><span class="token function">make</span> clean
</span><span class="code-line"><span class="token function">make</span> menuconfig <span class="token assign-left variable">KCONFIG_CONFIG</span><span class="token operator">=</span>config.sb2240_can_klipper
</span><span class="code-line"><span class="token function">cp</span> config.sb2240_can_klipper <span class="token punctuation">..</span>/printer_data/config/Firmware/
</span><span class="code-line"><span class="token function">make</span> <span class="token assign-left variable">KCONFIG_CONFIG</span><span class="token operator">=</span>config.sb2240_can_klipper <span class="token parameter variable">-j4</span>
</span><span class="code-line"><span class="token function">make</span> <span class="token assign-left variable">KCONFIG_CONFIG</span><span class="token operator">=</span>config.sb2240_can_klipper flash <span class="token assign-left variable">FLASH_DEVICE</span><span class="token operator">=</span><span class="token number">1209</span>:beba
</span></code></pre><pre class="bg-dark mb-3 p-4 rounded text-light"><code class="code-highlight"><span class="code-line"><span class="menus_header__OXEok">(Top)</span></span><span class="code-line"><span class="menus_banner__Yjtri">Klipper Firmware Configuration</span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">[*] Enable extra low-level configuration options</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">    Micro-controller Architecture (STMicroelectronics STM32)  ---&gt;</span></span></span><span class="code-line"><span class="menus_background__qukJD">    Processor model (STM32G0B1)  ---&gt;<span class="menus_menu__6EDS9"> </span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">    Bootloader offset (8KiB bootloader)  ---&gt;</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">    Clock Reference (8 MHz crystal)  ---&gt;</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">    Communication interface (CAN bus (on PB0/PB1))  ---&gt;</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">(1000000) CAN bus speed</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">[*] Optimize stepper code for &#x27;step on both edges&#x27;</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">() GPIO pins to set at micro-controller startup</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9"> </span></span><span class="menus_banner__Yjtri"> </span><span class="menus_header__OXEok">[Space/Enter] Toggle/enter [?] Help [/] Search</span></span><span class="code-line"><span class="menus_header__OXEok">[Q] Quit (prompts for save) [ESC] Leave menu</span></span></code></pre><h5 id="usb-5">USB</h5><pre class="language-sh"><code class="language-sh code-highlight"><span class="code-line"><span class="token builtin class-name">cd</span> ~/klipper/
</span><span class="code-line"><span class="token function">make</span> clean
</span><span class="code-line"><span class="token function">make</span> menuconfig <span class="token assign-left variable">KCONFIG_CONFIG</span><span class="token operator">=</span>config.sb2240_klipper
</span><span class="code-line"><span class="token function">cp</span> config.sb2240_klipper <span class="token punctuation">..</span>/printer_data/config/Firmware/
</span><span class="code-line"><span class="token function">make</span> <span class="token assign-left variable">KCONFIG_CONFIG</span><span class="token operator">=</span>config.sb2240_klipper <span class="token parameter variable">-j4</span>
</span><span class="code-line"><span class="token function">make</span> <span class="token assign-left variable">KCONFIG_CONFIG</span><span class="token operator">=</span>config.sb2240_klipper flash <span class="token assign-left variable">FLASH_DEVICE</span><span class="token operator">=</span>/dev/serial/by-id/usb-Klipper_stm32g0b1xx_2C0048000950425539393020-if00
</span></code></pre><pre class="bg-dark mb-3 p-4 rounded text-light"><code class="code-highlight"><span class="code-line"><span class="menus_header__OXEok">(Top)</span></span><span class="code-line"><span class="menus_banner__Yjtri">Klipper Firmware Configuration</span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">[*] Enable extra low-level configuration options</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">    Micro-controller Architecture (STMicroelectronics STM32)  ---&gt;</span></span></span><span class="code-line"><span class="menus_background__qukJD">    Processor model (STM32G0B1)  ---&gt;<span class="menus_menu__6EDS9"> </span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">    Bootloader offset (8KiB bootloader)  ---&gt;</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">    Clock Reference (8 MHz crystal)  ---&gt;</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">    Communication interface (USB (on PA11/PA12))  ---&gt;</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">    USB ids  ---&gt;</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">[*] Optimize stepper code for &#x27;step on both edges&#x27;</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">() GPIO pins to set at micro-controller startup</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9"> </span></span><span class="menus_banner__Yjtri"> </span><span class="menus_header__OXEok">[Space/Enter] Toggle/enter [?] Help [/] Search</span></span><span class="code-line"><span class="menus_header__OXEok">[Q] Quit (prompts for save) [ESC] Leave menu</span></span></code></pre><h3 id="ebb36-v10">EBB36 V1.0</h3><p>Get the most up to date info on the <a href="https://github.com/bigtreetech/EBB/tree/master/EBB%20CAN%20V1.0%20(STM32F072)/EBB36%20CAN%20V1.0" rel="noopener noreferrer" target="_blank">official page</a>.</p><h4 id="katapult-configuration-1">Katapult Configuration</h4><h5 id="usb-6">USB</h5><pre class="language-sh"><code class="language-sh code-highlight"><span class="code-line"><span class="token builtin class-name">cd</span> ~/katapult/
</span><span class="code-line"><span class="token function">make</span> clean
</span><span class="code-line"><span class="token function">make</span> menuconfig <span class="token assign-left variable">KCONFIG_CONFIG</span><span class="token operator">=</span>config.ebb36_1.0_katapult
</span><span class="code-line"><span class="token function">cp</span> config.ebb36_1.0_katapult <span class="token punctuation">..</span>/printer_data/config/Firmware/
</span><span class="code-line"><span class="token function">make</span> <span class="token assign-left variable">KCONFIG_CONFIG</span><span class="token operator">=</span>config.ebb36_1.0_katapult <span class="token parameter variable">-j4</span>
</span><span class="code-line"><span class="token function">sudo</span> dfu-util <span class="token parameter variable">-a</span> <span class="token number">0</span> <span class="token parameter variable">-D</span> ~/katapult/out/katapult.bin --dfuse-address 0x08000000:force:mass-erase:leave <span class="token parameter variable">-d</span> 0483:df11
</span></code></pre><pre class="bg-dark mb-3 p-4 rounded text-light"><code class="code-highlight"><span class="code-line"><span class="menus_header__OXEok">(Top)</span></span><span class="code-line"><span class="menus_banner__Yjtri">Katapult Configuration</span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">    Micro-controller Architecture (STMicroelectronics STM32)  ---&gt;</span></span></span><span class="code-line"><span class="menus_background__qukJD">    Processor model (STM32F072)  ---&gt;<span class="menus_menu__6EDS9"> </span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">    Build Katapult deployment application (Do not build)  ---&gt;</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">    Clock Reference (8 MHz crystal)  ---&gt;</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">    Communication interface (USB (on PA11/PA12))  ---&gt;</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">    Application start offset (8KiB offset)  ---&gt;</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">    USB ids  ---&gt;</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">() GPIO pins to set on bootloader entry</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">[*] Support bootloader entry on rapid double click of reset button</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">[ ] Enable bootloader entry on button (or gpio) state</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">[*] Enable Status LED</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">(PA14) Status LED GPIO Pin</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9"> </span></span><span class="menus_banner__Yjtri"> </span><span class="menus_header__OXEok">[Space/Enter] Toggle/enter [?] Help [/] Search</span></span><span class="code-line"><span class="menus_header__OXEok">[Q] Quit (prompts for save) [ESC] Leave menu</span></span></code></pre><h4 id="klipper-firmware-configuration-5">Klipper Firmware Configuration</h4><h5 id="usb-7">USB</h5><pre class="language-sh"><code class="language-sh code-highlight"><span class="code-line"><span class="token builtin class-name">cd</span> ~/klipper/
</span><span class="code-line"><span class="token function">make</span> clean
</span><span class="code-line"><span class="token function">make</span> menuconfig <span class="token assign-left variable">KCONFIG_CONFIG</span><span class="token operator">=</span>config.ebb36_1.0_klipper
</span><span class="code-line"><span class="token function">cp</span> config.ebb36_1.0_klipper <span class="token punctuation">..</span>/printer_data/config/Firmware/
</span><span class="code-line"><span class="token function">make</span> <span class="token assign-left variable">KCONFIG_CONFIG</span><span class="token operator">=</span>config.ebb36_1.0_klipper <span class="token parameter variable">-j4</span>
</span><span class="code-line"><span class="token function">make</span> <span class="token assign-left variable">KCONFIG_CONFIG</span><span class="token operator">=</span>config.ebb36_1.0_klipper flash <span class="token assign-left variable">FLASH_DEVICE</span><span class="token operator">=</span>/dev/serial/by-id/usb-katapult_stm32f072xb_1F003A000857435231343620-if00
</span></code></pre><pre class="bg-dark mb-3 p-4 rounded text-light"><code class="code-highlight"><span class="code-line"><span class="menus_header__OXEok">(Top)</span></span><span class="code-line"><span class="menus_banner__Yjtri">Klipper Firmware Configuration</span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">[*] Enable extra low-level configuration options</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">    Micro-controller Architecture (STMicroelectronics STM32)  ---&gt;</span></span></span><span class="code-line"><span class="menus_background__qukJD">    Processor model (STM32F072)  ---&gt;<span class="menus_menu__6EDS9"> </span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">    Bootloader offset (8KiB bootloader)  ---&gt;</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">    Clock Reference (8 MHz crystal)  ---&gt;</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">    Communication interface (USB (on PA11/PA12))  ---&gt;</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">    USB ids  ---&gt;</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">[*] Optimize stepper code for &#x27;step on both edges&#x27;</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">() GPIO pins to set at micro-controller startup</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9"> </span></span><span class="menus_banner__Yjtri"> </span><span class="menus_header__OXEok">[Space/Enter] Toggle/enter [?] Help [/] Search</span></span><span class="code-line"><span class="menus_header__OXEok">[Q] Quit (prompts for save) [ESC] Leave menu</span></span></code></pre><h3 id="ebb42-v11">EBB42 V1.1</h3><p>Get the most up to date info on the <a href="https://github.com/bigtreetech/EBB/tree/master/EBB%20CAN%20V1.1%20and%20V1.2%20(STM32G0B1)/EBB42%20CAN%20V1.1%20and%20V1.2" rel="noopener noreferrer" target="_blank">official page</a>.</p><h4 id="katapult-configuration-2">Katapult Configuration</h4><h5 id="usb-8">USB</h5><pre class="language-sh"><code class="language-sh code-highlight"><span class="code-line"><span class="token builtin class-name">cd</span> ~/katapult/
</span><span class="code-line"><span class="token function">make</span> clean
</span><span class="code-line"><span class="token function">make</span> menuconfig <span class="token assign-left variable">KCONFIG_CONFIG</span><span class="token operator">=</span>config.ebb42_1.1_katapult
</span><span class="code-line"><span class="token function">cp</span> config.ebb42_1.1_katapult <span class="token punctuation">..</span>/printer_data/config/Firmware/
</span><span class="code-line"><span class="token function">make</span> <span class="token assign-left variable">KCONFIG_CONFIG</span><span class="token operator">=</span>config.ebb42_1.1_katapult <span class="token parameter variable">-j4</span>
</span><span class="code-line"><span class="token function">sudo</span> dfu-util <span class="token parameter variable">-a</span> <span class="token number">0</span> <span class="token parameter variable">-D</span> ~/katapult/out/katapult.bin --dfuse-address 0x08000000:force:mass-erase:leave <span class="token parameter variable">-d</span> 0483:df11
</span></code></pre><pre class="bg-dark mb-3 p-4 rounded text-light"><code class="code-highlight"><span class="code-line"><span class="menus_header__OXEok">(Top)</span></span><span class="code-line"><span class="menus_banner__Yjtri">Katapult Configuration</span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">    Micro-controller Architecture (STMicroelectronics STM32)  ---&gt;</span></span></span><span class="code-line"><span class="menus_background__qukJD">    Processor model (STM32G0B1)  ---&gt;<span class="menus_menu__6EDS9"> </span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">    Build Katapult deployment application (Do not build)  ---&gt;</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">    Clock Reference (8 MHz crystal)  ---&gt;</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">    Communication interface (USB (on PA11/PA12))  ---&gt;</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">    Application start offset (8KiB offset)  ---&gt;</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">    USB ids  ---&gt;</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">() GPIO pins to set on bootloader entry</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">[*] Support bootloader entry on rapid double click of reset button</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">[ ] Enable bootloader entry on button (or gpio) state</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">[*] Enable Status LED</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">(PA13) Status LED GPIO Pin</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9"> </span></span><span class="menus_banner__Yjtri"> </span><span class="menus_header__OXEok">[Space/Enter] Toggle/enter [?] Help [/] Search</span></span><span class="code-line"><span class="menus_header__OXEok">[Q] Quit (prompts for save) [ESC] Leave menu</span></span></code></pre><h4 id="klipper-firmware-configuration-6">Klipper Firmware Configuration</h4><h5 id="usb-9">USB</h5><pre class="language-sh"><code class="language-sh code-highlight"><span class="code-line"><span class="token builtin class-name">cd</span> ~/klipper/
</span><span class="code-line"><span class="token function">make</span> clean
</span><span class="code-line"><span class="token function">make</span> menuconfig <span class="token assign-left variable">KCONFIG_CONFIG</span><span class="token operator">=</span>config.ebb42_1.1_klipper
</span><span class="code-line"><span class="token function">cp</span> config.ebb42_1.1_klipper <span class="token punctuation">..</span>/printer_data/config/Firmware/
</span><span class="code-line"><span class="token function">make</span> <span class="token assign-left variable">KCONFIG_CONFIG</span><span class="token operator">=</span>config.ebb42_1.1_klipper <span class="token parameter variable">-j4</span>
</span><span class="code-line"><span class="token function">make</span> <span class="token assign-left variable">KCONFIG_CONFIG</span><span class="token operator">=</span>config.ebb42_1.1_klipper flash <span class="token assign-left variable">FLASH_DEVICE</span><span class="token operator">=</span>/dev/serial/by-id/usb-katapult_stm32g0b1xx_42004D001650415833323520-if00
</span></code></pre><pre class="bg-dark mb-3 p-4 rounded text-light"><code class="code-highlight"><span class="code-line"><span class="menus_header__OXEok">(Top)</span></span><span class="code-line"><span class="menus_banner__Yjtri">Klipper Firmware Configuration</span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">[*] Enable extra low-level configuration options</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">    Micro-controller Architecture (STMicroelectronics STM32)  ---&gt;</span></span></span><span class="code-line"><span class="menus_background__qukJD">    Processor model (STM32G0B1)  ---&gt;<span class="menus_menu__6EDS9"> </span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">    Bootloader offset (8KiB bootloader)  ---&gt;</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">    Clock Reference (8 MHz crystal)  ---&gt;</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">    Communication interface (USB (on PA11/PA12))  ---&gt;</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">    USB ids  ---&gt;</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">[*] Optimize stepper code for &#x27;step on both edges&#x27;</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">() GPIO pins to set at micro-controller startup</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9"> </span></span><span class="menus_banner__Yjtri"> </span><span class="menus_header__OXEok">[Space/Enter] Toggle/enter [?] Help [/] Search</span></span><span class="code-line"><span class="menus_header__OXEok">[Q] Quit (prompts for save) [ESC] Leave menu</span></span></code></pre><h3 id="klipper-expander">Klipper Expander</h3><p>Get the most up to date info on the <a href="https://github.com/VoronDesign/Voron-Hardware/blob/master/Klipper_Expander/Documentation/Setup_and_Flashing_Guide.md" rel="noopener noreferrer" target="_blank">official page</a>.</p><p>This board is used to control fans on the <a href="/projects/printer-voron-1.8">Voron 1.8</a>.</p><h4 id="klipper-firmware-configuration-7">Klipper Firmware Configuration</h4><h5 id="usb-10">USB</h5><pre class="language-sh"><code class="language-sh code-highlight"><span class="code-line"><span class="token builtin class-name">cd</span> ~/klipper/
</span><span class="code-line"><span class="token function">make</span> clean
</span><span class="code-line"><span class="token function">make</span> menuconfig <span class="token assign-left variable">KCONFIG_CONFIG</span><span class="token operator">=</span>config.klipper_expander
</span></code></pre><p>Set the following configuration:</p><pre class="bg-dark mb-3 p-4 rounded text-light"><code class="code-highlight"><span class="code-line"><span class="menus_header__OXEok">(Top)</span></span><span class="code-line"><span class="menus_banner__Yjtri">Klipper Firmware Configuration</span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">[*] Enable extra low-level configuration options</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">    Micro-controller Architecture (STMicroelectronics STM32)  ---&gt;</span></span></span><span class="code-line"><span class="menus_background__qukJD">    Processor model (STM32F042)  ---&gt;<span class="menus_menu__6EDS9"> </span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">    Bootloader offset (No bootloader)  ---&gt;</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">    Clock Reference (Internal clock)  ---&gt;</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">    Communication interface (USB (on PA9/PA10))  ---&gt;</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">    USB ids  ---&gt;</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">    Optional features (to reduce code size)  ---&gt;</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">[*] Optimize stepper code for &#x27;step on both edges&#x27;</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">() GPIO pins to set at micro-controller startup</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9"> </span></span><span class="menus_banner__Yjtri"> </span><span class="menus_header__OXEok">[Space/Enter] Toggle/enter [?] Help [/] Search</span></span><span class="code-line"><span class="menus_header__OXEok">[Q] Quit (prompts for save) [ESC] Leave menu</span></span></code></pre><p>As the firmware is too large to fit in the supplied flash, we also need to disable some features:</p><pre class="bg-dark mb-3 p-4 rounded text-light"><code class="code-highlight"><span class="code-line"><span class="menus_header__OXEok">(Top) → Optional features (to reduce code size)</span></span><span class="code-line"><span class="menus_banner__Yjtri">Klipper Firmware Configuration</span></span><span class="code-line"><span class="menus_background__qukJD">[*] Support micro-controller based ADC (analog to digital)<span class="menus_menu__6EDS9"> </span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">[*] Support communicating with external chips via SPI bus</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">[*]     Support software based SPI &quot;bit-banging&quot;</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">[*] Support communicating with external chips via I2C bus</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">[*]     Support software based I2C &quot;bit-banging&quot;</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">[*] Support GPIO based button reading</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">[ ] Support Trinamic stepper motor driver UART communication</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">[*] Support &#x27;neopixel&#x27; type LED control</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">[*] Support measuring fan tachometer GPIO pins</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">    *** LCD chips ***</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">[*] Support ST7920 LCD display</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">[*] Support HD44780 LCD display</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">    *** Accelerometer chips ***</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">[*] Support adxl accelerometers</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">[*] Support lis2dw and lis3dh 3-axis accelerometers</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">[*] Support MPU accelerometers</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">[*] Support ICM20948 accelerometer</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">    *** External ADC type chips ***</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">[*] Support thermocouple MAX sensors</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">[*] Support HX711 and HX717 ADC chips</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">[*] Support ADS 1220 ADC chip</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">    *** Other external sensor chips ***</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">[ ] Support ldc1612 eddy current sensor</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">[ ] Support angle sensors</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9"> </span></span><span class="menus_banner__Yjtri"> </span><span class="menus_header__OXEok">[Space/Enter] Toggle/enter [?] Help [/] Search</span></span><span class="code-line"><span class="menus_header__OXEok">[Q] Quit (prompts for save) [ESC] Leave menu</span></span></code></pre><p>Install the boot jumper and reset the board to put the board into DFU mode.</p><p>Backup config, Build and Flash to the board:</p><pre class="language-sh"><code class="language-sh code-highlight"><span class="code-line"><span class="token function">cp</span> config.klipper_expander <span class="token punctuation">..</span>/printer_data/config/Firmware/
</span><span class="code-line"><span class="token function">make</span> <span class="token assign-left variable">KCONFIG_CONFIG</span><span class="token operator">=</span>config.klipper_expander <span class="token parameter variable">-j4</span>
</span><span class="code-line"><span class="token function">make</span> <span class="token assign-left variable">KCONFIG_CONFIG</span><span class="token operator">=</span>config.klipper_expander flash <span class="token assign-left variable">FLASH_DEVICE</span><span class="token operator">=</span>0483:df11
</span></code></pre><h3 id="mmb-can-v10">MMB CAN V1.0</h3><p>Get the most up to date info on the <a href="https://github.com/bigtreetech/MMB" rel="noopener noreferrer" target="_blank">official page</a>.</p><p>This board will be used for the <a href="/projects/enraged-rabbit-carrot-feeder-2.0">8 channel Enraged Rabbit Carrot Feeder V2.0</a>.</p><h4 id="katapult-configuration-3">Katapult Configuration</h4><h5 id="can-bus-2">CAN Bus</h5><pre class="language-sh"><code class="language-sh code-highlight"><span class="code-line"><span class="token builtin class-name">cd</span> ~/katapult/
</span><span class="code-line"><span class="token function">make</span> clean
</span><span class="code-line"><span class="token function">make</span> menuconfig <span class="token assign-left variable">KCONFIG_CONFIG</span><span class="token operator">=</span>config.mmb_can_1.0_can_katapult
</span><span class="code-line"><span class="token function">cp</span> config.mmb_can_1.0_can_katapult <span class="token punctuation">..</span>/printer_data/config/Firmware/
</span><span class="code-line"><span class="token function">make</span> <span class="token assign-left variable">KCONFIG_CONFIG</span><span class="token operator">=</span>config.mmb_can_1.0_can_katapult <span class="token parameter variable">-j4</span>
</span></code></pre><pre class="bg-dark mb-3 p-4 rounded text-light"><code class="code-highlight"><span class="code-line"><span class="menus_header__OXEok">(Top)</span></span><span class="code-line"><span class="menus_banner__Yjtri">Katapult Configuration</span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">    Micro-controller Architecture (STMicroelectronics STM32)  ---&gt;</span></span></span><span class="code-line"><span class="menus_background__qukJD">    Processor model (STM32G0B1)  ---&gt;<span class="menus_menu__6EDS9"> </span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">    Build Katapult deployment application (Do not build)  ---&gt;</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">    Clock Reference (8 MHz crystal)  ---&gt;</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">    Communication interface (CAN bus (on PB0/PB1))  ---&gt;</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">    Application start offset (8KiB offset)  ---&gt;</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">(1000000) CAN bus speed</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">() GPIO pins to set on bootloader entry</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">[*] Support bootloader entry on rapid double click of reset button</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">[ ] Enable bootloader entry on button (or gpio) state</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">[ ] Enable Status LED</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9"> </span></span><span class="menus_banner__Yjtri"> </span><span class="menus_header__OXEok">[Space/Enter] Toggle/enter [?] Help [/] Search</span></span><span class="code-line"><span class="menus_header__OXEok">[Q] Quit (prompts for save) [ESC] Leave menu</span></span></code></pre><h5 id="usb-11">USB</h5><pre class="language-sh"><code class="language-sh code-highlight"><span class="code-line"><span class="token builtin class-name">cd</span> ~/katapult/
</span><span class="code-line"><span class="token function">make</span> clean
</span><span class="code-line"><span class="token function">make</span> menuconfig <span class="token assign-left variable">KCONFIG_CONFIG</span><span class="token operator">=</span>config.mmb_can_1.0_katapult
</span><span class="code-line"><span class="token function">cp</span> config.mmb_can_1.0_katapult <span class="token punctuation">..</span>/printer_data/config/Firmware/
</span><span class="code-line"><span class="token function">make</span> <span class="token assign-left variable">KCONFIG_CONFIG</span><span class="token operator">=</span>config.mmb_can_1.0_katapult <span class="token parameter variable">-j4</span>
</span></code></pre><pre class="bg-dark mb-3 p-4 rounded text-light"><code class="code-highlight"><span class="code-line"><span class="menus_header__OXEok">(Top)</span></span><span class="code-line"><span class="menus_banner__Yjtri">Katapult Configuration</span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">    Micro-controller Architecture (STMicroelectronics STM32)  ---&gt;</span></span></span><span class="code-line"><span class="menus_background__qukJD">    Processor model (STM32G0B1)  ---&gt;<span class="menus_menu__6EDS9"> </span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">    Build Katapult deployment application (Do not build)  ---&gt;</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">    Clock Reference (8 MHz crystal)  ---&gt;</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">    Communication interface (USB (on PA11/PA12))  ---&gt;</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">    Application start offset (8KiB offset)  ---&gt;</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">    USB ids  ---&gt;</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">() GPIO pins to set on bootloader entry</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">[*] Support bootloader entry on rapid double click of reset button</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">[ ] Enable bootloader entry on button (or gpio) state</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">[ ] Enable Status LED</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9"> </span></span><span class="menus_banner__Yjtri"> </span><span class="menus_header__OXEok">[Space/Enter] Toggle/enter [?] Help [/] Search</span></span><span class="code-line"><span class="menus_header__OXEok">[Q] Quit (prompts for save) [ESC] Leave menu</span></span></code></pre><h4 id="klipper-firmware-configuration-8">Klipper Firmware Configuration</h4><h5 id="can-bus-3">CAN Bus</h5><pre class="language-sh"><code class="language-sh code-highlight"><span class="code-line"><span class="token builtin class-name">cd</span> ~/klipper/
</span><span class="code-line"><span class="token function">make</span> clean
</span><span class="code-line"><span class="token function">make</span> menuconfig <span class="token assign-left variable">KCONFIG_CONFIG</span><span class="token operator">=</span>config.mmb_can_1.0_can_klipper
</span><span class="code-line"><span class="token function">cp</span> config.mmb_can_1.0_can_klipper <span class="token punctuation">..</span>/printer_data/config/Firmware/
</span><span class="code-line"><span class="token function">make</span> <span class="token assign-left variable">KCONFIG_CONFIG</span><span class="token operator">=</span>config.mmb_can_1.0_can_klipper <span class="token parameter variable">-j4</span>
</span></code></pre><pre class="bg-dark mb-3 p-4 rounded text-light"><code class="code-highlight"><span class="code-line"><span class="menus_header__OXEok">(Top)</span></span><span class="code-line"><span class="menus_banner__Yjtri">Klipper Firmware Configuration</span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">[*] Enable extra low-level configuration options</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">    Micro-controller Architecture (STMicroelectronics STM32)  ---&gt;</span></span></span><span class="code-line"><span class="menus_background__qukJD">    Processor model (STM32G0B1)  ---&gt;<span class="menus_menu__6EDS9"> </span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">    Bootloader offset (8KiB bootloader)  ---&gt;</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">    Clock Reference (8 MHz crystal)  ---&gt;</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">    Communication interface (CAN bus (on PB0/PB1))  ---&gt;</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">(1000000) CAN bus speed</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">[*] Optimize stepper code for &#x27;step on both edges&#x27;</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">() GPIO pins to set at micro-controller startup</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9"> </span></span><span class="menus_banner__Yjtri"> </span><span class="menus_header__OXEok">[Space/Enter] Toggle/enter [?] Help [/] Search</span></span><span class="code-line"><span class="menus_header__OXEok">[Q] Quit (prompts for save) [ESC] Leave menu</span></span></code></pre><h5 id="usb-12">USB</h5><pre class="language-sh"><code class="language-sh code-highlight"><span class="code-line"><span class="token builtin class-name">cd</span> ~/klipper/
</span><span class="code-line"><span class="token function">make</span> clean
</span><span class="code-line"><span class="token function">make</span> menuconfig <span class="token assign-left variable">KCONFIG_CONFIG</span><span class="token operator">=</span>config.mmb_can_1.0_klipper
</span><span class="code-line"><span class="token function">cp</span> config.mmb_can_1.0_klipper <span class="token punctuation">..</span>/printer_data/config/Firmware/
</span><span class="code-line"><span class="token function">make</span> <span class="token assign-left variable">KCONFIG_CONFIG</span><span class="token operator">=</span>config.mmb_can_1.0_klipper <span class="token parameter variable">-j4</span>
</span></code></pre><pre class="bg-dark mb-3 p-4 rounded text-light"><code class="code-highlight"><span class="code-line"><span class="menus_header__OXEok">(Top)</span></span><span class="code-line"><span class="menus_banner__Yjtri">Klipper Firmware Configuration</span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">[*] Enable extra low-level configuration options</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">    Micro-controller Architecture (STMicroelectronics STM32)  ---&gt;</span></span></span><span class="code-line"><span class="menus_background__qukJD">    Processor model (STM32G0B1)  ---&gt;<span class="menus_menu__6EDS9"> </span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">    Bootloader offset (8KiB bootloader)  ---&gt;</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">    Clock Reference (8 MHz crystal)  ---&gt;</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">    Communication interface (USB (on PA11/PA12))  ---&gt;</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">    USB ids  ---&gt;</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">[*] Optimize stepper code for &#x27;step on both edges&#x27;</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">() GPIO pins to set at micro-controller startup</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9"> </span></span><span class="menus_banner__Yjtri"> </span><span class="menus_header__OXEok">[Space/Enter] Toggle/enter [?] Help [/] Search</span></span><span class="code-line"><span class="menus_header__OXEok">[Q] Quit (prompts for save) [ESC] Leave menu</span></span></code></pre><h3 id="picobilical">Picobilical</h3><p>Get the most up to date info on the <a href="https://github.com/MotorDynamicsLab/LDO-Picobilical" rel="noopener noreferrer" target="_blank">official page</a>.</p><p>This board will be used for the <a href="/projects/printer-voron-0.2">Voron 0.2</a>.</p><h4 id="klipper-firmware-configuration-9">Klipper Firmware Configuration</h4><h5 id="usb-13">USB</h5><pre class="language-sh"><code class="language-sh code-highlight"><span class="code-line"><span class="token builtin class-name">cd</span> ~/klipper/
</span><span class="code-line"><span class="token function">make</span> clean
</span><span class="code-line"><span class="token function">make</span> menuconfig <span class="token assign-left variable">KCONFIG_CONFIG</span><span class="token operator">=</span>config.picobilical
</span><span class="code-line"><span class="token function">cp</span> config.picobilical <span class="token punctuation">..</span>/printer_data/config/Firmware/
</span><span class="code-line"><span class="token function">make</span> <span class="token assign-left variable">KCONFIG_CONFIG</span><span class="token operator">=</span>config.picobilical <span class="token parameter variable">-j4</span>
</span></code></pre><pre class="bg-dark mb-3 p-4 rounded text-light"><code class="code-highlight"><span class="code-line"><span class="menus_header__OXEok">(Top)</span></span><span class="code-line"><span class="menus_banner__Yjtri">Klipper Firmware Configuration</span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">[ ] Enable extra low-level configuration options</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">    Micro-controller Architecture (Raspberry Pi RP2040/RP235x)  ---&gt;</span></span></span><span class="code-line"><span class="menus_background__qukJD">    Processor model (rp2040)  ---&gt;<span class="menus_menu__6EDS9"> </span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">    Bootloader offset (No bootloader)  ---&gt;</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">    Communication Interface (USBSERIAL)  ---&gt;</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9"> </span></span><span class="menus_banner__Yjtri"> </span><span class="menus_header__OXEok">[Space/Enter] Toggle/enter [?] Help [/] Search</span></span><span class="code-line"><span class="menus_header__OXEok">[Q] Quit (prompts for save) [ESC] Leave menu</span></span></code></pre><h3 id="pitb-v10">PITB V1.0</h3><p>Get the most up to date info on the <a href="https://github.com/kageurufu/PITB/tree/main/firmware" rel="noopener noreferrer" target="_blank">official page</a>.</p><p>This board will be used for the A/B Motors on the <a href="/projects/printer-voron-2.4">Voron 2.4</a> when I upgrade to CAN.</p><h4 id="katapult-configuration-4">Katapult Configuration</h4><h5 id="can-bus-4">CAN Bus</h5><pre class="language-sh"><code class="language-sh code-highlight"><span class="code-line"><span class="token builtin class-name">cd</span> ~/katapult/
</span><span class="code-line"><span class="token function">make</span> clean
</span><span class="code-line"><span class="token function">make</span> menuconfig <span class="token assign-left variable">KCONFIG_CONFIG</span><span class="token operator">=</span>config.pitb_can_katapult
</span><span class="code-line"><span class="token function">cp</span> config.pitb_can_katapult <span class="token punctuation">..</span>/printer_data/config/Firmware/
</span><span class="code-line"><span class="token function">make</span> <span class="token assign-left variable">KCONFIG_CONFIG</span><span class="token operator">=</span>config.pitb_can_katapult <span class="token parameter variable">-j4</span>
</span></code></pre><pre class="bg-dark mb-3 p-4 rounded text-light"><code class="code-highlight"><span class="code-line"><span class="menus_header__OXEok">(Top)</span></span><span class="code-line"><span class="menus_banner__Yjtri">Katapult Configuration</span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">    Micro-controller Architecture (Raspberry Pi RP2040/RP235x)  ---&gt;</span></span></span><span class="code-line"><span class="menus_background__qukJD">    Processor model (rp2040)  ---&gt;<span class="menus_menu__6EDS9"> </span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">    Flash chip (W25Q080 with CLKDIV 2)  ---&gt;</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">    Build Katapult deployment application (Do not build)  ---&gt;</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">    Communication Interface (CAN bus)  ---&gt;</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">(14) CAN RX gpio number</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">(13) CAN TX gpio number</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">(1000000) CAN bus speed</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">() GPIO pins to set on bootloader entry</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">[*] Support bootloader entry on rapid double click of reset button</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">[ ] Enable bootloader entry on button (or gpio) state</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">[*] Enable Status LED</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">(gpio15) Status LED GPIO Pin</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9"> </span></span><span class="menus_banner__Yjtri"> </span><span class="menus_header__OXEok">[Space/Enter] Toggle/enter [?] Help [/] Search</span></span><span class="code-line"><span class="menus_header__OXEok">[Q] Quit (prompts for save) [ESC] Leave menu</span></span></code></pre><h4 id="klipper-firmware-configuration-10">Klipper Firmware Configuration</h4><h5 id="can-bus-5">CAN Bus</h5><pre class="language-sh"><code class="language-sh code-highlight"><span class="code-line"><span class="token builtin class-name">cd</span> ~/klipper/
</span><span class="code-line"><span class="token function">make</span> clean
</span><span class="code-line"><span class="token function">make</span> menuconfig <span class="token assign-left variable">KCONFIG_CONFIG</span><span class="token operator">=</span>config.pitb_can_klipper
</span><span class="code-line"><span class="token function">cp</span> config.pitb_can_klipper <span class="token punctuation">..</span>/printer_data/config/Firmware/
</span><span class="code-line"><span class="token function">make</span> <span class="token assign-left variable">KCONFIG_CONFIG</span><span class="token operator">=</span>config.pitb_can_klipper <span class="token parameter variable">-j4</span>
</span></code></pre><pre class="bg-dark mb-3 p-4 rounded text-light"><code class="code-highlight"><span class="code-line"><span class="menus_header__OXEok">(Top)</span></span><span class="code-line"><span class="menus_banner__Yjtri">Klipper Firmware Configuration</span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">[*] Enable extra low-level configuration options</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">    Micro-controller Architecture (Raspberry Pi RP2040/RP235x)  ---&gt;</span></span></span><span class="code-line"><span class="menus_background__qukJD">    Processor model (rp2040)  ---&gt;<span class="menus_menu__6EDS9"> </span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">    Bootloader offset (16KiB bootloader)  ---&gt;</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">    Communication Interface (CAN bus)  ---&gt;</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">(14) CAN RX gpio number</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">(13) CAN TX gpio number</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">(1000000) CAN bus speed</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">[*] Optimize stepper code for &#x27;step on both edges&#x27;</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">() GPIO pins to set at micro-controller startup</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9"> </span></span><span class="menus_banner__Yjtri"> </span><span class="menus_header__OXEok">[Space/Enter] Toggle/enter [?] Help [/] Search</span></span><span class="code-line"><span class="menus_header__OXEok">[Q] Quit (prompts for save) [ESC] Leave menu</span></span></code></pre><h5 id="usb-14">USB</h5><pre class="language-sh"><code class="language-sh code-highlight"><span class="code-line"><span class="token builtin class-name">cd</span> ~/klipper/
</span><span class="code-line"><span class="token function">make</span> clean
</span><span class="code-line"><span class="token function">make</span> menuconfig <span class="token assign-left variable">KCONFIG_CONFIG</span><span class="token operator">=</span>config.pitb_klipper
</span><span class="code-line"><span class="token function">cp</span> config.pitb_klipper <span class="token punctuation">..</span>/printer_data/config/Firmware/
</span><span class="code-line"><span class="token function">make</span> <span class="token assign-left variable">KCONFIG_CONFIG</span><span class="token operator">=</span>config.pitb_klipper <span class="token parameter variable">-j4</span>
</span></code></pre><pre class="bg-dark mb-3 p-4 rounded text-light"><code class="code-highlight"><span class="code-line"><span class="menus_header__OXEok">(Top)</span></span><span class="code-line"><span class="menus_banner__Yjtri">Klipper Firmware Configuration</span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">[*] Enable extra low-level configuration options</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">    Micro-controller Architecture (Raspberry Pi RP2040/RP235x)  ---&gt;</span></span></span><span class="code-line"><span class="menus_background__qukJD">    Processor model (rp2040)  ---&gt;<span class="menus_menu__6EDS9"> </span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">    Bootloader offset (No bootloader)  ---&gt;</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">    Flash chip (W25Q080 with CLKDIV 2)  ---&gt;</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">    Communication Interface (USBSERIAL)  ---&gt;</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">    USB ids  ---&gt;</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">[*] Optimize stepper code for &#x27;step on both edges&#x27;</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">() GPIO pins to set at micro-controller startup</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9"> </span></span><span class="menus_banner__Yjtri"> </span><span class="menus_header__OXEok">[Space/Enter] Toggle/enter [?] Help [/] Search</span></span><span class="code-line"><span class="menus_header__OXEok">[Q] Quit (prompts for save) [ESC] Leave menu</span></span></code></pre><h5 id="flash">Flash</h5><p>Hold the <code>Boot</code> boot button whilst connecting the MCU to the Raspberry Pi and run:</p><pre class="language-sh"><code class="language-sh code-highlight"><span class="code-line"><span class="token function">sudo</span> <span class="token function">mount</span> /dev/sda1 /mnt
</span><span class="code-line"><span class="token function">sudo</span> <span class="token function">cp</span> out/klipper.uf2 /mnt
</span><span class="code-line"><span class="token function">sudo</span> <span class="token function">umount</span> /mnt
</span></code></pre><h3 id="skr-14">SKR 1.4</h3><p>Get the most up to date info on the <a href="https://github.com/bigtreetech/BIGTREETECH-SKR-V1.3/tree/master/BTT%20SKR%20V1.4" rel="noopener noreferrer" target="_blank">official page</a>.</p><p>There is also some useful information in the <a href="https://docs.vorondesign.com/build/software/skr13_klipper.html" rel="noopener noreferrer" target="_blank">Voron Design Documentation</a>.</p><p>This board is currently using <a href="https://marlinfw.org/" rel="noopener noreferrer" target="_blank">Marlin Firmware</a> on my <a href="/projects/printer-hardware-upgrades">Anet A8</a>, but will be flashed with klipper when upgrading to the <a href="/projects/printer-am8">AM8</a>.</p><h4 id="klipper-firmware-configuration-11">Klipper Firmware Configuration</h4><h5 id="serial">Serial</h5><pre class="language-sh"><code class="language-sh code-highlight"><span class="code-line"><span class="token builtin class-name">cd</span> ~/klipper/
</span><span class="code-line"><span class="token function">make</span> clean
</span><span class="code-line"><span class="token function">make</span> menuconfig <span class="token assign-left variable">KCONFIG_CONFIG</span><span class="token operator">=</span>config.skr_1.4_serial
</span></code></pre><p>Set the following configuration:</p><pre class="bg-dark mb-3 p-4 rounded text-light"><code class="code-highlight"><span class="code-line"><span class="menus_header__OXEok">(Top)</span></span><span class="code-line"><span class="menus_banner__Yjtri">Klipper Firmware Configuration</span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">[ ] Enable extra low-level configuration options</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">    Micro-controller Architecture (LPC176x)  ---&gt;</span></span></span><span class="code-line"><span class="menus_background__qukJD">    Processor model (lpc1768 (100 MHz))  ---&gt;<span class="menus_menu__6EDS9"> </span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">    Bootloader offset (16KiB bootloader)  ---&gt;</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">    Communication interface (Serial (on UART0 P0.3/P0.2))  ---&gt;</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9"> </span></span><span class="menus_banner__Yjtri"> </span><span class="menus_header__OXEok">[Space/Enter] Toggle/enter [?] Help [/] Search</span></span><span class="code-line"><span class="menus_header__OXEok">[Q] Quit (prompts for save) [ESC] Leave menu</span></span></code></pre><p>Backup config and Build:</p><pre class="language-sh"><code class="language-sh code-highlight"><span class="code-line"><span class="token function">cp</span> config.skr_1.4_serial <span class="token punctuation">..</span>/printer_data/config/Firmware/
</span><span class="code-line"><span class="token function">make</span> <span class="token assign-left variable">KCONFIG_CONFIG</span><span class="token operator">=</span>config.skr_1.4_serial <span class="token parameter variable">-j4</span>
</span></code></pre><h5 id="usb-15">USB</h5><pre class="language-sh"><code class="language-sh code-highlight"><span class="code-line"><span class="token builtin class-name">cd</span> ~/klipper/
</span><span class="code-line"><span class="token function">make</span> clean
</span><span class="code-line"><span class="token function">make</span> menuconfig <span class="token assign-left variable">KCONFIG_CONFIG</span><span class="token operator">=</span>config.skr_1.4_usb
</span></code></pre><p>Set the following configuration:</p><pre class="bg-dark mb-3 p-4 rounded text-light"><code class="code-highlight"><span class="code-line"><span class="menus_header__OXEok">(Top)</span></span><span class="code-line"><span class="menus_banner__Yjtri">Klipper Firmware Configuration</span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">[ ] Enable extra low-level configuration options</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">    Micro-controller Architecture (LPC176x)  ---&gt;</span></span></span><span class="code-line"><span class="menus_background__qukJD">    Processor model (lpc1768 (100 MHz))  ---&gt;<span class="menus_menu__6EDS9"> </span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">    Bootloader offset (16KiB bootloader)  ---&gt;</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">    Communication interface (USB)  ---&gt;</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9"> </span></span><span class="menus_banner__Yjtri"> </span><span class="menus_header__OXEok">[Space/Enter] Toggle/enter [?] Help [/] Search</span></span><span class="code-line"><span class="menus_header__OXEok">[Q] Quit (prompts for save) [ESC] Leave menu</span></span></code></pre><p>Backup config and Build:</p><pre class="language-sh"><code class="language-sh code-highlight"><span class="code-line"><span class="token function">cp</span> config.skr_1.4_usb <span class="token punctuation">..</span>/printer_data/config/Firmware/
</span><span class="code-line"><span class="token function">make</span> <span class="token assign-left variable">KCONFIG_CONFIG</span><span class="token operator">=</span>config.skr_1.4_usb <span class="token parameter variable">-j4</span>
</span></code></pre><h5 id="flash-1">Flash</h5><p>For the initial flash we need to copy the file to a micro sd card. The easiest way to do this is to copy <code>out/klipper.bin</code> to the klipper config directory:</p><pre class="language-sh"><code class="language-sh code-highlight"><span class="code-line"><span class="token function">cp</span> out/klipper.bin <span class="token punctuation">..</span>/printer_data/config/
</span></code></pre><p>You can then:</p><ol><li>Download it to your local machine from the Mainsail web interface.</li><li>Copy the <code>klipper.bin</code> file to the root of the Micro SD card.</li><li>Rename <code>klipper.bin</code> to <code>firmware.bin</code>.</li><li>Eject the Micro SD card from the PC.</li><li>Disconnect the power to the MCU.</li><li>Insert the Micro SD card into the slot on the MCU.</li><li>Power on the MCU.</li><li>Check the firmware has flashed, file on the SD card will change to <code>firmware.cur</code>, if succesful.</li></ol><div class="markdown-alert markdown-alert-important"><p class="markdown-alert-title"><svg class="octicon octicon-report mr-2" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M0 1.75C0 .784.784 0 1.75 0h12.5C15.216 0 16 .784 16 1.75v9.5A1.75 1.75 0 0 1 14.25 13H8.06l-2.573 2.573A1.458 1.458 0 0 1 3 14.543V13H1.75A1.75 1.75 0 0 1 0 11.25Zm1.75-.25a.25.25 0 0 0-.25.25v9.5c0 .138.112.25.25.25h2a.75.75 0 0 1 .75.75v2.19l2.72-2.72a.749.749 0 0 1 .53-.22h6.5a.25.25 0 0 0 .25-.25v-9.5a.25.25 0 0 0-.25-.25Zm7 2.25v2.5a.75.75 0 0 1-1.5 0v-2.5a.75.75 0 0 1 1.5 0ZM9 9a1 1 0 1 1-2 0 1 1 0 0 1 2 0Z"></path></svg>Important</p><p>If the file is not named <code>firmware.bin</code>, the firmware will not be updated.</p></div><p>Subsequent flashes can then be done by using the following commands:</p><pre class="language-sh"><code class="language-sh code-highlight"><span class="code-line"><span class="token function">sudo</span> <span class="token function">service</span> klipper stop
</span><span class="code-line">~/klipper/scripts/flash-sdcard.sh /dev/serial/by-id/usb-Klipper_lpc1769_1C10011425813AAFCED76B5CC22000F5-if00 btt-skr-v1.3
</span><span class="code-line"><span class="token function">sudo</span> <span class="token function">service</span> klipper start
</span></code></pre><h3 id="skr-14-turbo">SKR 1.4 Turbo</h3><p>Get the most up to date info on the <a href="https://github.com/bigtreetech/BIGTREETECH-SKR-V1.3/tree/master/BTT%20SKR%20V1.4" rel="noopener noreferrer" target="_blank">official page</a>.</p><p>There is also some useful information in the <a href="https://docs.vorondesign.com/build/software/skr13_klipper.html" rel="noopener noreferrer" target="_blank">Voron Design Documentation</a>.</p><p>This board is being used by the <a href="/projects/printer-voron-1.8">Voron 1.8</a>.</p><h4 id="klipper-firmware-configuration-12">Klipper Firmware Configuration</h4><h5 id="serial-1">Serial</h5><pre class="language-sh"><code class="language-sh code-highlight"><span class="code-line"><span class="token builtin class-name">cd</span> ~/klipper/
</span><span class="code-line"><span class="token function">make</span> clean
</span><span class="code-line"><span class="token function">make</span> menuconfig <span class="token assign-left variable">KCONFIG_CONFIG</span><span class="token operator">=</span>config.skr_1.4_turbo_serial
</span></code></pre><p>Set the following configuration:</p><pre class="bg-dark mb-3 p-4 rounded text-light"><code class="code-highlight"><span class="code-line"><span class="menus_header__OXEok">(Top)</span></span><span class="code-line"><span class="menus_banner__Yjtri">Klipper Firmware Configuration</span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">[ ] Enable extra low-level configuration options</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">    Micro-controller Architecture (LPC176x)  ---&gt;</span></span></span><span class="code-line"><span class="menus_background__qukJD">    Processor model (lpc1769 (120 MHz))  ---&gt;<span class="menus_menu__6EDS9"> </span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">    Bootloader offset (16KiB bootloader)  ---&gt;</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">    Communication interface (Serial (on UART0 P0.3/P0.2))  ---&gt;</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9"> </span></span><span class="menus_banner__Yjtri"> </span><span class="menus_header__OXEok">[Space/Enter] Toggle/enter [?] Help [/] Search</span></span><span class="code-line"><span class="menus_header__OXEok">[Q] Quit (prompts for save) [ESC] Leave menu</span></span></code></pre><p>Backup config and Build:</p><pre class="language-sh"><code class="language-sh code-highlight"><span class="code-line"><span class="token function">cp</span> config.skr_1.4_turbo_serial <span class="token punctuation">..</span>/printer_data/config/Firmware/
</span><span class="code-line"><span class="token function">make</span> <span class="token assign-left variable">KCONFIG_CONFIG</span><span class="token operator">=</span>config.skr_1.4_turbo_serial <span class="token parameter variable">-j4</span>
</span></code></pre><h5 id="usb-16">USB</h5><pre class="language-sh"><code class="language-sh code-highlight"><span class="code-line"><span class="token builtin class-name">cd</span> ~/klipper/
</span><span class="code-line"><span class="token function">make</span> clean
</span><span class="code-line"><span class="token function">make</span> menuconfig <span class="token assign-left variable">KCONFIG_CONFIG</span><span class="token operator">=</span>config.skr_1.4_turbo_usb
</span></code></pre><p>Set the following configuration:</p><pre class="bg-dark mb-3 p-4 rounded text-light"><code class="code-highlight"><span class="code-line"><span class="menus_header__OXEok">(Top)</span></span><span class="code-line"><span class="menus_banner__Yjtri">Klipper Firmware Configuration</span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">[ ] Enable extra low-level configuration options</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">    Micro-controller Architecture (LPC176x)  ---&gt;</span></span></span><span class="code-line"><span class="menus_background__qukJD">    Processor model (lpc1769 (120 MHz))  ---&gt;<span class="menus_menu__6EDS9"> </span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">    Bootloader offset (16KiB bootloader)  ---&gt;</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">    Communication interface (USB)  ---&gt;</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9"> </span></span><span class="menus_banner__Yjtri"> </span><span class="menus_header__OXEok">[Space/Enter] Toggle/enter [?] Help [/] Search</span></span><span class="code-line"><span class="menus_header__OXEok">[Q] Quit (prompts for save) [ESC] Leave menu</span></span></code></pre><p>Backup config and Build:</p><pre class="language-sh"><code class="language-sh code-highlight"><span class="code-line"><span class="token function">cp</span> config.skr_1.4_turbo_usb <span class="token punctuation">..</span>/printer_data/config/Firmware/
</span><span class="code-line"><span class="token function">make</span> <span class="token assign-left variable">KCONFIG_CONFIG</span><span class="token operator">=</span>config.skr_1.4_turbo_usb <span class="token parameter variable">-j4</span>
</span></code></pre><h5 id="flash-2">Flash</h5><p>For the initial flash we need to copy the file to a micro sd card. The easiest way to do this is to copy <code>out/klipper.bin</code> to the klipper config directory:</p><pre class="language-sh"><code class="language-sh code-highlight"><span class="code-line"><span class="token function">cp</span> out/klipper.bin <span class="token punctuation">..</span>/printer_data/config/
</span></code></pre><p>You can then:</p><ol><li>Download it to your local machine from the Mainsail web interface.</li><li>Copy the <code>klipper.bin</code> file to the root of the Micro SD card.</li><li>Rename <code>klipper.bin</code> to <code>firmware.bin</code>.</li><li>Eject the Micro SD card from the PC.</li><li>Disconnect the power to the MCU.</li><li>Insert the Micro SD card into the slot on the MCU.</li><li>Power on the MCU.</li><li>Check the firmware has flashed, file on the SD card will change to <code>firmware.cur</code>, if succesful.</li></ol><div class="markdown-alert markdown-alert-important"><p class="markdown-alert-title"><svg class="octicon octicon-report mr-2" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M0 1.75C0 .784.784 0 1.75 0h12.5C15.216 0 16 .784 16 1.75v9.5A1.75 1.75 0 0 1 14.25 13H8.06l-2.573 2.573A1.458 1.458 0 0 1 3 14.543V13H1.75A1.75 1.75 0 0 1 0 11.25Zm1.75-.25a.25.25 0 0 0-.25.25v9.5c0 .138.112.25.25.25h2a.75.75 0 0 1 .75.75v2.19l2.72-2.72a.749.749 0 0 1 .53-.22h6.5a.25.25 0 0 0 .25-.25v-9.5a.25.25 0 0 0-.25-.25Zm7 2.25v2.5a.75.75 0 0 1-1.5 0v-2.5a.75.75 0 0 1 1.5 0ZM9 9a1 1 0 1 1-2 0 1 1 0 0 1 2 0Z"></path></svg>Important</p><p>If the file is not named <code>firmware.bin</code>, the firmware will not be updated.</p></div><p>Subsequent flashes can then be done by using the following commands:</p><pre class="language-sh"><code class="language-sh code-highlight"><span class="code-line"><span class="token function">sudo</span> <span class="token function">service</span> klipper stop
</span><span class="code-line">~/klipper/scripts/flash-sdcard.sh /dev/serial/by-id/usb-Klipper_lpc1769_1C10011425813AAFCED76B5CC22000F5-if00 btt-skr-v1.3
</span><span class="code-line"><span class="token function">sudo</span> <span class="token function">service</span> klipper start
</span></code></pre><h3 id="skr-mini-e3-v20">SKR Mini E3 V2.0</h3><p>Get the most up to date info on the <a href="https://github.com/bigtreetech/BIGTREETECH-SKR-mini-E3/tree/master/hardware/BTT%20SKR%20MINI%20E3%20V2.0/Hardware" rel="noopener noreferrer" target="_blank">official page</a>.</p><p>There is also some useful information in the <a href="https://docs.vorondesign.com/build/software/miniE3_v20_klipper.html" rel="noopener noreferrer" target="_blank">Voron Design Documentation</a>.</p><p>This board will be used in the <a href="/projects/printer-rook">Rook 2020</a>.</p><h4 id="klipper-firmware-configuration-13">Klipper Firmware Configuration</h4><h5 id="usb-17">USB</h5><pre class="language-sh"><code class="language-sh code-highlight"><span class="code-line"><span class="token builtin class-name">cd</span> ~/klipper/
</span><span class="code-line"><span class="token function">make</span> clean
</span><span class="code-line"><span class="token function">make</span> menuconfig <span class="token assign-left variable">KCONFIG_CONFIG</span><span class="token operator">=</span>config.skr_mini_e3
</span></code></pre><p>Set the following configuration:</p><pre class="bg-dark mb-3 p-4 rounded text-light"><code class="code-highlight"><span class="code-line"><span class="menus_header__OXEok">(Top)</span></span><span class="code-line"><span class="menus_banner__Yjtri">Klipper Firmware Configuration</span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">[*] Enable extra low-level configuration options</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">    Micro-controller Architecture (STMicroelectronics STM32)  ---&gt;</span></span></span><span class="code-line"><span class="menus_background__qukJD">    Processor model (STM32F103)  ---&gt;<span class="menus_menu__6EDS9"> </span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">[ ] Only 10KiB of RAM (for rare stm32f103x6 variant)</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">[ ] Disable SWD at startup (for GigaDevice stm32f103 clones)</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">    Bootloader offset (28KiB bootloader)  ---&gt;</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">    Clock Reference (8 MHz crystal)  ---&gt;</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">    Communication interface (USB (on PA11/PA12))  ---&gt;</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">    USB ids  ---&gt;</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">[*] Optimize stepper code for &#x27;step on both edges&#x27;</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">(!PA14) GPIO pins to set at micro-controller startup</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9"> </span></span><span class="menus_banner__Yjtri"> </span><span class="menus_header__OXEok">[Space/Enter] Toggle/enter [?] Help [/] Search</span></span><span class="code-line"><span class="menus_header__OXEok">[Q] Quit (prompts for save) [ESC] Leave menu</span></span></code></pre><p>Backup config and Build:</p><pre class="language-sh"><code class="language-sh code-highlight"><span class="code-line"><span class="token function">cp</span> config.skr_mini_e3 <span class="token punctuation">..</span>/printer_data/config/Firmware/
</span><span class="code-line"><span class="token function">make</span> <span class="token assign-left variable">KCONFIG_CONFIG</span><span class="token operator">=</span>config.skr_mini_e3 <span class="token parameter variable">-j4</span>
</span></code></pre><p>For the initial flash we need to copy the file to a micro sd card. The easiest way to do this is to copy <code>out/klipper.bin</code> to the klipper config directory:</p><pre class="language-sh"><code class="language-sh code-highlight"><span class="code-line"><span class="token function">cp</span> out/klipper.bin <span class="token punctuation">..</span>/printer_data/config/
</span></code></pre><p>You can then:</p><ol><li>Download it to your local machine from the Mainsail web interface.</li><li>Copy the <code>klipper.bin</code> file to the root of the Micro SD card.</li><li>Rename <code>klipper.bin</code> to <code>firmware.bin</code>.</li><li>Eject the Micro SD card from the PC.</li><li>Disconnect the power to the MCU.</li><li>Insert the Micro SD card into the slot on the MCU.</li><li>Power on the MCU.</li><li>Check the firmware has flashed, file on the SD card will change to <code>firmware.cur</code>, if succesful.</li></ol><div class="markdown-alert markdown-alert-important"><p class="markdown-alert-title"><svg class="octicon octicon-report mr-2" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M0 1.75C0 .784.784 0 1.75 0h12.5C15.216 0 16 .784 16 1.75v9.5A1.75 1.75 0 0 1 14.25 13H8.06l-2.573 2.573A1.458 1.458 0 0 1 3 14.543V13H1.75A1.75 1.75 0 0 1 0 11.25Zm1.75-.25a.25.25 0 0 0-.25.25v9.5c0 .138.112.25.25.25h2a.75.75 0 0 1 .75.75v2.19l2.72-2.72a.749.749 0 0 1 .53-.22h6.5a.25.25 0 0 0 .25-.25v-9.5a.25.25 0 0 0-.25-.25Zm7 2.25v2.5a.75.75 0 0 1-1.5 0v-2.5a.75.75 0 0 1 1.5 0ZM9 9a1 1 0 1 1-2 0 1 1 0 0 1 2 0Z"></path></svg>Important</p><p>If the file is not named <code>firmware.bin</code>, the firmware will not be updated.</p></div><p>Subsequent flashes can then be done by using the following commands:</p><pre class="language-sh"><code class="language-sh code-highlight"><span class="code-line"><span class="token function">sudo</span> <span class="token function">service</span> klipper stop
</span><span class="code-line">~/klipper/scripts/flash-sdcard.sh /dev/serial/by-id/usb-Klipper_stm32f103xe_1C10011425813AAFCED76B5CC22000F5-if00 btt-skr-mini-e3-v2
</span><span class="code-line"><span class="token function">sudo</span> <span class="token function">service</span> klipper start
</span></code></pre><h3 id="skr-pico">SKR Pico</h3><p>Get the most up to date info on the <a href="https://github.com/bigtreetech/SKR-Pico" rel="noopener noreferrer" target="_blank">official page</a>.</p><p>There is also some useful information in the <a href="https://docs.vorondesign.com/build/software/skrPico_klipper.html" rel="noopener noreferrer" target="_blank">Voron Design Documentation</a>.</p><p>This board will be used for the <a href="/projects/printer-voron-0.2">Voron 0.2</a>.</p><h4 id="klipper-firmware-configuration-14">Klipper Firmware Configuration</h4><h5 id="can">CAN</h5><p>You will need a <code>CAN Transceiver Module</code> for this, I used <a href="https://www.aliexpress.com/item/1005002843325046.html" rel="noopener noreferrer" target="_blank">this SN65HVD230 Module</a> connected to the <code>Raspberry Pi Serial Port</code>.</p><pre class="language-sh"><code class="language-sh code-highlight"><span class="code-line"><span class="token builtin class-name">cd</span> ~/klipper/
</span><span class="code-line"><span class="token function">make</span> clean
</span><span class="code-line"><span class="token function">make</span> menuconfig <span class="token assign-left variable">KCONFIG_CONFIG</span><span class="token operator">=</span>config.skr_pico_can
</span></code></pre><p>Set the following configuration:</p><pre class="bg-dark mb-3 p-4 rounded text-light"><code class="code-highlight"><span class="code-line"><span class="menus_header__OXEok">(Top)</span></span><span class="code-line"><span class="menus_banner__Yjtri">Klipper Firmware Configuration</span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">[*] Enable extra low-level configuration options</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">    Micro-controller Architecture (Raspberry Pi RP2040/RP235x)  ---&gt;</span></span></span><span class="code-line"><span class="menus_background__qukJD">    Processor model (rp2040)  ---&gt;<span class="menus_menu__6EDS9"> </span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">    Bootloader offset (No bootloader)  ---&gt;</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">    Flash chip (W25Q080 with CLKDIV 2)  ---&gt;</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">    Communication Interface (USB to CAN bus bridge)  ---&gt;</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">(1) CAN RX gpio number</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">(0) CAN TX gpio number</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">    USB ids  ---&gt;</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">(500000) CAN bus speed</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">[*] Optimize stepper code for &#x27;step on both edges&#x27;</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">() GPIO pins to set at micro-controller startup</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9"> </span></span><span class="menus_banner__Yjtri"> </span><span class="menus_header__OXEok">[Space/Enter] Toggle/enter [?] Help [/] Search</span></span><span class="code-line"><span class="menus_header__OXEok">[Q] Quit (prompts for save) [ESC] Leave menu</span></span></code></pre><p>Backup config and Build:</p><pre class="language-sh"><code class="language-sh code-highlight"><span class="code-line"><span class="token function">cp</span> config.skr_pico_can <span class="token punctuation">..</span>/printer_data/config/Firmware/
</span><span class="code-line"><span class="token function">make</span> <span class="token assign-left variable">KCONFIG_CONFIG</span><span class="token operator">=</span>config.skr_pico_can <span class="token parameter variable">-j4</span>
</span></code></pre><h5 id="serial-2">Serial</h5><pre class="language-sh"><code class="language-sh code-highlight"><span class="code-line"><span class="token builtin class-name">cd</span> ~/klipper/
</span><span class="code-line"><span class="token function">make</span> clean
</span><span class="code-line"><span class="token function">make</span> menuconfig <span class="token assign-left variable">KCONFIG_CONFIG</span><span class="token operator">=</span>config.skr_pico_serial
</span></code></pre><p>Set the following configuration:</p><pre class="bg-dark mb-3 p-4 rounded text-light"><code class="code-highlight"><span class="code-line"><span class="menus_header__OXEok">(Top)</span></span><span class="code-line"><span class="menus_banner__Yjtri">Klipper Firmware Configuration</span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">[ ] Enable extra low-level configuration options</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">    Micro-controller Architecture (Raspberry Pi RP2040/RP235x)  ---&gt;</span></span></span><span class="code-line"><span class="menus_background__qukJD">    Processor model (rp2040)  ---&gt;<span class="menus_menu__6EDS9"> </span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">    Bootloader offset (No bootloader)  ---&gt;</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">    Communication Interface (UART0 on GPIO0/GPIO1)  ---&gt;</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9"> </span></span><span class="menus_banner__Yjtri"> </span><span class="menus_header__OXEok">[Space/Enter] Toggle/enter [?] Help [/] Search</span></span><span class="code-line"><span class="menus_header__OXEok">[Q] Quit (prompts for save) [ESC] Leave menu</span></span></code></pre><p>Backup config and Build:</p><pre class="language-sh"><code class="language-sh code-highlight"><span class="code-line"><span class="token function">cp</span> config.skr_pico_serial <span class="token punctuation">..</span>/printer_data/config/Firmware/
</span><span class="code-line"><span class="token function">make</span> <span class="token assign-left variable">KCONFIG_CONFIG</span><span class="token operator">=</span>config.skr_pico_serial <span class="token parameter variable">-j4</span>
</span></code></pre><h5 id="usb-18">USB</h5><pre class="language-sh"><code class="language-sh code-highlight"><span class="code-line"><span class="token builtin class-name">cd</span> ~/klipper/
</span><span class="code-line"><span class="token function">make</span> clean
</span><span class="code-line"><span class="token function">make</span> menuconfig <span class="token assign-left variable">KCONFIG_CONFIG</span><span class="token operator">=</span>config.skr_pico_usb
</span></code></pre><p>Set the following configuration:</p><pre class="bg-dark mb-3 p-4 rounded text-light"><code class="code-highlight"><span class="code-line"><span class="menus_header__OXEok">(Top)</span></span><span class="code-line"><span class="menus_banner__Yjtri">Klipper Firmware Configuration</span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">[ ] Enable extra low-level configuration options</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">    Micro-controller Architecture (Raspberry Pi RP2040/RP235x)  ---&gt;</span></span></span><span class="code-line"><span class="menus_background__qukJD">    Processor model (rp2040)  ---&gt;<span class="menus_menu__6EDS9"> </span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">    Bootloader offset (No bootloader)  ---&gt;</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">    Communication Interface (USBSERIAL)  ---&gt;</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9"> </span></span><span class="menus_banner__Yjtri"> </span><span class="menus_header__OXEok">[Space/Enter] Toggle/enter [?] Help [/] Search</span></span><span class="code-line"><span class="menus_header__OXEok">[Q] Quit (prompts for save) [ESC] Leave menu</span></span></code></pre><p>Backup config and Build:</p><pre class="language-sh"><code class="language-sh code-highlight"><span class="code-line"><span class="token function">cp</span> config.skr_pico_usb <span class="token punctuation">..</span>/printer_data/config/Firmware/
</span><span class="code-line"><span class="token function">make</span> <span class="token assign-left variable">KCONFIG_CONFIG</span><span class="token operator">=</span>config.skr_pico_usb <span class="token parameter variable">-j4</span>
</span></code></pre><h5 id="flash-3">Flash</h5><p>For the initial flash we need to install jumpers on the <code>USB Power</code> and <code>Boot</code> pins, connect the MCU to the Raspberry Pi and run:</p><pre class="language-sh"><code class="language-sh code-highlight"><span class="code-line"><span class="token function">sudo</span> <span class="token function">mount</span> /dev/sda1 /mnt
</span><span class="code-line"><span class="token function">sudo</span> <span class="token function">cp</span> out/klipper.uf2 /mnt
</span><span class="code-line"><span class="token function">sudo</span> <span class="token function">umount</span> /mnt
</span></code></pre><p>Disconnect power from the MCU and remove the jumpers we installed earlier.</p><p>Subsequent flashes can then be done by using the following commands:</p><pre class="language-sh"><code class="language-sh code-highlight"><span class="code-line"><span class="token function">sudo</span> <span class="token function">service</span> klipper stop
</span><span class="code-line"><span class="token builtin class-name">cd</span> ~/klipper
</span><span class="code-line"><span class="token function">make</span> flash <span class="token assign-left variable">FLASH_DEVICE</span><span class="token operator">=</span>/dev/serial/by-id/usb-Klipper_rp2040_1D0004001050563046363120-if00
</span><span class="code-line"><span class="token function">sudo</span> <span class="token function">service</span> klipper start
</span></code></pre><h3 id="super8">Super8</h3><p>Get the most up to date info on the <a href="https://mellow-3d.github.io/fly_super8.html" rel="noopener noreferrer" target="_blank">official page</a>.</p><p>This board will be used for the <a href="/projects/printer-voron-2.4">Voron 2.4</a>.</p><h4 id="katapult-configuration-5">Katapult Configuration</h4><h5 id="usb-19">USB</h5><pre class="language-sh"><code class="language-sh code-highlight"><span class="code-line"><span class="token builtin class-name">cd</span> ~/katapult/
</span><span class="code-line"><span class="token function">make</span> clean
</span><span class="code-line"><span class="token function">make</span> menuconfig <span class="token assign-left variable">KCONFIG_CONFIG</span><span class="token operator">=</span>config.super8_katapult
</span></code></pre><p>Set the following configuration:</p><pre class="bg-dark mb-3 p-4 rounded text-light"><code class="code-highlight"><span class="code-line"><span class="menus_header__OXEok">(Top)</span></span><span class="code-line"><span class="menus_banner__Yjtri">Katapult Configuration</span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">    Micro-controller Architecture (STMicroelectronics STM32)  ---&gt;</span></span></span><span class="code-line"><span class="menus_background__qukJD">    Processor model (STM32F407)  ---&gt;<span class="menus_menu__6EDS9"> </span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">    Build Katapult deployment application (32KiB bootloader)  ---&gt;</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">    Clock Reference (8 MHz crystal)  ---&gt;</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">    Communication interface (USB (on PA11/PA12))  ---&gt;</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">    Application start offset (32KiB offset)  ---&gt;</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">    USB ids  ---&gt;</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">() GPIO pins to set on bootloader entry</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">[*] Support bootloader entry on rapid double click of reset button</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">[ ] Enable bootloader entry on button (or gpio) state</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">[ ] Enable Status LED</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9"> </span></span><span class="menus_banner__Yjtri"> </span><span class="menus_header__OXEok">[Space/Enter] Toggle/enter [?] Help [/] Search</span></span><span class="code-line"><span class="menus_header__OXEok">[Q] Quit (prompts for save) [ESC] Leave menu</span></span></code></pre><p>Backup config and Build:</p><pre class="language-sh"><code class="language-sh code-highlight"><span class="code-line"><span class="token function">cp</span> config.super8_katapult <span class="token punctuation">..</span>/printer_data/config/Firmware/
</span><span class="code-line"><span class="token function">make</span> <span class="token assign-left variable">KCONFIG_CONFIG</span><span class="token operator">=</span>config.super8_katapult <span class="token parameter variable">-j4</span>
</span></code></pre><p>For the initial flash we need to copy the file to a micro sd card. The easiest way to do this is to copy <code>out/deployer.bin</code> to the klipper config directory:</p><pre class="language-sh"><code class="language-sh code-highlight"><span class="code-line"><span class="token function">cp</span> out/deployer.bin <span class="token punctuation">..</span>/printer_data/config/
</span></code></pre><p>You can then:</p><ol><li>Download it to your local machine from the Mainsail web interface.</li><li>Copy the <code>deployer.bin</code> file to the root of the Micro SD card.</li><li>Rename <code>deployer.bin</code> to <code>firmware.bin</code>.</li><li>Eject the Micro SD card from the PC.</li><li>Insert the Micro SD card into the slot on the MCU.</li><li>Press the <code>RESET</code> button on the MCU.</li></ol><p>Subsequent flashes can then be done by double pressing the <code>RESET</code> button on the MCU and then using the command:</p><pre class="language-sh"><code class="language-sh code-highlight"><span class="code-line">python3 ~/katapult/scripts/flashtool.py <span class="token parameter variable">-f</span> ~/katapult/out/deployer.bin <span class="token parameter variable">-d</span> /dev/serial/by-id/usb-katapult_stm32f407xx_5A0034000250304235323120-if00
</span></code></pre><h4 id="klipper-firmware-configuration-15">Klipper Firmware Configuration</h4><h5 id="usb-20">USB</h5><pre class="language-sh"><code class="language-sh code-highlight"><span class="code-line"><span class="token builtin class-name">cd</span> <span class="token punctuation">..</span>/klipper/
</span><span class="code-line"><span class="token function">make</span> clean
</span><span class="code-line"><span class="token function">make</span> menuconfig <span class="token assign-left variable">KCONFIG_CONFIG</span><span class="token operator">=</span>config.super8_klipper
</span></code></pre><p>Set the following configuration:</p><pre class="bg-dark mb-3 p-4 rounded text-light"><code class="code-highlight"><span class="code-line"><span class="menus_header__OXEok">(Top)</span></span><span class="code-line"><span class="menus_banner__Yjtri">Klipper Firmware Configuration</span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">[*] Enable extra low-level configuration options</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">    Micro-controller Architecture (STMicroelectronics STM32)  ---&gt;</span></span></span><span class="code-line"><span class="menus_background__qukJD">    Processor model (STM32F407)  ---&gt;<span class="menus_menu__6EDS9"> </span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">    Bootloader offset (32KiB bootloader)  ---&gt;</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">    Clock Reference (8 MHz crystal)  ---&gt;</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">    Communication interface (USB (on PA11/PA12))  ---&gt;</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">    USB ids  ---&gt;</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">[*] Optimize stepper code for &#x27;step on both edges&#x27;</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">() GPIO pins to set at micro-controller startup</span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9"> </span></span><span class="menus_banner__Yjtri"> </span><span class="menus_header__OXEok">[Space/Enter] Toggle/enter [?] Help [/] Search</span></span><span class="code-line"><span class="menus_header__OXEok">[Q] Quit (prompts for save) [ESC] Leave menu</span></span></code></pre><p>Backup config, Build and Flash to the board:</p><pre class="language-sh"><code class="language-sh code-highlight"><span class="code-line"><span class="token function">cp</span> config.super8_klipper <span class="token punctuation">..</span>/printer_data/config/Firmware/
</span><span class="code-line"><span class="token function">make</span> <span class="token assign-left variable">KCONFIG_CONFIG</span><span class="token operator">=</span>config.super8_klipper <span class="token parameter variable">-j4</span>
</span><span class="code-line"><span class="token function">make</span> <span class="token assign-left variable">KCONFIG_CONFIG</span><span class="token operator">=</span>config.super8_klipper flash <span class="token assign-left variable">FLASH_DEVICE</span><span class="token operator">=</span>/dev/serial/by-id/usb-katapult_stm32f407xx_5A0034000250304235323120-if00
</span></code></pre><h2 id="rpi-microcontroller">RPi microcontroller</h2><p>To get the most up-to-date info for the latest Klipper version visit the <a href="https://www.klipper3d.org/RPi_microcontroller.html" rel="noopener noreferrer" target="_blank">Klipper RPi micro-controller setup guide</a>.</p><h3 id="install-the-rc-script">Install the RC Script</h3><p>Copy and enable the <code>klipper-mcu.service</code> for systemd:</p><pre class="language-sh"><code class="language-sh code-highlight"><span class="code-line"><span class="token builtin class-name">cd</span> ~/klipper/
</span><span class="code-line"><span class="token function">sudo</span> <span class="token function">cp</span> ./scripts/klipper-mcu.service /etc/systemd/system/
</span><span class="code-line"><span class="token function">sudo</span> systemctl <span class="token builtin class-name">enable</span> klipper-mcu.service
</span></code></pre><h3 id="building-the-micro-controller-code">Building the Micro-Controller Code</h3><p>Configure the Klipper micro-controller code:</p><pre class="language-sh"><code class="language-sh code-highlight"><span class="code-line"><span class="token builtin class-name">cd</span> ~/klipper/
</span><span class="code-line"><span class="token function">make</span> clean
</span><span class="code-line"><span class="token function">make</span> menuconfig <span class="token assign-left variable">KCONFIG_CONFIG</span><span class="token operator">=</span>config.rpi
</span><span class="code-line"><span class="token function">cp</span> config.rpi <span class="token punctuation">..</span>/printer_data/config/Firmware/
</span></code></pre><p>Set <code>Micro-controller Architecture</code> to <code>Linux process</code>...</p><pre class="bg-dark mb-3 p-4 rounded text-light"><code class="code-highlight"><span class="code-line"><span class="menus_header__OXEok">(Top)</span></span><span class="code-line"><span class="menus_banner__Yjtri">Klipper Firmware Configuration</span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9">[ ] Enable extra low-level configuration options</span></span></span><span class="code-line"><span class="menus_background__qukJD">    Micro-controller Architecture (Linux process)  ---&gt;<span class="menus_menu__6EDS9"> </span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="menus_menu__6EDS9"> </span></span><span class="menus_banner__Yjtri"> </span><span class="menus_header__OXEok">[Space/Enter] Toggle/enter [?] Help [/] Search</span></span><span class="code-line"><span class="menus_header__OXEok">[Q] Quit (prompts for save) [ESC] Leave menu</span></span></code></pre><p>then save and exit and run:</p><pre class="language-sh"><code class="language-sh code-highlight"><span class="code-line"><span class="token function">sudo</span> <span class="token function">service</span> klipper stop
</span><span class="code-line"><span class="token function">make</span> flash <span class="token assign-left variable">KCONFIG_CONFIG</span><span class="token operator">=</span>config.rpi
</span><span class="code-line"><span class="token function">sudo</span> <span class="token function">service</span> klipper start
</span></code></pre><p>If klippy.log reports a <code>Permission denied</code> error when attempting to connect to <code>/tmp/klipper_host_mcu</code> then you need to add your user to the tty group. The following command will add the <code>pi</code> user to the <code>tty</code> group:</p><pre class="language-sh"><code class="language-sh code-highlight"><span class="code-line"><span class="token function">sudo</span> <span class="token function">usermod</span> <span class="token parameter variable">-a</span> <span class="token parameter variable">-G</span> <span class="token function">tty</span> pi
</span></code></pre><h3 id="optional-interface-options">Optional: Interface Options</h3><p>You can find the <code>Interface Options</code> in the Raspberry Pi Software Configuration Tool by running:</p><pre class="language-sh"><code class="language-sh code-highlight"><span class="code-line"><span class="token function">sudo</span> raspi-config
</span></code></pre><pre class="bg-dark mb-3 p-4 rounded text-light"><code class="code-highlight"><span class="code-line"><span class="d-none d-xxl-block menus_background__qukJD"> </span><span class="d-none d-md-block d-lg-none d-xl-block d-xxl-block menus_background__qukJD"> </span><span class="menus_background__qukJD"><span class="d-none d-md-block d-lg-none d-xl-block">     </span><span class="d-none d-xl-block">     </span><span class="d-none d-xxl-block">        </span><span class="menus_menu__6EDS9">┌─────────┤ <span class="menus_highlight__72Eh0">Raspberry Pi Software Configuration Tool (raspi-config)</span> ├──────────┐</span><span class="menus_shadowtop__2dNtq"> </span><span class="d-none d-md-block d-lg-none d-xl-block">     </span><span class="d-none d-xl-block">     </span><span class="d-none d-xxl-block">        </span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="d-none d-md-block d-lg-none d-xl-block">     </span><span class="d-none d-xl-block">     </span><span class="d-none d-xxl-block">        </span><span class="menus_menu__6EDS9">│                                                                              │</span><span class="menus_shadow__EkYnQ"> </span><span class="d-none d-md-block d-lg-none d-xl-block">     </span><span class="d-none d-xl-block">     </span><span class="d-none d-xxl-block">        </span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="d-none d-md-block d-lg-none d-xl-block">     </span><span class="d-none d-xl-block">     </span><span class="d-none d-xxl-block">        </span><span class="menus_menu__6EDS9">│       1 System Options       Configure system settings                       │</span><span class="menus_shadow__EkYnQ"> </span><span class="d-none d-md-block d-lg-none d-xl-block">     </span><span class="d-none d-xl-block">     </span><span class="d-none d-xxl-block">        </span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="d-none d-md-block d-lg-none d-xl-block">     </span><span class="d-none d-xl-block">     </span><span class="d-none d-xxl-block">        </span><span class="menus_menu__6EDS9">│       2 Display Options      Configure display settings                      │</span><span class="menus_shadow__EkYnQ"> </span><span class="d-none d-md-block d-lg-none d-xl-block">     </span><span class="d-none d-xl-block">     </span><span class="d-none d-xxl-block">        </span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="d-none d-md-block d-lg-none d-xl-block">     </span><span class="d-none d-xl-block">     </span><span class="d-none d-xxl-block">        </span><span class="menus_menu__6EDS9">│       <span class="menus_selected__AuxGm">3 Interface Options    Configure connections to peripherals     </span>       │</span><span class="menus_shadow__EkYnQ"> </span><span class="d-none d-md-block d-lg-none d-xl-block">     </span><span class="d-none d-xl-block">     </span><span class="d-none d-xxl-block">        </span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="d-none d-md-block d-lg-none d-xl-block">     </span><span class="d-none d-xl-block">     </span><span class="d-none d-xxl-block">        </span><span class="menus_menu__6EDS9">│       4 Performance Options  Configure performance settings                  │</span><span class="menus_shadow__EkYnQ"> </span><span class="d-none d-md-block d-lg-none d-xl-block">     </span><span class="d-none d-xl-block">     </span><span class="d-none d-xxl-block">        </span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="d-none d-md-block d-lg-none d-xl-block">     </span><span class="d-none d-xl-block">     </span><span class="d-none d-xxl-block">        </span><span class="menus_menu__6EDS9">│       5 Localisation Options Configure language and regional settings        │</span><span class="menus_shadow__EkYnQ"> </span><span class="d-none d-md-block d-lg-none d-xl-block">     </span><span class="d-none d-xl-block">     </span><span class="d-none d-xxl-block">        </span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="d-none d-md-block d-lg-none d-xl-block">     </span><span class="d-none d-xl-block">     </span><span class="d-none d-xxl-block">        </span><span class="menus_menu__6EDS9">│       6 Advanced Options     Configure advanced settings                     │</span><span class="menus_shadow__EkYnQ"> </span><span class="d-none d-md-block d-lg-none d-xl-block">     </span><span class="d-none d-xl-block">     </span><span class="d-none d-xxl-block">        </span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="d-none d-md-block d-lg-none d-xl-block">     </span><span class="d-none d-xl-block">     </span><span class="d-none d-xxl-block">        </span><span class="menus_menu__6EDS9">│       8 Update               Update this tool to the latest version          │</span><span class="menus_shadow__EkYnQ"> </span><span class="d-none d-md-block d-lg-none d-xl-block">     </span><span class="d-none d-xl-block">     </span><span class="d-none d-xxl-block">        </span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="d-none d-md-block d-lg-none d-xl-block">     </span><span class="d-none d-xl-block">     </span><span class="d-none d-xxl-block">        </span><span class="menus_menu__6EDS9">│       9 About raspi-config   Information about this configuration tool       │</span><span class="menus_shadow__EkYnQ"> </span><span class="d-none d-md-block d-lg-none d-xl-block">     </span><span class="d-none d-xl-block">     </span><span class="d-none d-xxl-block">        </span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="d-none d-md-block d-lg-none d-xl-block">     </span><span class="d-none d-xl-block">     </span><span class="d-none d-xxl-block">        </span><span class="menus_menu__6EDS9">│                                                                              │</span><span class="menus_shadow__EkYnQ"> </span><span class="d-none d-md-block d-lg-none d-xl-block">     </span><span class="d-none d-xl-block">     </span><span class="d-none d-xxl-block">        </span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="d-none d-md-block d-lg-none d-xl-block">     </span><span class="d-none d-xl-block">     </span><span class="d-none d-xxl-block">        </span><span class="menus_menu__6EDS9">│                                                                              │</span><span class="menus_shadow__EkYnQ"> </span><span class="d-none d-md-block d-lg-none d-xl-block">     </span><span class="d-none d-xl-block">     </span><span class="d-none d-xxl-block">        </span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="d-none d-md-block d-lg-none d-xl-block">     </span><span class="d-none d-xl-block">     </span><span class="d-none d-xxl-block">        </span><span class="menus_menu__6EDS9">│                                                                              │</span><span class="menus_shadow__EkYnQ"> </span><span class="d-none d-md-block d-lg-none d-xl-block">     </span><span class="d-none d-xl-block">     </span><span class="d-none d-xxl-block">        </span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="d-none d-md-block d-lg-none d-xl-block">     </span><span class="d-none d-xl-block">     </span><span class="d-none d-xxl-block">        </span><span class="menus_menu__6EDS9">│                                                                              │</span><span class="menus_shadow__EkYnQ"> </span><span class="d-none d-md-block d-lg-none d-xl-block">     </span><span class="d-none d-xl-block">     </span><span class="d-none d-xxl-block">        </span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="d-none d-md-block d-lg-none d-xl-block">     </span><span class="d-none d-xl-block">     </span><span class="d-none d-xxl-block">        </span><span class="menus_menu__6EDS9">│                                                                              │</span><span class="menus_shadow__EkYnQ"> </span><span class="d-none d-md-block d-lg-none d-xl-block">     </span><span class="d-none d-xl-block">     </span><span class="d-none d-xxl-block">        </span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="d-none d-md-block d-lg-none d-xl-block">     </span><span class="d-none d-xl-block">     </span><span class="d-none d-xxl-block">        </span><span class="menus_menu__6EDS9">│                     &lt;Select&gt;                     &lt;Finish&gt;                    │</span><span class="menus_shadow__EkYnQ"> </span><span class="d-none d-md-block d-lg-none d-xl-block">     </span><span class="d-none d-xl-block">     </span><span class="d-none d-xxl-block">        </span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="d-none d-md-block d-lg-none d-xl-block">     </span><span class="d-none d-xl-block">     </span><span class="d-none d-xxl-block">        </span><span class="menus_menu__6EDS9">│                                                                              │</span><span class="menus_shadow__EkYnQ"> </span><span class="d-none d-md-block d-lg-none d-xl-block">     </span><span class="d-none d-xl-block">     </span><span class="d-none d-xxl-block">        </span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="d-none d-md-block d-lg-none d-xl-block">     </span><span class="d-none d-xl-block">     </span><span class="d-none d-xxl-block">        </span><span class="menus_menu__6EDS9">└──────────────────────────────────────────────────────────────────────────────┘</span><span class="menus_shadow__EkYnQ"> </span><span class="d-none d-md-block d-lg-none d-xl-block">     </span><span class="d-none d-xl-block">     </span><span class="d-none d-xxl-block">        </span></span><span class="menus_background__qukJD"><span class="d-none d-md-block d-lg-none d-xl-block">     </span><span class="d-none d-xl-block">     </span><span class="d-none d-xxl-block">        </span> <span class="menus_shadow__EkYnQ">                                                                                </span><span class="d-none d-md-block d-lg-none d-xl-block">     </span><span class="d-none d-xl-block">     </span><span class="d-none d-xxl-block">        </span></span><span class="d-none d-md-block d-lg-none d-xl-block d-xxl-block menus_background__qukJD"> </span><span class="d-none d-xxl-block menus_background__qukJD"> </span></span></code></pre><h4 id="enabling-spi">Enabling SPI</h4><p>SPI should be enabled automatically by the hat EEPROM, If you have trouble, you can enable it manually by selecting <code>SPI</code> under the <code>Interface Options</code> menu.</p><pre class="bg-dark mb-3 p-4 rounded text-light"><code class="code-highlight"><span class="code-line"><span class="d-none d-xxl-block menus_background__qukJD"> </span><span class="d-none d-md-block d-lg-none d-xl-block d-xxl-block menus_background__qukJD"> </span><span class="menus_background__qukJD"><span class="d-none d-md-block d-lg-none d-xl-block">     </span><span class="d-none d-xl-block">     </span><span class="d-none d-xxl-block">        </span><span class="menus_menu__6EDS9">┌─────────┤ <span class="menus_highlight__72Eh0">Raspberry Pi Software Configuration Tool (raspi-config)</span> ├──────────┐</span><span class="menus_shadowtop__2dNtq"> </span><span class="d-none d-md-block d-lg-none d-xl-block">     </span><span class="d-none d-xl-block">     </span><span class="d-none d-xxl-block">        </span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="d-none d-md-block d-lg-none d-xl-block">     </span><span class="d-none d-xl-block">     </span><span class="d-none d-xxl-block">        </span><span class="menus_menu__6EDS9">│                                                                              │</span><span class="menus_shadow__EkYnQ"> </span><span class="d-none d-md-block d-lg-none d-xl-block">     </span><span class="d-none d-xl-block">     </span><span class="d-none d-xxl-block">        </span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="d-none d-md-block d-lg-none d-xl-block">     </span><span class="d-none d-xl-block">     </span><span class="d-none d-xxl-block">        </span><span class="menus_menu__6EDS9">│    I1 SSH         Enable/disable remote command line access using SSH        │</span><span class="menus_shadow__EkYnQ"> </span><span class="d-none d-md-block d-lg-none d-xl-block">     </span><span class="d-none d-xl-block">     </span><span class="d-none d-xxl-block">        </span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="d-none d-md-block d-lg-none d-xl-block">     </span><span class="d-none d-xl-block">     </span><span class="d-none d-xxl-block">        </span><span class="menus_menu__6EDS9">│    I2 RPi Connect Enable/disable Raspberry Pi Connect                        │</span><span class="menus_shadow__EkYnQ"> </span><span class="d-none d-md-block d-lg-none d-xl-block">     </span><span class="d-none d-xl-block">     </span><span class="d-none d-xxl-block">        </span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="d-none d-md-block d-lg-none d-xl-block">     </span><span class="d-none d-xl-block">     </span><span class="d-none d-xxl-block">        </span><span class="menus_menu__6EDS9">│    I3 VNC         Enable/disable graphical remote desktop access             │</span><span class="menus_shadow__EkYnQ"> </span><span class="d-none d-md-block d-lg-none d-xl-block">     </span><span class="d-none d-xl-block">     </span><span class="d-none d-xxl-block">        </span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="d-none d-md-block d-lg-none d-xl-block">     </span><span class="d-none d-xl-block">     </span><span class="d-none d-xxl-block">        </span><span class="menus_menu__6EDS9">│    <span class="menus_selected__AuxGm">I4 SPI         Enable/disable automatic loading of SPI kernel module </span>     │</span><span class="menus_shadow__EkYnQ"> </span><span class="d-none d-md-block d-lg-none d-xl-block">     </span><span class="d-none d-xl-block">     </span><span class="d-none d-xxl-block">        </span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="d-none d-md-block d-lg-none d-xl-block">     </span><span class="d-none d-xl-block">     </span><span class="d-none d-xxl-block">        </span><span class="menus_menu__6EDS9">│    I5 I2C         Enable/disable automatic loading of I2C kernel module      │</span><span class="menus_shadow__EkYnQ"> </span><span class="d-none d-md-block d-lg-none d-xl-block">     </span><span class="d-none d-xl-block">     </span><span class="d-none d-xxl-block">        </span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="d-none d-md-block d-lg-none d-xl-block">     </span><span class="d-none d-xl-block">     </span><span class="d-none d-xxl-block">        </span><span class="menus_menu__6EDS9">│    I6 Serial Port Enable/disable shell messages on the serial connection     │</span><span class="menus_shadow__EkYnQ"> </span><span class="d-none d-md-block d-lg-none d-xl-block">     </span><span class="d-none d-xl-block">     </span><span class="d-none d-xxl-block">        </span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="d-none d-md-block d-lg-none d-xl-block">     </span><span class="d-none d-xl-block">     </span><span class="d-none d-xxl-block">        </span><span class="menus_menu__6EDS9">│    I7 1-Wire      Enable/disable one-wire interface                          │</span><span class="menus_shadow__EkYnQ"> </span><span class="d-none d-md-block d-lg-none d-xl-block">     </span><span class="d-none d-xl-block">     </span><span class="d-none d-xxl-block">        </span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="d-none d-md-block d-lg-none d-xl-block">     </span><span class="d-none d-xl-block">     </span><span class="d-none d-xxl-block">        </span><span class="menus_menu__6EDS9">│    I8 Remote GPIO Enable/disable remote access to GPIO pins                  │</span><span class="menus_shadow__EkYnQ"> </span><span class="d-none d-md-block d-lg-none d-xl-block">     </span><span class="d-none d-xl-block">     </span><span class="d-none d-xxl-block">        </span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="d-none d-md-block d-lg-none d-xl-block">     </span><span class="d-none d-xl-block">     </span><span class="d-none d-xxl-block">        </span><span class="menus_menu__6EDS9">│                                                                              │</span><span class="menus_shadow__EkYnQ"> </span><span class="d-none d-md-block d-lg-none d-xl-block">     </span><span class="d-none d-xl-block">     </span><span class="d-none d-xxl-block">        </span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="d-none d-md-block d-lg-none d-xl-block">     </span><span class="d-none d-xl-block">     </span><span class="d-none d-xxl-block">        </span><span class="menus_menu__6EDS9">│                                                                              │</span><span class="menus_shadow__EkYnQ"> </span><span class="d-none d-md-block d-lg-none d-xl-block">     </span><span class="d-none d-xl-block">     </span><span class="d-none d-xxl-block">        </span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="d-none d-md-block d-lg-none d-xl-block">     </span><span class="d-none d-xl-block">     </span><span class="d-none d-xxl-block">        </span><span class="menus_menu__6EDS9">│                                                                              │</span><span class="menus_shadow__EkYnQ"> </span><span class="d-none d-md-block d-lg-none d-xl-block">     </span><span class="d-none d-xl-block">     </span><span class="d-none d-xxl-block">        </span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="d-none d-md-block d-lg-none d-xl-block">     </span><span class="d-none d-xl-block">     </span><span class="d-none d-xxl-block">        </span><span class="menus_menu__6EDS9">│                                                                              │</span><span class="menus_shadow__EkYnQ"> </span><span class="d-none d-md-block d-lg-none d-xl-block">     </span><span class="d-none d-xl-block">     </span><span class="d-none d-xxl-block">        </span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="d-none d-md-block d-lg-none d-xl-block">     </span><span class="d-none d-xl-block">     </span><span class="d-none d-xxl-block">        </span><span class="menus_menu__6EDS9">│                                                                              │</span><span class="menus_shadow__EkYnQ"> </span><span class="d-none d-md-block d-lg-none d-xl-block">     </span><span class="d-none d-xl-block">     </span><span class="d-none d-xxl-block">        </span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="d-none d-md-block d-lg-none d-xl-block">     </span><span class="d-none d-xl-block">     </span><span class="d-none d-xxl-block">        </span><span class="menus_menu__6EDS9">│                     &lt;Select&gt;                     &lt;Back&gt;                      │</span><span class="menus_shadow__EkYnQ"> </span><span class="d-none d-md-block d-lg-none d-xl-block">     </span><span class="d-none d-xl-block">     </span><span class="d-none d-xxl-block">        </span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="d-none d-md-block d-lg-none d-xl-block">     </span><span class="d-none d-xl-block">     </span><span class="d-none d-xxl-block">        </span><span class="menus_menu__6EDS9">│                                                                              │</span><span class="menus_shadow__EkYnQ"> </span><span class="d-none d-md-block d-lg-none d-xl-block">     </span><span class="d-none d-xl-block">     </span><span class="d-none d-xxl-block">        </span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="d-none d-md-block d-lg-none d-xl-block">     </span><span class="d-none d-xl-block">     </span><span class="d-none d-xxl-block">        </span><span class="menus_menu__6EDS9">└──────────────────────────────────────────────────────────────────────────────┘</span><span class="menus_shadow__EkYnQ"> </span><span class="d-none d-md-block d-lg-none d-xl-block">     </span><span class="d-none d-xl-block">     </span><span class="d-none d-xxl-block">        </span></span><span class="menus_background__qukJD"><span class="d-none d-md-block d-lg-none d-xl-block">     </span><span class="d-none d-xl-block">     </span><span class="d-none d-xxl-block">        </span> <span class="menus_shadow__EkYnQ">                                                                                </span><span class="d-none d-md-block d-lg-none d-xl-block">     </span><span class="d-none d-xl-block">     </span><span class="d-none d-xxl-block">        </span></span><span class="d-none d-md-block d-lg-none d-xl-block d-xxl-block menus_background__qukJD"> </span><span class="d-none d-xxl-block menus_background__qukJD"> </span></span></code></pre><h4 id="enabling-i2c">Enabling I2C</h4><p>I2C should be enabled automatically by the hat EEPROM, If you have trouble, you can enable it manually by selecting <code>I2C</code> under the <code>Interface Options</code> menu.</p><pre class="bg-dark mb-3 p-4 rounded text-light"><code class="code-highlight"><span class="code-line"><span class="d-none d-xxl-block menus_background__qukJD"> </span><span class="d-none d-md-block d-lg-none d-xl-block d-xxl-block menus_background__qukJD"> </span><span class="menus_background__qukJD"><span class="d-none d-md-block d-lg-none d-xl-block">     </span><span class="d-none d-xl-block">     </span><span class="d-none d-xxl-block">        </span><span class="menus_menu__6EDS9">┌─────────┤ <span class="menus_highlight__72Eh0">Raspberry Pi Software Configuration Tool (raspi-config)</span> ├──────────┐</span><span class="menus_shadowtop__2dNtq"> </span><span class="d-none d-md-block d-lg-none d-xl-block">     </span><span class="d-none d-xl-block">     </span><span class="d-none d-xxl-block">        </span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="d-none d-md-block d-lg-none d-xl-block">     </span><span class="d-none d-xl-block">     </span><span class="d-none d-xxl-block">        </span><span class="menus_menu__6EDS9">│                                                                              │</span><span class="menus_shadow__EkYnQ"> </span><span class="d-none d-md-block d-lg-none d-xl-block">     </span><span class="d-none d-xl-block">     </span><span class="d-none d-xxl-block">        </span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="d-none d-md-block d-lg-none d-xl-block">     </span><span class="d-none d-xl-block">     </span><span class="d-none d-xxl-block">        </span><span class="menus_menu__6EDS9">│    I1 SSH         Enable/disable remote command line access using SSH        │</span><span class="menus_shadow__EkYnQ"> </span><span class="d-none d-md-block d-lg-none d-xl-block">     </span><span class="d-none d-xl-block">     </span><span class="d-none d-xxl-block">        </span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="d-none d-md-block d-lg-none d-xl-block">     </span><span class="d-none d-xl-block">     </span><span class="d-none d-xxl-block">        </span><span class="menus_menu__6EDS9">│    I2 RPi Connect Enable/disable Raspberry Pi Connect                        │</span><span class="menus_shadow__EkYnQ"> </span><span class="d-none d-md-block d-lg-none d-xl-block">     </span><span class="d-none d-xl-block">     </span><span class="d-none d-xxl-block">        </span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="d-none d-md-block d-lg-none d-xl-block">     </span><span class="d-none d-xl-block">     </span><span class="d-none d-xxl-block">        </span><span class="menus_menu__6EDS9">│    I3 VNC         Enable/disable graphical remote desktop access             │</span><span class="menus_shadow__EkYnQ"> </span><span class="d-none d-md-block d-lg-none d-xl-block">     </span><span class="d-none d-xl-block">     </span><span class="d-none d-xxl-block">        </span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="d-none d-md-block d-lg-none d-xl-block">     </span><span class="d-none d-xl-block">     </span><span class="d-none d-xxl-block">        </span><span class="menus_menu__6EDS9">│    I4 SPI         Enable/disable automatic loading of SPI kernel module      │</span><span class="menus_shadow__EkYnQ"> </span><span class="d-none d-md-block d-lg-none d-xl-block">     </span><span class="d-none d-xl-block">     </span><span class="d-none d-xxl-block">        </span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="d-none d-md-block d-lg-none d-xl-block">     </span><span class="d-none d-xl-block">     </span><span class="d-none d-xxl-block">        </span><span class="menus_menu__6EDS9">│    <span class="menus_selected__AuxGm">I5 I2C         Enable/disable automatic loading of I2C kernel module </span>     │</span><span class="menus_shadow__EkYnQ"> </span><span class="d-none d-md-block d-lg-none d-xl-block">     </span><span class="d-none d-xl-block">     </span><span class="d-none d-xxl-block">        </span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="d-none d-md-block d-lg-none d-xl-block">     </span><span class="d-none d-xl-block">     </span><span class="d-none d-xxl-block">        </span><span class="menus_menu__6EDS9">│    I6 Serial Port Enable/disable shell messages on the serial connection     │</span><span class="menus_shadow__EkYnQ"> </span><span class="d-none d-md-block d-lg-none d-xl-block">     </span><span class="d-none d-xl-block">     </span><span class="d-none d-xxl-block">        </span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="d-none d-md-block d-lg-none d-xl-block">     </span><span class="d-none d-xl-block">     </span><span class="d-none d-xxl-block">        </span><span class="menus_menu__6EDS9">│    I7 1-Wire      Enable/disable one-wire interface                          │</span><span class="menus_shadow__EkYnQ"> </span><span class="d-none d-md-block d-lg-none d-xl-block">     </span><span class="d-none d-xl-block">     </span><span class="d-none d-xxl-block">        </span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="d-none d-md-block d-lg-none d-xl-block">     </span><span class="d-none d-xl-block">     </span><span class="d-none d-xxl-block">        </span><span class="menus_menu__6EDS9">│    I8 Remote GPIO Enable/disable remote access to GPIO pins                  │</span><span class="menus_shadow__EkYnQ"> </span><span class="d-none d-md-block d-lg-none d-xl-block">     </span><span class="d-none d-xl-block">     </span><span class="d-none d-xxl-block">        </span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="d-none d-md-block d-lg-none d-xl-block">     </span><span class="d-none d-xl-block">     </span><span class="d-none d-xxl-block">        </span><span class="menus_menu__6EDS9">│                                                                              │</span><span class="menus_shadow__EkYnQ"> </span><span class="d-none d-md-block d-lg-none d-xl-block">     </span><span class="d-none d-xl-block">     </span><span class="d-none d-xxl-block">        </span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="d-none d-md-block d-lg-none d-xl-block">     </span><span class="d-none d-xl-block">     </span><span class="d-none d-xxl-block">        </span><span class="menus_menu__6EDS9">│                                                                              │</span><span class="menus_shadow__EkYnQ"> </span><span class="d-none d-md-block d-lg-none d-xl-block">     </span><span class="d-none d-xl-block">     </span><span class="d-none d-xxl-block">        </span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="d-none d-md-block d-lg-none d-xl-block">     </span><span class="d-none d-xl-block">     </span><span class="d-none d-xxl-block">        </span><span class="menus_menu__6EDS9">│                                                                              │</span><span class="menus_shadow__EkYnQ"> </span><span class="d-none d-md-block d-lg-none d-xl-block">     </span><span class="d-none d-xl-block">     </span><span class="d-none d-xxl-block">        </span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="d-none d-md-block d-lg-none d-xl-block">     </span><span class="d-none d-xl-block">     </span><span class="d-none d-xxl-block">        </span><span class="menus_menu__6EDS9">│                                                                              │</span><span class="menus_shadow__EkYnQ"> </span><span class="d-none d-md-block d-lg-none d-xl-block">     </span><span class="d-none d-xl-block">     </span><span class="d-none d-xxl-block">        </span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="d-none d-md-block d-lg-none d-xl-block">     </span><span class="d-none d-xl-block">     </span><span class="d-none d-xxl-block">        </span><span class="menus_menu__6EDS9">│                                                                              │</span><span class="menus_shadow__EkYnQ"> </span><span class="d-none d-md-block d-lg-none d-xl-block">     </span><span class="d-none d-xl-block">     </span><span class="d-none d-xxl-block">        </span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="d-none d-md-block d-lg-none d-xl-block">     </span><span class="d-none d-xl-block">     </span><span class="d-none d-xxl-block">        </span><span class="menus_menu__6EDS9">│                     &lt;Select&gt;                     &lt;Back&gt;                      │</span><span class="menus_shadow__EkYnQ"> </span><span class="d-none d-md-block d-lg-none d-xl-block">     </span><span class="d-none d-xl-block">     </span><span class="d-none d-xxl-block">        </span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="d-none d-md-block d-lg-none d-xl-block">     </span><span class="d-none d-xl-block">     </span><span class="d-none d-xxl-block">        </span><span class="menus_menu__6EDS9">│                                                                              │</span><span class="menus_shadow__EkYnQ"> </span><span class="d-none d-md-block d-lg-none d-xl-block">     </span><span class="d-none d-xl-block">     </span><span class="d-none d-xxl-block">        </span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="d-none d-md-block d-lg-none d-xl-block">     </span><span class="d-none d-xl-block">     </span><span class="d-none d-xxl-block">        </span><span class="menus_menu__6EDS9">└──────────────────────────────────────────────────────────────────────────────┘</span><span class="menus_shadow__EkYnQ"> </span><span class="d-none d-md-block d-lg-none d-xl-block">     </span><span class="d-none d-xl-block">     </span><span class="d-none d-xxl-block">        </span></span><span class="menus_background__qukJD"><span class="d-none d-md-block d-lg-none d-xl-block">     </span><span class="d-none d-xl-block">     </span><span class="d-none d-xxl-block">        </span> <span class="menus_shadow__EkYnQ">                                                                                </span><span class="d-none d-md-block d-lg-none d-xl-block">     </span><span class="d-none d-xl-block">     </span><span class="d-none d-xxl-block">        </span></span><span class="d-none d-md-block d-lg-none d-xl-block d-xxl-block menus_background__qukJD"> </span><span class="d-none d-xxl-block menus_background__qukJD"> </span></span></code></pre><p>If planning to use I2C for the MPU accelerometer, it is also required to set the baud rate to 400000 by: adding/uncommenting <code>dtparam=i2c_arm=on,i2c_arm_baudrate=400000</code> in <code>/boot/config.txt</code> (or <code>/boot/firmware/config.txt</code> in some distros). This should also be automatically be enabled by the hat EEPROM however you can do it manually if you have any problems.</p><h4 id="enabling-1-wire">Enabling 1-wire</h4><p>If you require, you can enable the 1-wire interface by selecting <code>1-Wire</code> under the <code>Interface Options</code> menu.</p><pre class="bg-dark mb-3 p-4 rounded text-light"><code class="code-highlight"><span class="code-line"><span class="d-none d-xxl-block menus_background__qukJD"> </span><span class="d-none d-md-block d-lg-none d-xl-block d-xxl-block menus_background__qukJD"> </span><span class="menus_background__qukJD"><span class="d-none d-md-block d-lg-none d-xl-block">     </span><span class="d-none d-xl-block">     </span><span class="d-none d-xxl-block">        </span><span class="menus_menu__6EDS9">┌─────────┤ <span class="menus_highlight__72Eh0">Raspberry Pi Software Configuration Tool (raspi-config)</span> ├──────────┐</span><span class="menus_shadowtop__2dNtq"> </span><span class="d-none d-md-block d-lg-none d-xl-block">     </span><span class="d-none d-xl-block">     </span><span class="d-none d-xxl-block">        </span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="d-none d-md-block d-lg-none d-xl-block">     </span><span class="d-none d-xl-block">     </span><span class="d-none d-xxl-block">        </span><span class="menus_menu__6EDS9">│                                                                              │</span><span class="menus_shadow__EkYnQ"> </span><span class="d-none d-md-block d-lg-none d-xl-block">     </span><span class="d-none d-xl-block">     </span><span class="d-none d-xxl-block">        </span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="d-none d-md-block d-lg-none d-xl-block">     </span><span class="d-none d-xl-block">     </span><span class="d-none d-xxl-block">        </span><span class="menus_menu__6EDS9">│    I1 SSH         Enable/disable remote command line access using SSH        │</span><span class="menus_shadow__EkYnQ"> </span><span class="d-none d-md-block d-lg-none d-xl-block">     </span><span class="d-none d-xl-block">     </span><span class="d-none d-xxl-block">        </span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="d-none d-md-block d-lg-none d-xl-block">     </span><span class="d-none d-xl-block">     </span><span class="d-none d-xxl-block">        </span><span class="menus_menu__6EDS9">│    I2 RPi Connect Enable/disable Raspberry Pi Connect                        │</span><span class="menus_shadow__EkYnQ"> </span><span class="d-none d-md-block d-lg-none d-xl-block">     </span><span class="d-none d-xl-block">     </span><span class="d-none d-xxl-block">        </span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="d-none d-md-block d-lg-none d-xl-block">     </span><span class="d-none d-xl-block">     </span><span class="d-none d-xxl-block">        </span><span class="menus_menu__6EDS9">│    I3 VNC         Enable/disable graphical remote desktop access             │</span><span class="menus_shadow__EkYnQ"> </span><span class="d-none d-md-block d-lg-none d-xl-block">     </span><span class="d-none d-xl-block">     </span><span class="d-none d-xxl-block">        </span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="d-none d-md-block d-lg-none d-xl-block">     </span><span class="d-none d-xl-block">     </span><span class="d-none d-xxl-block">        </span><span class="menus_menu__6EDS9">│    I4 SPI         Enable/disable automatic loading of SPI kernel module      │</span><span class="menus_shadow__EkYnQ"> </span><span class="d-none d-md-block d-lg-none d-xl-block">     </span><span class="d-none d-xl-block">     </span><span class="d-none d-xxl-block">        </span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="d-none d-md-block d-lg-none d-xl-block">     </span><span class="d-none d-xl-block">     </span><span class="d-none d-xxl-block">        </span><span class="menus_menu__6EDS9">│    I5 I2C         Enable/disable automatic loading of I2C kernel module      │</span><span class="menus_shadow__EkYnQ"> </span><span class="d-none d-md-block d-lg-none d-xl-block">     </span><span class="d-none d-xl-block">     </span><span class="d-none d-xxl-block">        </span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="d-none d-md-block d-lg-none d-xl-block">     </span><span class="d-none d-xl-block">     </span><span class="d-none d-xxl-block">        </span><span class="menus_menu__6EDS9">│    I6 Serial Port Enable/disable shell messages on the serial connection     │</span><span class="menus_shadow__EkYnQ"> </span><span class="d-none d-md-block d-lg-none d-xl-block">     </span><span class="d-none d-xl-block">     </span><span class="d-none d-xxl-block">        </span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="d-none d-md-block d-lg-none d-xl-block">     </span><span class="d-none d-xl-block">     </span><span class="d-none d-xxl-block">        </span><span class="menus_menu__6EDS9">│    <span class="menus_selected__AuxGm">I7 1-Wire      Enable/disable one-wire interface                     </span>     │</span><span class="menus_shadow__EkYnQ"> </span><span class="d-none d-md-block d-lg-none d-xl-block">     </span><span class="d-none d-xl-block">     </span><span class="d-none d-xxl-block">        </span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="d-none d-md-block d-lg-none d-xl-block">     </span><span class="d-none d-xl-block">     </span><span class="d-none d-xxl-block">        </span><span class="menus_menu__6EDS9">│    I8 Remote GPIO Enable/disable remote access to GPIO pins                  │</span><span class="menus_shadow__EkYnQ"> </span><span class="d-none d-md-block d-lg-none d-xl-block">     </span><span class="d-none d-xl-block">     </span><span class="d-none d-xxl-block">        </span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="d-none d-md-block d-lg-none d-xl-block">     </span><span class="d-none d-xl-block">     </span><span class="d-none d-xxl-block">        </span><span class="menus_menu__6EDS9">│                                                                              │</span><span class="menus_shadow__EkYnQ"> </span><span class="d-none d-md-block d-lg-none d-xl-block">     </span><span class="d-none d-xl-block">     </span><span class="d-none d-xxl-block">        </span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="d-none d-md-block d-lg-none d-xl-block">     </span><span class="d-none d-xl-block">     </span><span class="d-none d-xxl-block">        </span><span class="menus_menu__6EDS9">│                                                                              │</span><span class="menus_shadow__EkYnQ"> </span><span class="d-none d-md-block d-lg-none d-xl-block">     </span><span class="d-none d-xl-block">     </span><span class="d-none d-xxl-block">        </span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="d-none d-md-block d-lg-none d-xl-block">     </span><span class="d-none d-xl-block">     </span><span class="d-none d-xxl-block">        </span><span class="menus_menu__6EDS9">│                                                                              │</span><span class="menus_shadow__EkYnQ"> </span><span class="d-none d-md-block d-lg-none d-xl-block">     </span><span class="d-none d-xl-block">     </span><span class="d-none d-xxl-block">        </span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="d-none d-md-block d-lg-none d-xl-block">     </span><span class="d-none d-xl-block">     </span><span class="d-none d-xxl-block">        </span><span class="menus_menu__6EDS9">│                                                                              │</span><span class="menus_shadow__EkYnQ"> </span><span class="d-none d-md-block d-lg-none d-xl-block">     </span><span class="d-none d-xl-block">     </span><span class="d-none d-xxl-block">        </span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="d-none d-md-block d-lg-none d-xl-block">     </span><span class="d-none d-xl-block">     </span><span class="d-none d-xxl-block">        </span><span class="menus_menu__6EDS9">│                                                                              │</span><span class="menus_shadow__EkYnQ"> </span><span class="d-none d-md-block d-lg-none d-xl-block">     </span><span class="d-none d-xl-block">     </span><span class="d-none d-xxl-block">        </span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="d-none d-md-block d-lg-none d-xl-block">     </span><span class="d-none d-xl-block">     </span><span class="d-none d-xxl-block">        </span><span class="menus_menu__6EDS9">│                     &lt;Select&gt;                     &lt;Back&gt;                      │</span><span class="menus_shadow__EkYnQ"> </span><span class="d-none d-md-block d-lg-none d-xl-block">     </span><span class="d-none d-xl-block">     </span><span class="d-none d-xxl-block">        </span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="d-none d-md-block d-lg-none d-xl-block">     </span><span class="d-none d-xl-block">     </span><span class="d-none d-xxl-block">        </span><span class="menus_menu__6EDS9">│                                                                              │</span><span class="menus_shadow__EkYnQ"> </span><span class="d-none d-md-block d-lg-none d-xl-block">     </span><span class="d-none d-xl-block">     </span><span class="d-none d-xxl-block">        </span></span></span><span class="code-line"><span class="menus_background__qukJD"><span class="d-none d-md-block d-lg-none d-xl-block">     </span><span class="d-none d-xl-block">     </span><span class="d-none d-xxl-block">        </span><span class="menus_menu__6EDS9">└──────────────────────────────────────────────────────────────────────────────┘</span><span class="menus_shadow__EkYnQ"> </span><span class="d-none d-md-block d-lg-none d-xl-block">     </span><span class="d-none d-xl-block">     </span><span class="d-none d-xxl-block">        </span></span><span class="menus_background__qukJD"><span class="d-none d-md-block d-lg-none d-xl-block">     </span><span class="d-none d-xl-block">     </span><span class="d-none d-xxl-block">        </span> <span class="menus_shadow__EkYnQ">                                                                                </span><span class="d-none d-md-block d-lg-none d-xl-block">     </span><span class="d-none d-xl-block">     </span><span class="d-none d-xxl-block">        </span></span><span class="d-none d-md-block d-lg-none d-xl-block d-xxl-block menus_background__qukJD"> </span><span class="d-none d-xxl-block menus_background__qukJD"> </span></span></code></pre><p>you can then find any conneted sensors serial numbers with: <code>ls /sys/bus/w1/devices/</code></p><h3 id="optional-identify-the-correct-gpiochip">Optional: Identify the correct gpiochip</h3><p>To install the Linux GPIO character device:</p><pre class="language-sh"><code class="language-sh code-highlight"><span class="code-line"><span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> gpiod
</span></code></pre><p>To check available gpiochip run:</p><pre class="language-sh"><code class="language-sh code-highlight"><span class="code-line">gpiodetect
</span></code></pre><p>To check the pin number and the pin availability run:</p><pre class="language-sh"><code class="language-sh code-highlight"><span class="code-line">gpioinfo
</span></code></pre><h3 id="optional-hardware-pwm">Optional: Hardware PWM</h3><p>Raspberry Pi&#x27;s have two PWM channels (PWM0 and PWM1) which are exposed on the header or if not, can be routed to existing gpio pins. The Linux mcu daemon uses the pwmchip sysfs interface to control hardware pwm devices on Linux hosts. The pwm sysfs interface is not exposed by default on a Raspberry and can be activated by adding a line to <code>/boot/config.txt</code>:</p><pre class="language-ini"><code class="language-ini code-highlight"><span class="code-line"><span class="token comment"># Enable pwmchip sysfs interface</span>
</span><span class="code-line"><span class="token key attr-name">dtoverlay</span><span class="token punctuation">=</span><span class="token value attr-value">pwm,pin=12,func=4</span>
</span></code></pre><p>This example enables only PWM0 and routes it to gpio12. If both PWM channels need to be enabled you can use <code>pwm-2chan</code>:</p><pre class="language-ini"><code class="language-ini code-highlight"><span class="code-line"><span class="token comment"># Enable pwmchip sysfs interface</span>
</span><span class="code-line"><span class="token key attr-name">dtoverlay</span><span class="token punctuation">=</span><span class="token value attr-value">pwm-2chan,pin=12,pin2=13,func=4,func2=4</span>
</span></code></pre><p>The overlay does not expose the pwm line on sysfs on boot and needs to be exported by echo&#x27;ing the number of the pwm channel to <code>/sys/class/pwm/pwmchip0/export</code>:</p><pre class="language-sh"><code class="language-sh code-highlight"><span class="code-line"><span class="token comment"># Enable pwmchip sysfs interface</span>
</span><span class="code-line"><span class="token builtin class-name">echo</span> <span class="token number">0</span> <span class="token operator">&gt;</span> /sys/class/pwm/pwmchip0/export
</span></code></pre><p>If you have enabled <code>pwm-2chan</code> you can enable PWM1 too with:</p><pre class="language-sh"><code class="language-sh code-highlight"><span class="code-line"><span class="token comment"># Enable pwmchip sysfs interface</span>
</span><span class="code-line"><span class="token builtin class-name">echo</span> <span class="token number">0</span> <span class="token operator">&gt;</span> /sys/class/pwm/pwmchip0/export
</span><span class="code-line"><span class="token builtin class-name">echo</span> <span class="token number">1</span> <span class="token operator">&gt;</span> /sys/class/pwm/pwmchip0/export
</span></code></pre><p>This will create device <code>/sys/class/pwm/pwmchip0/pwm0</code> and optionally <code>/sys/class/pwm/pwmchip0/pwm1</code> in the filesystem. The easiest way to do this is by adding them to <code>/etc/rc.local</code> before the <code>exit 0</code> line.</p><p>With the sysfs in place, you can now use either the pwm channel(s) by adding the following piece of configuration to your board&#x27;s config file:</p><pre class="language-ini"><code class="language-ini code-highlight"><span class="code-line"><span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">fan_generic fan1</span><span class="token punctuation">]</span></span>
</span><span class="code-line"><span class="token key attr-name">pin</span><span class="token punctuation">=</span><span class="token value attr-value">rpi:pwmchip0/pwm0</span>
</span><span class="code-line"><span class="token key attr-name">pwm</span><span class="token punctuation">=</span><span class="token value attr-value">True</span>
</span><span class="code-line"><span class="token key attr-name">hardware_pwm</span><span class="token punctuation">=</span><span class="token value attr-value">True</span>
</span><span class="code-line"><span class="token key attr-name">cycle_time</span><span class="token punctuation">=</span><span class="token value attr-value">0.000001</span>
</span></code></pre><p>This will add hardware pwm control to gpio12 on the Pi (because the overlay was configured to route pwm0 to pin=12).</p><p>PWM0 can be routed to gpio12 and gpio18, PWM1 can be routed to gpio13 and gpio19:</p><div class="table-responsive"><table class="table table-sm table-bordered table-striped table-hover"><thead><tr><th>PWM</th><th>gpio PIN</th><th>Func</th></tr></thead><tbody><tr><td>0</td><td>12</td><td>4</td></tr><tr><td>0</td><td>18</td><td>2</td></tr><tr><td>1</td><td>13</td><td>4</td></tr><tr><td>1</td><td>19</td><td>2</td></tr></tbody></table></div><h2 id="create-flash-mcu-convenience-script">Create Flash MCU Convenience Script</h2><pre class="language-sh"><code class="language-sh code-highlight"><span class="code-line"><span class="token function">nano</span> flash-mcu.sh
</span><span class="code-line"><span class="token function">chmod</span> +x flash-mcu.sh
</span><span class="code-line">./flash-mcu.sh
</span></code></pre><p>Example:</p><pre class="language-sh"><code class="language-sh code-highlight"><span class="code-line"><span class="token builtin class-name">cd</span> ~/klipper/
</span><span class="code-line"><span class="token function">make</span> clean
</span><span class="code-line"><span class="token builtin class-name">read</span> <span class="token parameter variable">-p</span> <span class="token string">&quot;Press Enter to configure RPI MCU&quot;</span> <span class="token operator">&lt;</span>/dev/tty
</span><span class="code-line"><span class="token function">make</span> menuconfig <span class="token assign-left variable">KCONFIG_CONFIG</span><span class="token operator">=</span>config.rpi
</span><span class="code-line"><span class="token function">cp</span> config.rpi <span class="token punctuation">..</span>/printer_data/config/Firmware/
</span><span class="code-line"><span class="token builtin class-name">echo</span> <span class="token string">&quot;Flashing RPI MCU&quot;</span>
</span><span class="code-line"><span class="token function">sudo</span> <span class="token function">service</span> klipper stop
</span><span class="code-line"><span class="token function">make</span> flash <span class="token assign-left variable">KCONFIG_CONFIG</span><span class="token operator">=</span>config.rpi
</span><span class="code-line"><span class="token function">sudo</span> <span class="token function">service</span> klipper start
</span></code></pre><h2 id="resonance-compensation">Resonance Compensation</h2><p>Get the most up to date info on the <a href="https://www.klipper3d.org/Measuring_Resonances.html" rel="noopener noreferrer" target="_blank">official page</a></p><pre class="language-sh"><code class="language-sh code-highlight"><span class="code-line"><span class="token function">sudo</span> <span class="token function">apt</span> update
</span><span class="code-line"><span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> python3-numpy python3-matplotlib libatlas-base-dev libopenblas-dev
</span><span class="code-line">~/klippy-env/bin/pip <span class="token function">install</span> <span class="token parameter variable">-v</span> <span class="token string">&quot;numpy&lt;1.26&quot;</span>
</span></code></pre><p>Then check no errors from the command:</p><pre class="language-sh"><code class="language-sh code-highlight"><span class="code-line">~/klippy-env/bin/python <span class="token parameter variable">-c</span> <span class="token string">&#x27;import numpy;&#x27;</span>
</span></code></pre><h2 id="setup-crowsnest">Setup Crowsnest</h2><p>Get the most up to date info on the <a href="https://crowsnest.mainsail.xyz/configuration/cam-section" rel="noopener noreferrer" target="_blank">official page</a>.</p><h2 id="fix-for-reprapdiscount-128x64-full-graphic-smart-controller">Fix for RepRapDiscount 128x64 Full Graphic Smart Controller</h2><p>My Full Graphic Smart Controller Display is showing the same issue as described in the GitHub issue <a href="https://github.com/Klipper3d/klipper/issues/5089" rel="noopener noreferrer" target="_blank">RepRap Display doesn&#x27;t work properly</a></p><pre class="language-sh"><code class="language-sh code-highlight"><span class="code-line"><span class="token builtin class-name">cd</span> ~/klipper/src/
</span><span class="code-line"><span class="token function">mv</span> lcd_st7920.c lcd_st7920.c.bak
</span><span class="code-line"><span class="token function">wget</span> https://github.com/Stout69/For-Klipper/raw/main/lcd_st7920.c
</span><span class="code-line"><span class="token builtin class-name">cd</span> <span class="token punctuation">..</span>/klippy/extras/display/
</span><span class="code-line"><span class="token function">mv</span> st7920.py st7920.py.bak
</span><span class="code-line"><span class="token function">wget</span> https://github.com/Stout69/For-Klipper/raw/main/st7920.py
</span></code></pre><p>Then recompile klipper for the MCU (See above)</p><div class="markdown-alert markdown-alert-warning"><p class="markdown-alert-title"><svg class="octicon octicon-alert mr-2" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M6.457 1.047c.659-1.234 2.427-1.234 3.086 0l6.082 11.378A1.75 1.75 0 0 1 14.082 15H1.918a1.75 1.75 0 0 1-1.543-2.575Zm1.763.707a.25.25 0 0 0-.44 0L1.698 13.132a.25.25 0 0 0 .22.368h12.164a.25.25 0 0 0 .22-.368Zm.53 3.996v2.5a.75.75 0 0 1-1.5 0v-2.5a.75.75 0 0 1 1.5 0ZM9 11a1 1 0 1 1-2 0 1 1 0 0 1 2 0Z"></path></svg>Warning</p><p>I have retried these steps recently, however the problem in the GitHub issue still persists.</p><p>Since Klipper no longer uses GitHub issues for it&#x27;s issue tracker, <a href="https://discord.com/channels/431557959978450984/1412458895254749366/1412458895254749366" rel="noopener noreferrer" target="_blank">I have created a post in config-support Channel on Discord</a>.</p></div><h2 id="klipperscreen-fix">KlipperScreen Fix</h2><p>When installing KlipperScreen via kiauh you may get <a href="https://klipperscreen.readthedocs.io/en/latest/Troubleshooting/VC_ERROR/" rel="noopener noreferrer" target="_blank">Cannot open virtual Console</a> error in the log:</p><pre class="bg-dark mb-3 p-4 rounded text-light"><code class="code-highlight"><span class="code-line">xf86OpenConsole: Cannot open virtual console 2 (Permission denied)
</span></code></pre><p>To fix this run the following:</p><pre class="language-sh"><code class="language-sh code-highlight"><span class="code-line"><span class="token function">cat</span> /etc/X11/Xwrapper.config
</span></code></pre><p>This should have the line <code>allowed_users=anybody</code> in it.</p><p>Next run:</p><pre class="language-sh"><code class="language-sh code-highlight"><span class="code-line"><span class="token function">cat</span> /etc/group <span class="token operator">|</span> <span class="token function">grep</span> <span class="token function">tty</span>
</span></code></pre><p>If your username is not listed under that line, you need to add it with the following command:</p><pre class="language-sh"><code class="language-sh code-highlight"><span class="code-line"><span class="token function">usermod</span> <span class="token parameter variable">-a</span> <span class="token parameter variable">-G</span> <span class="token function">tty</span> <span class="token environment constant">$USER</span>
</span></code></pre><p>Add <code>needs_root_rights=yes</code> to <code>/etc/X11/Xwrapper.config</code>:</p><pre class="language-sh"><code class="language-sh code-highlight"><span class="code-line"><span class="token function">sudo</span> <span class="token function">bash</span> <span class="token parameter variable">-c</span> <span class="token string">&quot;echo needs_root_rights=yes&gt;&gt;/etc/X11/Xwrapper.config&quot;</span>
</span><span class="code-line"><span class="token function">sudo</span> <span class="token function">service</span> KlipperScreen restart
</span><span class="code-line">systemctl status KlipperScreen
</span></code></pre></div><div class="col-lg-4"><div class="blog_sidebar__nmDWW position-sticky"><div class="p-4 mb-3 bg-light rounded"><h5>Related Content</h5><ul><li><a href="/projects/printer-voron-0.2">Voron 0.2</a></li><li><a href="/projects/printer-voron-1.8">Voron 1.8</a></li><li><a href="/projects/printer-voron-2.4">Voron 2.4</a></li><li><a href="/projects/printer-am8">AM8 Switchwire</a></li><li><a href="/projects/single-board-computers">Single Board Computers</a></li></ul><h5>Elsewhere</h5><ul><li><a href="/projects/printer">Anet A8</a></li><li><a href="/projects/printer-rook">Rook 2020</a></li><li><a href="/projects/printer-voron-0.2">Voron 0.2</a></li><li><a href="/projects/printer-voron-1.8">Voron 1.8</a></li><li><a href="/projects/printer-voron-2.4">Voron 2.4</a></li><li><a href="/projects/printer-polyformer">Polyformer</a></li><li><a href="/projects/3d-lab-print-piper-cub">3D LabPrint Piper Cub</a></li><li><a href="/projects/3d-sets-landy">3D Sets Landy</a></li><li><a href="/projects/openrc-f1">OpenRC F1</a></li><li><a href="/projects/openrc-truggy">OpenRC Truggy</a></li><li><a href="/projects/openrc-mini-quad">OpenRC Mini Quad</a></li><li><a href="/projects/knick-knacks">Knick Knacks</a></li><li><a href="/projects/fallout-wasteland-warfare">Fallout: Wasteland Warfare</a></li><li><a href="/projects/guitar">Guitar</a></li><li><a href="/projects/eurorack-modular-synth">Eurorack Modular Synth</a></li><li><a href="/projects/printer-klipper-fan-hat">Klipper Fan Hat</a></li><li><a href="/projects/homelab">Homelab</a></li><li><a href="/projects/cameras">Cameras</a></li><li><a href="/projects/horology">Horology</a></li></ul><h5>External Links</h5><ul><li><a href="https://www.klipper3d.org/" rel="noopener noreferrer" target="_blank">https://www.klipper3d.org/<!-- --> <svg data-prefix="fas" data-icon="link" class="svg-inline--fa fa-link" role="img" viewBox="0 0 576 512" aria-hidden="true"><path fill="currentColor" d="M419.5 96c-16.6 0-32.7 4.5-46.8 12.7-15.8-16-34.2-29.4-54.5-39.5 28.2-24 64.1-37.2 101.3-37.2 86.4 0 156.5 70 156.5 156.5 0 41.5-16.5 81.3-45.8 110.6l-71.1 71.1c-29.3 29.3-69.1 45.8-110.6 45.8-86.4 0-156.5-70-156.5-156.5 0-1.5 0-3 .1-4.5 .5-17.7 15.2-31.6 32.9-31.1s31.6 15.2 31.1 32.9c0 .9 0 1.8 0 2.6 0 51.1 41.4 92.5 92.5 92.5 24.5 0 48-9.7 65.4-27.1l71.1-71.1c17.3-17.3 27.1-40.9 27.1-65.4 0-51.1-41.4-92.5-92.5-92.5zM275.2 173.3c-1.9-.8-3.8-1.9-5.5-3.1-12.6-6.5-27-10.2-42.1-10.2-24.5 0-48 9.7-65.4 27.1L91.1 258.2c-17.3 17.3-27.1 40.9-27.1 65.4 0 51.1 41.4 92.5 92.5 92.5 16.5 0 32.6-4.4 46.7-12.6 15.8 16 34.2 29.4 54.6 39.5-28.2 23.9-64 37.2-101.3 37.2-86.4 0-156.5-70-156.5-156.5 0-41.5 16.5-81.3 45.8-110.6l71.1-71.1c29.3-29.3 69.1-45.8 110.6-45.8 86.6 0 156.5 70.6 156.5 156.9 0 1.3 0 2.6 0 3.9-.4 17.7-15.1 31.6-32.8 31.2s-31.6-15.1-31.2-32.8c0-.8 0-1.5 0-2.3 0-33.7-18-63.3-44.8-79.6z"></path></svg></a></li></ul></div></div></div></div></div></article></div></main></div><div class="container"><footer class="d-flex flex-wrap py-3 border-top text-muted"><div class="d-flex align-items-center col">© 2016-<!-- -->2025<!-- --> Mike Thomas, All rights reserved.</div><div class="d-flex justify-content-end col"><a href="/projects/printer-klipper-firmware#__next">Back to top</a></div></footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"slug":"printer-klipper-firmware","related":["/projects/printer-voron-0.2","/projects/printer-voron-1.8","/projects/printer-voron-2.4","/projects/printer-am8","/projects/single-board-computers"],"external":["https://www.klipper3d.org/"],"title":"Klipper Firmware","heading":"Configuring the software to run a 3D Printer","date":"2025-08-29T22:45:11.067Z","preview":"/assets/blog/printer-klipper-firmware/klipper-firmware-hero.jpg","author":{"name":"Mike Thomas","picture":"/assets/authors/mike.jpg"},"description":"Configuring MainsailOS with all the software to run Klipper on my 3D Printer.","tags":["Raspberry Pi"],"categories":[],"keywords":["Klipper"],"promoted":false,"content":"\n# Table of contents\n\n# MainsailOS\n\nAs Mainsail is my Klipper UI of choice I use [MainsailOS 2.1.0](https://docs-os.mainsail.xyz/) for my printers as many of the tools come installed by default.\n\n# Update APT Repositories\n\nOne of the first things I do when setting up a new machine is to update apt to use the [Nexus repository](thinkcenter#sonatype-nexus-repository) to avoid downloading updates multiple times over the internet.\n\n```sh\nsudo nano /etc/apt/auth.conf.d/nexus.mikethomas.info.conf\nsudo nano /etc/apt/sources.list\nsudo nano /etc/apt/sources.list.d/raspi.list\n```\n\n# Klipper MOTD\n\nThis adds a nice splash screen to the console that is really useful when logging into the printer via SSH.\n\n```sh\ngit clone https://www.github.com/tomaski/klipper-motd.git\nchmod +x ./klipper-motd/setup.sh\nsudo ./klipper-motd/setup.sh --install\n```\n\n1. Enter `Y` to add update check to dashboard\n\n```sh\nsudo motd-config\n```\n\n2. Select `OS Flavor` (Option 1)\n3. Select theme you would like to use\n\n# Kiauh\n\nKiauh stands for \"Klipper Installation And Update Helper\" it is a set of scripts making it easier to set up the tools required for Klipper.\n\n```sh\ngit clone https://github.com/dw-0/kiauh.git\n./kiauh/kiauh.sh\n```\n\n## Install KlipperScreen\n\n1. Select `Install` (Option 1)\n2. Select `KlipperScreen` (Option 5)\n3. Press Enter to install as service (Default)\n4. Press Enter to use Xserver (Default)\n5. Press Enter to install NetworkManager (Default)\n\n## Install PrettyGCode\n\n1. Select `Install` (Option 1)\n2. Select `PrettyGCode` (Option 7)\n3. Press Enter to use port 7136 (Default)\n\n# LDO Installer\n\nThe LDO Installer sets up the printer configurations specifically for LDO Motors printer kits. It also has a nice option to create a splash screen for KlipperScreen whilst the printer is booting up.\n\n```sh\ngit clone https://github.com/MotorDynamicsLab/LDOInstaller.git\n./LDOInstaller/LDOInstaller.sh\n```\n\n1. Select LDO Kit you have\n2. Select printer size you have\n3. Select `Splash Screen` (Option 7)\n4. Select `Install` (Option 1)\n\n# CandleLight Firmware\n\nCandleLight Firmware is used for many boards connect the USB port of Raspberry Pi to CAN bus for 3D printing boards such as the [BigTreeTech U2C](https://github.com/bigtreetech/U2C).\n\n```sh\ngit clone https://github.com/candle-usb/candleLight_fw\ncd ~/candleLight_fw/\nsudo apt install gcc-arm-none-eabi\nmkdir build\ncd build\ncmake .. -DCMAKE_TOOLCHAIN_FILE=../cmake/gcc-arm-none-eabi-8-2019-q3-update.cmake\nmake candleLight_fw -j4\nsudo dfu-util -a 0 -D ./candleLight_fw.bin --dfuse-address 0x08000000:force:mass-erase:leave -d 0483:df11\n```\n\nCreate `/etc/network/interfaces.d/can0`:\n\n```\nallow-hotplug can0\niface can0 can static\n    bitrate 1000000\n    up ifconfig $IFACE txqueuelen 128\n```\n\n```sh\nsudo reboot\n~/klippy-env/bin/python ~/klipper/scripts/canbus_query.py can0\nip -s link show can0\n```\n\n# Katapult (formerly known as CanBoot)\n\n[Katapult](https://github.com/Arksine/katapult) is a bootloader mainly for MCUs that use CAN bus, however it now also supports USB and UART interfaces.\n\nWe will check out the code now ready for use when we flash Klipper to the MCUs in the next section as not all boards will use it.\n\n```sh\ngit clone https://github.com/Arksine/katapult\n```\n\n# Flash Klipper to MCU\n\nFlashing the Klipper firmware to the MCU can be slightly different depending on the type of Micro-controller architecture that the MCU uses.\n\nThe basic firmware flashing steps are as follows:\n\n```sh\ncd ~/klipper/\nmake clean\nmake menuconfig\nmake\n```\n\nHowever, as I have many different controllers I have opted to use the `KCONFIG_CONFIG` method of configuring allowing me to save the multiple configs so they can be easily reused when I need to update the firmware.\n\nYou can find the configs used in the sections below in my [Klipper Config Firmware Repository](https://github.com/mikepthomas/klipper_config/tree/main/Firmware).\n\n## Anet A8\n\nThis is the board that originally came with [my first 3D printer](printer).\n\n### Klipper Firmware Configuration\n\n#### USB\n\n```sh\ncd ~/klipper/\nmake clean\nmake menuconfig KCONFIG_CONFIG=config.anet_a8\n```\n\nSet the following configuration:\n\n```\n(Top)\n                         Klipper Firmware Configuration\n[ ] Enable extra low-level configuration options\n    Micro-controller Architecture (Atmega AVR)  ---\u003e\n    Processor model (atmega1284p)  ---\u003e\n[Space/Enter] Toggle/enter      [?] Help            [/] Search\n[Q] Quit (prompts for save)     [ESC] Leave menu\n```\n\nBackup config, Build and Flash to the board:\n\n```sh\ncp config.anet_a8 ../printer_data/config/Firmware/\nmake KCONFIG_CONFIG=config.anet_a8 -j4\navrdude -p atmega1284p -c arduino -b 57600 -P /dev/serial/by-id/usb-1a86_USB2.0-Serial-if00-port0 -U out/klipper.elf.hex\n```\n\n## Arduino Mega\n\nUsed by [RAMPS Shield](https://reprap.org/wiki/RAMPS_1.6).\n\n### Klipper Firmware Configuration\n\n#### USB\n\n```sh\ncd ~/klipper/\nmake clean\nmake menuconfig KCONFIG_CONFIG=config.arduino_mega\n```\n\nSet the following configuration:\n\n```\n(Top)\n                         Klipper Firmware Configuration\n[ ] Enable extra low-level configuration options\n    Micro-controller Architecture (Atmega AVR)  ---\u003e\n    Processor model (atmega2560)  ---\u003e\n[Space/Enter] Toggle/enter      [?] Help            [/] Search\n[Q] Quit (prompts for save)     [ESC] Leave menu\n```\n\nBackup config, Build and Flash to the board:\n\n```sh\ncp config.arduino_mega ../printer_data/config/Firmware/\nmake KCONFIG_CONFIG=config.arduino_mega -j4\nmake KCONFIG_CONFIG=config.arduino_mega flash FLASH_DEVICE=/dev/serial/by-id/usb-1a86_USB_Serial-if00-port0\n```\n\n## Arduino Uno\n\nUsed by [Arduino CNC Shield](https://all3dp.com/2/arduino-cnc-shield/).\n\n### Klipper Firmware Configuration\n\n#### USB\n\n```sh\ncd ~/klipper/\nmake clean\nmake menuconfig KCONFIG_CONFIG=config.arduino_uno\n```\n\nSet the following configuration:\n\n```\n(Top)\n                         Klipper Firmware Configuration\n[ ] Enable extra low-level configuration options\n    Micro-controller Architecture (Atmega AVR)  ---\u003e\n    Processor model (atmega328p)  ---\u003e\n    Optional features (to reduce code size)  ---\u003e\n[Space/Enter] Toggle/enter      [?] Help            [/] Search\n[Q] Quit (prompts for save)     [ESC] Leave menu\n```\n\nAs the firmware is too large to fit in the supplied flash, we also need to disable some features:\n\n```\n(Top) → Optional features (to reduce code size)\n                         Klipper Firmware Configuration\n[*] Support micro-controller based ADC (analog to digital)\n[ ] Support communicating with external chips via SPI bus\n[ ] Support communicating with external chips via I2C bus\n[*] Support hardware PWM (pulse width modulation)\n[*] Support GPIO based button reading\n[ ] Support Trinamic stepper motor driver UART communication\n[ ] Support 'neopixel' type LED control\n[ ] Support measuring fan tachometer GPIO pins\n    *** LCD chips ***\n[*] Support ST7920 LCD display\n[*] Support HD44780 LCD display\n    *** External ADC type chips ***\n[ ] Support HX711 and HX717 ADC chips\n[Space/Enter] Toggle/enter      [?] Help            [/] Search\n[Q] Quit (prompts for save)     [ESC] Leave menu\n```\n\nBackup config, Build and Flash to the board:\n\n```sh\ncp config.arduino_uno ../printer_data/config/Firmware/\nmake KCONFIG_CONFIG=config.arduino_uno -j4\nmake KCONFIG_CONFIG=config.arduino_uno flash FLASH_DEVICE=/dev/serial/by-id/usb-1a86_USB2.0-Serial-if00-port0\n```\n\n## Easy BRD\n\nGet the most up to date info on the [official page](https://github.com/Tircown/ERCF-easy-brd).\n\nThis board will be used for the [6 channel Enraged Rabbit Carrot Feeder V1.1](enraged-rabbit-carrot-feeder-1.1).\n\n### Klipper Firmware Configuration\n\n#### USB\n\n```sh\ncd ~/klipper/\nmake clean\nmake menuconfig KCONFIG_CONFIG=config.easy_brd\n```\n\nSet the following configuration:\n\n```\n(Top)\n                         Klipper Firmware Configuration\n[ ] Enable extra low-level configuration options\n    Micro-controller Architecture (SAMC21/SAMD21/SAMD51/SAME5x)  ---\u003e\n    Processor model (SAMD21G18)  ---\u003e\n    Bootloader offset (8KiB bootloader)  ---\u003e\n    Clock Reference (Internal clock)  ---\u003e\n    Communication interface (USB)  ---\u003e\n[Space/Enter] Toggle/enter      [?] Help            [/] Search\n[Q] Quit (prompts for save)     [ESC] Leave menu\n```\n\nBackup config, Build and Flash to the board:\n\n```sh\ncp config.easy_brd ../printer_data/config/Firmware/\nmake KCONFIG_CONFIG=config.easy_brd -j4\nsudo apt install bossa-cli\nsudo bossac -i -d -p /dev/ttyACM0 -e -w -v -R --offset=0x2000 out/klipper.bin\n```\n\n## EBB SB2240 CAN V1.0\n\nGet the most up to date info on the [official page](https://github.com/bigtreetech/docs/blob/master/docs/EBB%202240%202209%20CAN.md).\n\nThis board will be used for the [Stealthburner](voron-stealthburner) on the [Voron 2.4](printer-voron-2.4) when I upgrade to CAN.\n\n### Katapult Configuration\n\n#### CAN Bus\n\n```sh\ncd ~/katapult/\nmake clean\nmake menuconfig KCONFIG_CONFIG=config.sb2240_can_katapult\ncp config.sb2240_can_katapult ../printer_data/config/Firmware/\nmake KCONFIG_CONFIG=config.sb2240_can_katapult -j4\nsudo dfu-util -a 0 -d 0483:df11 -s 0x08000000:mass-erase:force -D ~/katapult/out/katapult.bin\n```\n\n```\n(Top)\n                         Katapult Configuration\n    Micro-controller Architecture (STMicroelectronics STM32)  ---\u003e\n    Processor model (STM32G0B1)  ---\u003e\n    Build Katapult deployment application (Do not build)  ---\u003e\n    Clock Reference (8 MHz crystal)  ---\u003e\n    Communication interface (CAN bus (on PB0/PB1))  ---\u003e\n    Application start offset (8KiB offset)  ---\u003e\n(1000000) CAN bus speed\n()  GPIO pins to set on bootloader entry\n[*] Support bootloader entry on rapid double click of reset button\n[ ] Enable bootloader entry on button (or gpio) state\n[*] Enable Status LED\n(PA13)  Status LED GPIO Pin\n[Space/Enter] Toggle/enter      [?] Help            [/] Search\n[Q] Quit (prompts for save)     [ESC] Leave menu\n```\n\n#### USB\n\n```sh\ncd ~/katapult/\nmake clean\nmake menuconfig KCONFIG_CONFIG=config.sb2240_katapult\ncp config.sb2240_katapult ../printer_data/config/Firmware/\nmake KCONFIG_CONFIG=config.sb2240_katapult -j4\nsudo dfu-util -a 0 -d 0483:df11 -s 0x08000000:mass-erase:force -D ~/katapult/out/katapult.bin\n```\n\n```\n(Top)\n                         Katapult Configuration\n    Micro-controller Architecture (STMicroelectronics STM32)  ---\u003e\n    Processor model (STM32G0B1)  ---\u003e\n    Build Katapult deployment application (Do not build)  ---\u003e\n    Clock Reference (8 MHz crystal)  ---\u003e\n    Communication interface (USB (on PA11/PA12))  ---\u003e\n    Application start offset (8KiB offset)  ---\u003e\n    USB ids  ---\u003e\n()  GPIO pins to set on bootloader entry\n[*] Support bootloader entry on rapid double click of reset button\n[ ] Enable bootloader entry on button (or gpio) state\n[*] Enable Status LED\n(PA13)  Status LED GPIO Pin\n[Space/Enter] Toggle/enter      [?] Help            [/] Search\n[Q] Quit (prompts for save)     [ESC] Leave menu\n```\n\n### Klipper Firmware Configuration\n\n#### CAN Bus\n\n```sh\ncd ~/klipper/\nmake clean\nmake menuconfig KCONFIG_CONFIG=config.sb2240_can_klipper\ncp config.sb2240_can_klipper ../printer_data/config/Firmware/\nmake KCONFIG_CONFIG=config.sb2240_can_klipper -j4\nmake KCONFIG_CONFIG=config.sb2240_can_klipper flash FLASH_DEVICE=1209:beba\n```\n\n```\n(Top)\n                         Klipper Firmware Configuration\n[*] Enable extra low-level configuration options\n    Micro-controller Architecture (STMicroelectronics STM32)  ---\u003e\n    Processor model (STM32G0B1)  ---\u003e\n    Bootloader offset (8KiB bootloader)  ---\u003e\n    Clock Reference (8 MHz crystal)  ---\u003e\n    Communication interface (CAN bus (on PB0/PB1))  ---\u003e\n(1000000) CAN bus speed\n[*] Optimize stepper code for 'step on both edges'\n()  GPIO pins to set at micro-controller startup\n[Space/Enter] Toggle/enter      [?] Help            [/] Search\n[Q] Quit (prompts for save)     [ESC] Leave menu\n```\n\n#### USB\n\n```sh\ncd ~/klipper/\nmake clean\nmake menuconfig KCONFIG_CONFIG=config.sb2240_klipper\ncp config.sb2240_klipper ../printer_data/config/Firmware/\nmake KCONFIG_CONFIG=config.sb2240_klipper -j4\nmake KCONFIG_CONFIG=config.sb2240_klipper flash FLASH_DEVICE=/dev/serial/by-id/usb-Klipper_stm32g0b1xx_2C0048000950425539393020-if00\n```\n\n```\n(Top)\n                         Klipper Firmware Configuration\n[*] Enable extra low-level configuration options\n    Micro-controller Architecture (STMicroelectronics STM32)  ---\u003e\n    Processor model (STM32G0B1)  ---\u003e\n    Bootloader offset (8KiB bootloader)  ---\u003e\n    Clock Reference (8 MHz crystal)  ---\u003e\n    Communication interface (USB (on PA11/PA12))  ---\u003e\n    USB ids  ---\u003e\n[*] Optimize stepper code for 'step on both edges'\n()  GPIO pins to set at micro-controller startup\n[Space/Enter] Toggle/enter      [?] Help            [/] Search\n[Q] Quit (prompts for save)     [ESC] Leave menu\n```\n\n## EBB36 V1.0\n\nGet the most up to date info on the [official page](\u003chttps://github.com/bigtreetech/EBB/tree/master/EBB%20CAN%20V1.0%20(STM32F072)/EBB36%20CAN%20V1.0\u003e).\n\n### Katapult Configuration\n\n#### USB\n\n```sh\ncd ~/katapult/\nmake clean\nmake menuconfig KCONFIG_CONFIG=config.ebb36_1.0_katapult\ncp config.ebb36_1.0_katapult ../printer_data/config/Firmware/\nmake KCONFIG_CONFIG=config.ebb36_1.0_katapult -j4\nsudo dfu-util -a 0 -D ~/katapult/out/katapult.bin --dfuse-address 0x08000000:force:mass-erase:leave -d 0483:df11\n```\n\n```\n(Top)\n                         Katapult Configuration\n    Micro-controller Architecture (STMicroelectronics STM32)  ---\u003e\n    Processor model (STM32F072)  ---\u003e\n    Build Katapult deployment application (Do not build)  ---\u003e\n    Clock Reference (8 MHz crystal)  ---\u003e\n    Communication interface (USB (on PA11/PA12))  ---\u003e\n    Application start offset (8KiB offset)  ---\u003e\n    USB ids  ---\u003e\n()  GPIO pins to set on bootloader entry\n[*] Support bootloader entry on rapid double click of reset button\n[ ] Enable bootloader entry on button (or gpio) state\n[*] Enable Status LED\n(PA14)  Status LED GPIO Pin\n[Space/Enter] Toggle/enter      [?] Help            [/] Search\n[Q] Quit (prompts for save)     [ESC] Leave menu\n```\n\n### Klipper Firmware Configuration\n\n#### USB\n\n```sh\ncd ~/klipper/\nmake clean\nmake menuconfig KCONFIG_CONFIG=config.ebb36_1.0_klipper\ncp config.ebb36_1.0_klipper ../printer_data/config/Firmware/\nmake KCONFIG_CONFIG=config.ebb36_1.0_klipper -j4\nmake KCONFIG_CONFIG=config.ebb36_1.0_klipper flash FLASH_DEVICE=/dev/serial/by-id/usb-katapult_stm32f072xb_1F003A000857435231343620-if00\n```\n\n```\n(Top)\n                         Klipper Firmware Configuration\n[*] Enable extra low-level configuration options\n    Micro-controller Architecture (STMicroelectronics STM32)  ---\u003e\n    Processor model (STM32F072)  ---\u003e\n    Bootloader offset (8KiB bootloader)  ---\u003e\n    Clock Reference (8 MHz crystal)  ---\u003e\n    Communication interface (USB (on PA11/PA12))  ---\u003e\n    USB ids  ---\u003e\n[*] Optimize stepper code for 'step on both edges'\n()  GPIO pins to set at micro-controller startup\n[Space/Enter] Toggle/enter      [?] Help            [/] Search\n[Q] Quit (prompts for save)     [ESC] Leave menu\n```\n\n## EBB42 V1.1\n\nGet the most up to date info on the [official page](\u003chttps://github.com/bigtreetech/EBB/tree/master/EBB%20CAN%20V1.1%20and%20V1.2%20(STM32G0B1)/EBB42%20CAN%20V1.1%20and%20V1.2\u003e).\n\n### Katapult Configuration\n\n#### USB\n\n```sh\ncd ~/katapult/\nmake clean\nmake menuconfig KCONFIG_CONFIG=config.ebb42_1.1_katapult\ncp config.ebb42_1.1_katapult ../printer_data/config/Firmware/\nmake KCONFIG_CONFIG=config.ebb42_1.1_katapult -j4\nsudo dfu-util -a 0 -D ~/katapult/out/katapult.bin --dfuse-address 0x08000000:force:mass-erase:leave -d 0483:df11\n```\n\n```\n(Top)\n                         Katapult Configuration\n    Micro-controller Architecture (STMicroelectronics STM32)  ---\u003e\n    Processor model (STM32G0B1)  ---\u003e\n    Build Katapult deployment application (Do not build)  ---\u003e\n    Clock Reference (8 MHz crystal)  ---\u003e\n    Communication interface (USB (on PA11/PA12))  ---\u003e\n    Application start offset (8KiB offset)  ---\u003e\n    USB ids  ---\u003e\n()  GPIO pins to set on bootloader entry\n[*] Support bootloader entry on rapid double click of reset button\n[ ] Enable bootloader entry on button (or gpio) state\n[*] Enable Status LED\n(PA13)  Status LED GPIO Pin\n[Space/Enter] Toggle/enter      [?] Help            [/] Search\n[Q] Quit (prompts for save)     [ESC] Leave menu\n```\n\n### Klipper Firmware Configuration\n\n#### USB\n\n```sh\ncd ~/klipper/\nmake clean\nmake menuconfig KCONFIG_CONFIG=config.ebb42_1.1_klipper\ncp config.ebb42_1.1_klipper ../printer_data/config/Firmware/\nmake KCONFIG_CONFIG=config.ebb42_1.1_klipper -j4\nmake KCONFIG_CONFIG=config.ebb42_1.1_klipper flash FLASH_DEVICE=/dev/serial/by-id/usb-katapult_stm32g0b1xx_42004D001650415833323520-if00\n```\n\n```\n(Top)\n                         Klipper Firmware Configuration\n[*] Enable extra low-level configuration options\n    Micro-controller Architecture (STMicroelectronics STM32)  ---\u003e\n    Processor model (STM32G0B1)  ---\u003e\n    Bootloader offset (8KiB bootloader)  ---\u003e\n    Clock Reference (8 MHz crystal)  ---\u003e\n    Communication interface (USB (on PA11/PA12))  ---\u003e\n    USB ids  ---\u003e\n[*] Optimize stepper code for 'step on both edges'\n()  GPIO pins to set at micro-controller startup\n[Space/Enter] Toggle/enter      [?] Help            [/] Search\n[Q] Quit (prompts for save)     [ESC] Leave menu\n```\n\n## Klipper Expander\n\nGet the most up to date info on the [official page](https://github.com/VoronDesign/Voron-Hardware/blob/master/Klipper_Expander/Documentation/Setup_and_Flashing_Guide.md).\n\nThis board is used to control fans on the [Voron 1.8](printer-voron-1.8).\n\n### Klipper Firmware Configuration\n\n#### USB\n\n```sh\ncd ~/klipper/\nmake clean\nmake menuconfig KCONFIG_CONFIG=config.klipper_expander\n```\n\nSet the following configuration:\n\n```\n(Top)\n                         Klipper Firmware Configuration\n[*] Enable extra low-level configuration options\n    Micro-controller Architecture (STMicroelectronics STM32)  ---\u003e\n    Processor model (STM32F042)  ---\u003e\n    Bootloader offset (No bootloader)  ---\u003e\n    Clock Reference (Internal clock)  ---\u003e\n    Communication interface (USB (on PA9/PA10))  ---\u003e\n    USB ids  ---\u003e\n    Optional features (to reduce code size)  ---\u003e\n[*] Optimize stepper code for 'step on both edges'\n()  GPIO pins to set at micro-controller startup\n[Space/Enter] Toggle/enter      [?] Help            [/] Search\n[Q] Quit (prompts for save)     [ESC] Leave menu\n```\n\nAs the firmware is too large to fit in the supplied flash, we also need to disable some features:\n\n```\n(Top) → Optional features (to reduce code size)\n                         Klipper Firmware Configuration\n[*] Support micro-controller based ADC (analog to digital)\n[*] Support communicating with external chips via SPI bus\n[*]     Support software based SPI \"bit-banging\"\n[*] Support communicating with external chips via I2C bus\n[*]     Support software based I2C \"bit-banging\"\n[*] Support GPIO based button reading\n[ ] Support Trinamic stepper motor driver UART communication\n[*] Support 'neopixel' type LED control\n[*] Support measuring fan tachometer GPIO pins\n    *** LCD chips ***\n[*] Support ST7920 LCD display\n[*] Support HD44780 LCD display\n    *** Accelerometer chips ***\n[*] Support adxl accelerometers\n[*] Support lis2dw and lis3dh 3-axis accelerometers\n[*] Support MPU accelerometers\n[*] Support ICM20948 accelerometer\n    *** External ADC type chips ***\n[*] Support thermocouple MAX sensors\n[*] Support HX711 and HX717 ADC chips\n[*] Support ADS 1220 ADC chip\n    *** Other external sensor chips ***\n[ ] Support ldc1612 eddy current sensor\n[ ] Support angle sensors\n[Space/Enter] Toggle/enter      [?] Help            [/] Search\n[Q] Quit (prompts for save)     [ESC] Leave menu\n```\n\nInstall the boot jumper and reset the board to put the board into DFU mode.\n\nBackup config, Build and Flash to the board:\n\n```sh\ncp config.klipper_expander ../printer_data/config/Firmware/\nmake KCONFIG_CONFIG=config.klipper_expander -j4\nmake KCONFIG_CONFIG=config.klipper_expander flash FLASH_DEVICE=0483:df11\n```\n\n## MMB CAN V1.0\n\nGet the most up to date info on the [official page](https://github.com/bigtreetech/MMB).\n\nThis board will be used for the [8 channel Enraged Rabbit Carrot Feeder V2.0](enraged-rabbit-carrot-feeder-2.0).\n\n### Katapult Configuration\n\n#### CAN Bus\n\n```sh\ncd ~/katapult/\nmake clean\nmake menuconfig KCONFIG_CONFIG=config.mmb_can_1.0_can_katapult\ncp config.mmb_can_1.0_can_katapult ../printer_data/config/Firmware/\nmake KCONFIG_CONFIG=config.mmb_can_1.0_can_katapult -j4\n```\n\n```\n(Top)\n                         Katapult Configuration\n    Micro-controller Architecture (STMicroelectronics STM32)  ---\u003e\n    Processor model (STM32G0B1)  ---\u003e\n    Build Katapult deployment application (Do not build)  ---\u003e\n    Clock Reference (8 MHz crystal)  ---\u003e\n    Communication interface (CAN bus (on PB0/PB1))  ---\u003e\n    Application start offset (8KiB offset)  ---\u003e\n(1000000) CAN bus speed\n()  GPIO pins to set on bootloader entry\n[*] Support bootloader entry on rapid double click of reset button\n[ ] Enable bootloader entry on button (or gpio) state\n[ ] Enable Status LED\n[Space/Enter] Toggle/enter      [?] Help            [/] Search\n[Q] Quit (prompts for save)     [ESC] Leave menu\n```\n\n#### USB\n\n```sh\ncd ~/katapult/\nmake clean\nmake menuconfig KCONFIG_CONFIG=config.mmb_can_1.0_katapult\ncp config.mmb_can_1.0_katapult ../printer_data/config/Firmware/\nmake KCONFIG_CONFIG=config.mmb_can_1.0_katapult -j4\n```\n\n```\n(Top)\n                         Katapult Configuration\n    Micro-controller Architecture (STMicroelectronics STM32)  ---\u003e\n    Processor model (STM32G0B1)  ---\u003e\n    Build Katapult deployment application (Do not build)  ---\u003e\n    Clock Reference (8 MHz crystal)  ---\u003e\n    Communication interface (USB (on PA11/PA12))  ---\u003e\n    Application start offset (8KiB offset)  ---\u003e\n    USB ids  ---\u003e\n()  GPIO pins to set on bootloader entry\n[*] Support bootloader entry on rapid double click of reset button\n[ ] Enable bootloader entry on button (or gpio) state\n[ ] Enable Status LED\n[Space/Enter] Toggle/enter      [?] Help            [/] Search\n[Q] Quit (prompts for save)     [ESC] Leave menu\n```\n\n### Klipper Firmware Configuration\n\n#### CAN Bus\n\n```sh\ncd ~/klipper/\nmake clean\nmake menuconfig KCONFIG_CONFIG=config.mmb_can_1.0_can_klipper\ncp config.mmb_can_1.0_can_klipper ../printer_data/config/Firmware/\nmake KCONFIG_CONFIG=config.mmb_can_1.0_can_klipper -j4\n```\n\n```\n(Top)\n                         Klipper Firmware Configuration\n[*] Enable extra low-level configuration options\n    Micro-controller Architecture (STMicroelectronics STM32)  ---\u003e\n    Processor model (STM32G0B1)  ---\u003e\n    Bootloader offset (8KiB bootloader)  ---\u003e\n    Clock Reference (8 MHz crystal)  ---\u003e\n    Communication interface (CAN bus (on PB0/PB1))  ---\u003e\n(1000000) CAN bus speed\n[*] Optimize stepper code for 'step on both edges'\n()  GPIO pins to set at micro-controller startup\n[Space/Enter] Toggle/enter      [?] Help            [/] Search\n[Q] Quit (prompts for save)     [ESC] Leave menu\n```\n\n#### USB\n\n```sh\ncd ~/klipper/\nmake clean\nmake menuconfig KCONFIG_CONFIG=config.mmb_can_1.0_klipper\ncp config.mmb_can_1.0_klipper ../printer_data/config/Firmware/\nmake KCONFIG_CONFIG=config.mmb_can_1.0_klipper -j4\n```\n\n```\n(Top)\n                         Klipper Firmware Configuration\n[*] Enable extra low-level configuration options\n    Micro-controller Architecture (STMicroelectronics STM32)  ---\u003e\n    Processor model (STM32G0B1)  ---\u003e\n    Bootloader offset (8KiB bootloader)  ---\u003e\n    Clock Reference (8 MHz crystal)  ---\u003e\n    Communication interface (USB (on PA11/PA12))  ---\u003e\n    USB ids  ---\u003e\n[*] Optimize stepper code for 'step on both edges'\n()  GPIO pins to set at micro-controller startup\n[Space/Enter] Toggle/enter      [?] Help            [/] Search\n[Q] Quit (prompts for save)     [ESC] Leave menu\n```\n\n## Picobilical\n\nGet the most up to date info on the [official page](https://github.com/MotorDynamicsLab/LDO-Picobilical).\n\nThis board will be used for the [Voron 0.2](printer-voron-0.2).\n\n### Klipper Firmware Configuration\n\n#### USB\n\n```sh\ncd ~/klipper/\nmake clean\nmake menuconfig KCONFIG_CONFIG=config.picobilical\ncp config.picobilical ../printer_data/config/Firmware/\nmake KCONFIG_CONFIG=config.picobilical -j4\n```\n\n```\n(Top)\n                         Klipper Firmware Configuration\n[ ] Enable extra low-level configuration options\n    Micro-controller Architecture (Raspberry Pi RP2040/RP235x)  ---\u003e\n    Processor model (rp2040)  ---\u003e\n    Bootloader offset (No bootloader)  ---\u003e\n    Communication Interface (USBSERIAL)  ---\u003e\n[Space/Enter] Toggle/enter      [?] Help            [/] Search\n[Q] Quit (prompts for save)     [ESC] Leave menu\n```\n\n## PITB V1.0\n\nGet the most up to date info on the [official page](https://github.com/kageurufu/PITB/tree/main/firmware).\n\nThis board will be used for the A/B Motors on the [Voron 2.4](printer-voron-2.4) when I upgrade to CAN.\n\n### Katapult Configuration\n\n#### CAN Bus\n\n```sh\ncd ~/katapult/\nmake clean\nmake menuconfig KCONFIG_CONFIG=config.pitb_can_katapult\ncp config.pitb_can_katapult ../printer_data/config/Firmware/\nmake KCONFIG_CONFIG=config.pitb_can_katapult -j4\n```\n\n```\n(Top)\n                         Katapult Configuration\n    Micro-controller Architecture (Raspberry Pi RP2040/RP235x)  ---\u003e\n    Processor model (rp2040)  ---\u003e\n    Flash chip (W25Q080 with CLKDIV 2)  ---\u003e\n    Build Katapult deployment application (Do not build)  ---\u003e\n    Communication Interface (CAN bus)  ---\u003e\n(14) CAN RX gpio number\n(13) CAN TX gpio number\n(1000000) CAN bus speed\n()  GPIO pins to set on bootloader entry\n[*] Support bootloader entry on rapid double click of reset button\n[ ] Enable bootloader entry on button (or gpio) state\n[*] Enable Status LED\n(gpio15) Status LED GPIO Pin\n[Space/Enter] Toggle/enter      [?] Help            [/] Search\n[Q] Quit (prompts for save)     [ESC] Leave menu\n```\n\n### Klipper Firmware Configuration\n\n#### CAN Bus\n\n```sh\ncd ~/klipper/\nmake clean\nmake menuconfig KCONFIG_CONFIG=config.pitb_can_klipper\ncp config.pitb_can_klipper ../printer_data/config/Firmware/\nmake KCONFIG_CONFIG=config.pitb_can_klipper -j4\n```\n\n```\n(Top)\n                         Klipper Firmware Configuration\n[*] Enable extra low-level configuration options\n    Micro-controller Architecture (Raspberry Pi RP2040/RP235x)  ---\u003e\n    Processor model (rp2040)  ---\u003e\n    Bootloader offset (16KiB bootloader)  ---\u003e\n    Communication Interface (CAN bus)  ---\u003e\n(14) CAN RX gpio number\n(13) CAN TX gpio number\n(1000000) CAN bus speed\n[*] Optimize stepper code for 'step on both edges'\n()  GPIO pins to set at micro-controller startup\n[Space/Enter] Toggle/enter      [?] Help            [/] Search\n[Q] Quit (prompts for save)     [ESC] Leave menu\n```\n\n#### USB\n\n```sh\ncd ~/klipper/\nmake clean\nmake menuconfig KCONFIG_CONFIG=config.pitb_klipper\ncp config.pitb_klipper ../printer_data/config/Firmware/\nmake KCONFIG_CONFIG=config.pitb_klipper -j4\n```\n\n```\n(Top)\n                         Klipper Firmware Configuration\n[*] Enable extra low-level configuration options\n    Micro-controller Architecture (Raspberry Pi RP2040/RP235x)  ---\u003e\n    Processor model (rp2040)  ---\u003e\n    Bootloader offset (No bootloader)  ---\u003e\n    Flash chip (W25Q080 with CLKDIV 2)  ---\u003e\n    Communication Interface (USBSERIAL)  ---\u003e\n    USB ids  ---\u003e\n[*] Optimize stepper code for 'step on both edges'\n()  GPIO pins to set at micro-controller startup\n[Space/Enter] Toggle/enter      [?] Help            [/] Search\n[Q] Quit (prompts for save)     [ESC] Leave menu\n```\n\n#### Flash\n\nHold the `Boot` boot button whilst connecting the MCU to the Raspberry Pi and run:\n\n```sh\nsudo mount /dev/sda1 /mnt\nsudo cp out/klipper.uf2 /mnt\nsudo umount /mnt\n```\n\n## SKR 1.4\n\nGet the most up to date info on the [official page](https://github.com/bigtreetech/BIGTREETECH-SKR-V1.3/tree/master/BTT%20SKR%20V1.4).\n\nThere is also some useful information in the [Voron Design Documentation](https://docs.vorondesign.com/build/software/skr13_klipper.html).\n\nThis board is currently using [Marlin Firmware](https://marlinfw.org/) on my [Anet A8](printer-hardware-upgrades), but will be flashed with klipper when upgrading to the [AM8](printer-am8).\n\n### Klipper Firmware Configuration\n\n#### Serial\n\n```sh\ncd ~/klipper/\nmake clean\nmake menuconfig KCONFIG_CONFIG=config.skr_1.4_serial\n```\n\nSet the following configuration:\n\n```\n(Top)\n                         Klipper Firmware Configuration\n[ ] Enable extra low-level configuration options\n    Micro-controller Architecture (LPC176x)  ---\u003e\n    Processor model (lpc1768 (100 MHz))  ---\u003e\n    Bootloader offset (16KiB bootloader)  ---\u003e\n    Communication interface (Serial (on UART0 P0.3/P0.2))  ---\u003e\n[Space/Enter] Toggle/enter      [?] Help            [/] Search\n[Q] Quit (prompts for save)     [ESC] Leave menu\n```\n\nBackup config and Build:\n\n```sh\ncp config.skr_1.4_serial ../printer_data/config/Firmware/\nmake KCONFIG_CONFIG=config.skr_1.4_serial -j4\n```\n\n#### USB\n\n```sh\ncd ~/klipper/\nmake clean\nmake menuconfig KCONFIG_CONFIG=config.skr_1.4_usb\n```\n\nSet the following configuration:\n\n```\n(Top)\n                         Klipper Firmware Configuration\n[ ] Enable extra low-level configuration options\n    Micro-controller Architecture (LPC176x)  ---\u003e\n    Processor model (lpc1768 (100 MHz))  ---\u003e\n    Bootloader offset (16KiB bootloader)  ---\u003e\n    Communication interface (USB)  ---\u003e\n[Space/Enter] Toggle/enter      [?] Help            [/] Search\n[Q] Quit (prompts for save)     [ESC] Leave menu\n```\n\nBackup config and Build:\n\n```sh\ncp config.skr_1.4_usb ../printer_data/config/Firmware/\nmake KCONFIG_CONFIG=config.skr_1.4_usb -j4\n```\n\n#### Flash\n\nFor the initial flash we need to copy the file to a micro sd card.\nThe easiest way to do this is to copy `out/klipper.bin` to the klipper config directory:\n\n```sh\ncp out/klipper.bin ../printer_data/config/\n```\n\nYou can then:\n\n1. Download it to your local machine from the Mainsail web interface.\n2. Copy the `klipper.bin` file to the root of the Micro SD card.\n3. Rename `klipper.bin` to `firmware.bin`.\n4. Eject the Micro SD card from the PC.\n5. Disconnect the power to the MCU.\n6. Insert the Micro SD card into the slot on the MCU.\n7. Power on the MCU.\n8. Check the firmware has flashed, file on the SD card will change to `firmware.cur`, if succesful.\n\n\u003e [!IMPORTANT]\n\u003e If the file is not named `firmware.bin`, the firmware will not be updated.\n\nSubsequent flashes can then be done by using the following commands:\n\n```sh\nsudo service klipper stop\n~/klipper/scripts/flash-sdcard.sh /dev/serial/by-id/usb-Klipper_lpc1769_1C10011425813AAFCED76B5CC22000F5-if00 btt-skr-v1.3\nsudo service klipper start\n```\n\n## SKR 1.4 Turbo\n\nGet the most up to date info on the [official page](https://github.com/bigtreetech/BIGTREETECH-SKR-V1.3/tree/master/BTT%20SKR%20V1.4).\n\nThere is also some useful information in the [Voron Design Documentation](https://docs.vorondesign.com/build/software/skr13_klipper.html).\n\nThis board is being used by the [Voron 1.8](printer-voron-1.8).\n\n### Klipper Firmware Configuration\n\n#### Serial\n\n```sh\ncd ~/klipper/\nmake clean\nmake menuconfig KCONFIG_CONFIG=config.skr_1.4_turbo_serial\n```\n\nSet the following configuration:\n\n```\n(Top)\n                         Klipper Firmware Configuration\n[ ] Enable extra low-level configuration options\n    Micro-controller Architecture (LPC176x)  ---\u003e\n    Processor model (lpc1769 (120 MHz))  ---\u003e\n    Bootloader offset (16KiB bootloader)  ---\u003e\n    Communication interface (Serial (on UART0 P0.3/P0.2))  ---\u003e\n[Space/Enter] Toggle/enter      [?] Help            [/] Search\n[Q] Quit (prompts for save)     [ESC] Leave menu\n```\n\nBackup config and Build:\n\n```sh\ncp config.skr_1.4_turbo_serial ../printer_data/config/Firmware/\nmake KCONFIG_CONFIG=config.skr_1.4_turbo_serial -j4\n```\n\n#### USB\n\n```sh\ncd ~/klipper/\nmake clean\nmake menuconfig KCONFIG_CONFIG=config.skr_1.4_turbo_usb\n```\n\nSet the following configuration:\n\n```\n(Top)\n                         Klipper Firmware Configuration\n[ ] Enable extra low-level configuration options\n    Micro-controller Architecture (LPC176x)  ---\u003e\n    Processor model (lpc1769 (120 MHz))  ---\u003e\n    Bootloader offset (16KiB bootloader)  ---\u003e\n    Communication interface (USB)  ---\u003e\n[Space/Enter] Toggle/enter      [?] Help            [/] Search\n[Q] Quit (prompts for save)     [ESC] Leave menu\n```\n\nBackup config and Build:\n\n```sh\ncp config.skr_1.4_turbo_usb ../printer_data/config/Firmware/\nmake KCONFIG_CONFIG=config.skr_1.4_turbo_usb -j4\n```\n\n#### Flash\n\nFor the initial flash we need to copy the file to a micro sd card.\nThe easiest way to do this is to copy `out/klipper.bin` to the klipper config directory:\n\n```sh\ncp out/klipper.bin ../printer_data/config/\n```\n\nYou can then:\n\n1. Download it to your local machine from the Mainsail web interface.\n2. Copy the `klipper.bin` file to the root of the Micro SD card.\n3. Rename `klipper.bin` to `firmware.bin`.\n4. Eject the Micro SD card from the PC.\n5. Disconnect the power to the MCU.\n6. Insert the Micro SD card into the slot on the MCU.\n7. Power on the MCU.\n8. Check the firmware has flashed, file on the SD card will change to `firmware.cur`, if succesful.\n\n\u003e [!IMPORTANT]\n\u003e If the file is not named `firmware.bin`, the firmware will not be updated.\n\nSubsequent flashes can then be done by using the following commands:\n\n```sh\nsudo service klipper stop\n~/klipper/scripts/flash-sdcard.sh /dev/serial/by-id/usb-Klipper_lpc1769_1C10011425813AAFCED76B5CC22000F5-if00 btt-skr-v1.3\nsudo service klipper start\n```\n\n## SKR Mini E3 V2.0\n\nGet the most up to date info on the [official page](https://github.com/bigtreetech/BIGTREETECH-SKR-mini-E3/tree/master/hardware/BTT%20SKR%20MINI%20E3%20V2.0/Hardware).\n\nThere is also some useful information in the [Voron Design Documentation](https://docs.vorondesign.com/build/software/miniE3_v20_klipper.html).\n\nThis board will be used in the [Rook 2020](printer-rook).\n\n### Klipper Firmware Configuration\n\n#### USB\n\n```sh\ncd ~/klipper/\nmake clean\nmake menuconfig KCONFIG_CONFIG=config.skr_mini_e3\n```\n\nSet the following configuration:\n\n```\n(Top)\n                         Klipper Firmware Configuration\n[*] Enable extra low-level configuration options\n    Micro-controller Architecture (STMicroelectronics STM32)  ---\u003e\n    Processor model (STM32F103)  ---\u003e\n[ ] Only 10KiB of RAM (for rare stm32f103x6 variant)\n[ ] Disable SWD at startup (for GigaDevice stm32f103 clones)\n    Bootloader offset (28KiB bootloader)  ---\u003e\n    Clock Reference (8 MHz crystal)  ---\u003e\n    Communication interface (USB (on PA11/PA12))  ---\u003e\n    USB ids  ---\u003e\n[*] Optimize stepper code for 'step on both edges'\n(!PA14) GPIO pins to set at micro-controller startup\n[Space/Enter] Toggle/enter      [?] Help            [/] Search\n[Q] Quit (prompts for save)     [ESC] Leave menu\n```\n\nBackup config and Build:\n\n```sh\ncp config.skr_mini_e3 ../printer_data/config/Firmware/\nmake KCONFIG_CONFIG=config.skr_mini_e3 -j4\n```\n\nFor the initial flash we need to copy the file to a micro sd card.\nThe easiest way to do this is to copy `out/klipper.bin` to the klipper config directory:\n\n```sh\ncp out/klipper.bin ../printer_data/config/\n```\n\nYou can then:\n\n1. Download it to your local machine from the Mainsail web interface.\n2. Copy the `klipper.bin` file to the root of the Micro SD card.\n3. Rename `klipper.bin` to `firmware.bin`.\n4. Eject the Micro SD card from the PC.\n5. Disconnect the power to the MCU.\n6. Insert the Micro SD card into the slot on the MCU.\n7. Power on the MCU.\n8. Check the firmware has flashed, file on the SD card will change to `firmware.cur`, if succesful.\n\n\u003e [!IMPORTANT]\n\u003e If the file is not named `firmware.bin`, the firmware will not be updated.\n\nSubsequent flashes can then be done by using the following commands:\n\n```sh\nsudo service klipper stop\n~/klipper/scripts/flash-sdcard.sh /dev/serial/by-id/usb-Klipper_stm32f103xe_1C10011425813AAFCED76B5CC22000F5-if00 btt-skr-mini-e3-v2\nsudo service klipper start\n```\n\n## SKR Pico\n\nGet the most up to date info on the [official page](https://github.com/bigtreetech/SKR-Pico).\n\nThere is also some useful information in the [Voron Design Documentation](https://docs.vorondesign.com/build/software/skrPico_klipper.html).\n\nThis board will be used for the [Voron 0.2](printer-voron-0.2).\n\n### Klipper Firmware Configuration\n\n#### CAN\n\nYou will need a `CAN Transceiver Module` for this, I used [this SN65HVD230 Module](https://www.aliexpress.com/item/1005002843325046.html) connected to the `Raspberry Pi Serial Port`.\n\n```sh\ncd ~/klipper/\nmake clean\nmake menuconfig KCONFIG_CONFIG=config.skr_pico_can\n```\n\nSet the following configuration:\n\n```\n(Top)\n                         Klipper Firmware Configuration\n[*] Enable extra low-level configuration options\n    Micro-controller Architecture (Raspberry Pi RP2040/RP235x)  ---\u003e\n    Processor model (rp2040)  ---\u003e\n    Bootloader offset (No bootloader)  ---\u003e\n    Flash chip (W25Q080 with CLKDIV 2)  ---\u003e\n    Communication Interface (USB to CAN bus bridge)  ---\u003e\n(1) CAN RX gpio number\n(0) CAN TX gpio number\n    USB ids  ---\u003e\n(500000) CAN bus speed\n[*] Optimize stepper code for 'step on both edges'\n()  GPIO pins to set at micro-controller startup\n[Space/Enter] Toggle/enter      [?] Help            [/] Search\n[Q] Quit (prompts for save)     [ESC] Leave menu\n```\n\nBackup config and Build:\n\n```sh\ncp config.skr_pico_can ../printer_data/config/Firmware/\nmake KCONFIG_CONFIG=config.skr_pico_can -j4\n```\n\n#### Serial\n\n```sh\ncd ~/klipper/\nmake clean\nmake menuconfig KCONFIG_CONFIG=config.skr_pico_serial\n```\n\nSet the following configuration:\n\n```\n(Top)\n                         Klipper Firmware Configuration\n[ ] Enable extra low-level configuration options\n    Micro-controller Architecture (Raspberry Pi RP2040/RP235x)  ---\u003e\n    Processor model (rp2040)  ---\u003e\n    Bootloader offset (No bootloader)  ---\u003e\n    Communication Interface (UART0 on GPIO0/GPIO1)  ---\u003e\n[Space/Enter] Toggle/enter      [?] Help            [/] Search\n[Q] Quit (prompts for save)     [ESC] Leave menu\n```\n\nBackup config and Build:\n\n```sh\ncp config.skr_pico_serial ../printer_data/config/Firmware/\nmake KCONFIG_CONFIG=config.skr_pico_serial -j4\n```\n\n#### USB\n\n```sh\ncd ~/klipper/\nmake clean\nmake menuconfig KCONFIG_CONFIG=config.skr_pico_usb\n```\n\nSet the following configuration:\n\n```\n(Top)\n                         Klipper Firmware Configuration\n[ ] Enable extra low-level configuration options\n    Micro-controller Architecture (Raspberry Pi RP2040/RP235x)  ---\u003e\n    Processor model (rp2040)  ---\u003e\n    Bootloader offset (No bootloader)  ---\u003e\n    Communication Interface (USBSERIAL)  ---\u003e\n[Space/Enter] Toggle/enter      [?] Help            [/] Search\n[Q] Quit (prompts for save)     [ESC] Leave menu\n```\n\nBackup config and Build:\n\n```sh\ncp config.skr_pico_usb ../printer_data/config/Firmware/\nmake KCONFIG_CONFIG=config.skr_pico_usb -j4\n```\n\n#### Flash\n\nFor the initial flash we need to install jumpers on the `USB Power` and `Boot` pins, connect the MCU to the Raspberry Pi and run:\n\n```sh\nsudo mount /dev/sda1 /mnt\nsudo cp out/klipper.uf2 /mnt\nsudo umount /mnt\n```\n\nDisconnect power from the MCU and remove the jumpers we installed earlier.\n\nSubsequent flashes can then be done by using the following commands:\n\n```sh\nsudo service klipper stop\ncd ~/klipper\nmake flash FLASH_DEVICE=/dev/serial/by-id/usb-Klipper_rp2040_1D0004001050563046363120-if00\nsudo service klipper start\n```\n\n## Super8\n\nGet the most up to date info on the [official page](https://mellow-3d.github.io/fly_super8.html).\n\nThis board will be used for the [Voron 2.4](printer-voron-2.4).\n\n### Katapult Configuration\n\n#### USB\n\n```sh\ncd ~/katapult/\nmake clean\nmake menuconfig KCONFIG_CONFIG=config.super8_katapult\n```\n\nSet the following configuration:\n\n```\n(Top)\n                         Katapult Configuration\n    Micro-controller Architecture (STMicroelectronics STM32)  ---\u003e\n    Processor model (STM32F407)  ---\u003e\n    Build Katapult deployment application (32KiB bootloader)  ---\u003e\n    Clock Reference (8 MHz crystal)  ---\u003e\n    Communication interface (USB (on PA11/PA12))  ---\u003e\n    Application start offset (32KiB offset)  ---\u003e\n    USB ids  ---\u003e\n()  GPIO pins to set on bootloader entry\n[*] Support bootloader entry on rapid double click of reset button\n[ ] Enable bootloader entry on button (or gpio) state\n[ ] Enable Status LED\n[Space/Enter] Toggle/enter      [?] Help            [/] Search\n[Q] Quit (prompts for save)     [ESC] Leave menu\n```\n\nBackup config and Build:\n\n```sh\ncp config.super8_katapult ../printer_data/config/Firmware/\nmake KCONFIG_CONFIG=config.super8_katapult -j4\n```\n\nFor the initial flash we need to copy the file to a micro sd card.\nThe easiest way to do this is to copy `out/deployer.bin` to the klipper config directory:\n\n```sh\ncp out/deployer.bin ../printer_data/config/\n```\n\nYou can then:\n\n1. Download it to your local machine from the Mainsail web interface.\n2. Copy the `deployer.bin` file to the root of the Micro SD card.\n3. Rename `deployer.bin` to `firmware.bin`.\n4. Eject the Micro SD card from the PC.\n5. Insert the Micro SD card into the slot on the MCU.\n6. Press the `RESET` button on the MCU.\n\nSubsequent flashes can then be done by double pressing the `RESET` button on the MCU and then using the command:\n\n```sh\npython3 ~/katapult/scripts/flashtool.py -f ~/katapult/out/deployer.bin -d /dev/serial/by-id/usb-katapult_stm32f407xx_5A0034000250304235323120-if00\n```\n\n### Klipper Firmware Configuration\n\n#### USB\n\n```sh\ncd ../klipper/\nmake clean\nmake menuconfig KCONFIG_CONFIG=config.super8_klipper\n```\n\nSet the following configuration:\n\n```\n(Top)\n                         Klipper Firmware Configuration\n[*] Enable extra low-level configuration options\n    Micro-controller Architecture (STMicroelectronics STM32)  ---\u003e\n    Processor model (STM32F407)  ---\u003e\n    Bootloader offset (32KiB bootloader)  ---\u003e\n    Clock Reference (8 MHz crystal)  ---\u003e\n    Communication interface (USB (on PA11/PA12))  ---\u003e\n    USB ids  ---\u003e\n[*] Optimize stepper code for 'step on both edges'\n()  GPIO pins to set at micro-controller startup\n[Space/Enter] Toggle/enter      [?] Help            [/] Search\n[Q] Quit (prompts for save)     [ESC] Leave menu\n```\n\nBackup config, Build and Flash to the board:\n\n```sh\ncp config.super8_klipper ../printer_data/config/Firmware/\nmake KCONFIG_CONFIG=config.super8_klipper -j4\nmake KCONFIG_CONFIG=config.super8_klipper flash FLASH_DEVICE=/dev/serial/by-id/usb-katapult_stm32f407xx_5A0034000250304235323120-if00\n```\n\n# RPi microcontroller\n\nTo get the most up-to-date info for the latest Klipper version visit the [Klipper RPi micro-controller setup guide](https://www.klipper3d.org/RPi_microcontroller.html).\n\n## Install the RC Script\n\nCopy and enable the `klipper-mcu.service` for systemd:\n\n```sh\ncd ~/klipper/\nsudo cp ./scripts/klipper-mcu.service /etc/systemd/system/\nsudo systemctl enable klipper-mcu.service\n```\n\n## Building the Micro-Controller Code\n\nConfigure the Klipper micro-controller code:\n\n```sh\ncd ~/klipper/\nmake clean\nmake menuconfig KCONFIG_CONFIG=config.rpi\ncp config.rpi ../printer_data/config/Firmware/\n```\n\nSet `Micro-controller Architecture` to `Linux process`...\n\n```\n(Top)\n                         Klipper Firmware Configuration\n[ ] Enable extra low-level configuration options\n    Micro-controller Architecture (Linux process)  ---\u003e\n[Space/Enter] Toggle/enter      [?] Help            [/] Search\n[Q] Quit (prompts for save)     [ESC] Leave menu\n```\n\nthen save and exit and run:\n\n```sh\nsudo service klipper stop\nmake flash KCONFIG_CONFIG=config.rpi\nsudo service klipper start\n```\n\nIf klippy.log reports a `Permission denied` error when attempting to connect to `/tmp/klipper_host_mcu` then you need to add your user to the tty group. The following command will add the `pi` user to the `tty` group:\n\n```sh\nsudo usermod -a -G tty pi\n```\n\n## Optional: Interface Options\n\nYou can find the `Interface Options` in the Raspberry Pi Software Configuration Tool by running:\n\n```sh\nsudo raspi-config\n```\n\n```\n┌─────────┤ Raspberry Pi Software Configuration Tool (raspi-config) ├──────────┐\n│                                                                              │\n│       1 System Options       Configure system settings                       │\n│       2 Display Options      Configure display settings                      │\n│      |3 Interface Options    Configure connections to peripherals     |      │\n│       4 Performance Options  Configure performance settings                  │\n│       5 Localisation Options Configure language and regional settings        │\n│       6 Advanced Options     Configure advanced settings                     │\n│       8 Update               Update this tool to the latest version          │\n│       9 About raspi-config   Information about this configuration tool       │\n│                                                                              │\n│                                                                              │\n│                                                                              │\n│                                                                              │\n│                                                                              │\n│                     \u003cSelect\u003e                     \u003cFinish\u003e                    │\n│                                                                              │\n└──────────────────────────────────────────────────────────────────────────────┘\n```\n\n### Enabling SPI\n\nSPI should be enabled automatically by the hat EEPROM, If you have trouble, you can enable it manually by selecting `SPI` under the `Interface Options` menu.\n\n```\n┌─────────┤ Raspberry Pi Software Configuration Tool (raspi-config) ├──────────┐\n│                                                                              │\n│    I1 SSH         Enable/disable remote command line access using SSH        │\n│    I2 RPi Connect Enable/disable Raspberry Pi Connect                        │\n│    I3 VNC         Enable/disable graphical remote desktop access             │\n│   |I4 SPI         Enable/disable automatic loading of SPI kernel module |    │\n│    I5 I2C         Enable/disable automatic loading of I2C kernel module      │\n│    I6 Serial Port Enable/disable shell messages on the serial connection     │\n│    I7 1-Wire      Enable/disable one-wire interface                          │\n│    I8 Remote GPIO Enable/disable remote access to GPIO pins                  │\n│                                                                              │\n│                                                                              │\n│                                                                              │\n│                                                                              │\n│                                                                              │\n│                     \u003cSelect\u003e                     \u003cBack\u003e                      │\n│                                                                              │\n└──────────────────────────────────────────────────────────────────────────────┘\n```\n\n### Enabling I2C\n\nI2C should be enabled automatically by the hat EEPROM, If you have trouble, you can enable it manually by selecting `I2C` under the `Interface Options` menu.\n\n```\n┌─────────┤ Raspberry Pi Software Configuration Tool (raspi-config) ├──────────┐\n│                                                                              │\n│    I1 SSH         Enable/disable remote command line access using SSH        │\n│    I2 RPi Connect Enable/disable Raspberry Pi Connect                        │\n│    I3 VNC         Enable/disable graphical remote desktop access             │\n│    I4 SPI         Enable/disable automatic loading of SPI kernel module      │\n│   |I5 I2C         Enable/disable automatic loading of I2C kernel module |    │\n│    I6 Serial Port Enable/disable shell messages on the serial connection     │\n│    I7 1-Wire      Enable/disable one-wire interface                          │\n│    I8 Remote GPIO Enable/disable remote access to GPIO pins                  │\n│                                                                              │\n│                                                                              │\n│                                                                              │\n│                                                                              │\n│                                                                              │\n│                     \u003cSelect\u003e                     \u003cBack\u003e                      │\n│                                                                              │\n└──────────────────────────────────────────────────────────────────────────────┘\n```\n\nIf planning to use I2C for the MPU accelerometer, it is also required to set the baud rate to 400000 by: adding/uncommenting `dtparam=i2c_arm=on,i2c_arm_baudrate=400000` in `/boot/config.txt` (or `/boot/firmware/config.txt` in some distros).\nThis should also be automatically be enabled by the hat EEPROM however you can do it manually if you have any problems.\n\n### Enabling 1-wire\n\nIf you require, you can enable the 1-wire interface by selecting `1-Wire` under the `Interface Options` menu.\n\n```\n┌─────────┤ Raspberry Pi Software Configuration Tool (raspi-config) ├──────────┐\n│                                                                              │\n│    I1 SSH         Enable/disable remote command line access using SSH        │\n│    I2 RPi Connect Enable/disable Raspberry Pi Connect                        │\n│    I3 VNC         Enable/disable graphical remote desktop access             │\n│    I4 SPI         Enable/disable automatic loading of SPI kernel module      │\n│    I5 I2C         Enable/disable automatic loading of I2C kernel module      │\n│    I6 Serial Port Enable/disable shell messages on the serial connection     │\n│   |I7 1-Wire      Enable/disable one-wire interface                     |    │\n│    I8 Remote GPIO Enable/disable remote access to GPIO pins                  │\n│                                                                              │\n│                                                                              │\n│                                                                              │\n│                                                                              │\n│                                                                              │\n│                     \u003cSelect\u003e                     \u003cBack\u003e                      │\n│                                                                              │\n└──────────────────────────────────────────────────────────────────────────────┘\n```\n\nyou can then find any conneted sensors serial numbers with: `ls /sys/bus/w1/devices/`\n\n## Optional: Identify the correct gpiochip\n\nTo install the Linux GPIO character device:\n\n```sh\nsudo apt install gpiod\n```\n\nTo check available gpiochip run:\n\n```sh\ngpiodetect\n```\n\nTo check the pin number and the pin availability run:\n\n```sh\ngpioinfo\n```\n\n## Optional: Hardware PWM\n\nRaspberry Pi's have two PWM channels (PWM0 and PWM1) which are exposed on the header or if not, can be routed to existing gpio pins. The Linux mcu daemon uses the pwmchip sysfs interface to control hardware pwm devices on Linux hosts. The pwm sysfs interface is not exposed by default on a Raspberry and can be activated by adding a line to `/boot/config.txt`:\n\n```ini\n# Enable pwmchip sysfs interface\ndtoverlay=pwm,pin=12,func=4\n```\n\nThis example enables only PWM0 and routes it to gpio12. If both PWM channels need to be enabled you can use `pwm-2chan`:\n\n```ini\n# Enable pwmchip sysfs interface\ndtoverlay=pwm-2chan,pin=12,pin2=13,func=4,func2=4\n```\n\nThe overlay does not expose the pwm line on sysfs on boot and needs to be exported by echo'ing the number of the pwm channel to `/sys/class/pwm/pwmchip0/export`:\n\n```sh\n# Enable pwmchip sysfs interface\necho 0 \u003e /sys/class/pwm/pwmchip0/export\n```\n\nIf you have enabled `pwm-2chan` you can enable PWM1 too with:\n\n```sh\n# Enable pwmchip sysfs interface\necho 0 \u003e /sys/class/pwm/pwmchip0/export\necho 1 \u003e /sys/class/pwm/pwmchip0/export\n```\n\nThis will create device `/sys/class/pwm/pwmchip0/pwm0` and optionally `/sys/class/pwm/pwmchip0/pwm1` in the filesystem. The easiest way to do this is by adding them to `/etc/rc.local` before the `exit 0` line.\n\nWith the sysfs in place, you can now use either the pwm channel(s) by adding the following piece of configuration to your board's config file:\n\n```ini\n[fan_generic fan1]\npin=rpi:pwmchip0/pwm0\npwm=True\nhardware_pwm=True\ncycle_time=0.000001\n```\n\nThis will add hardware pwm control to gpio12 on the Pi (because the overlay was configured to route pwm0 to pin=12).\n\nPWM0 can be routed to gpio12 and gpio18, PWM1 can be routed to gpio13 and gpio19:\n\n| PWM | gpio PIN | Func |\n| --- | -------- | ---- |\n| 0   | 12       | 4    |\n| 0   | 18       | 2    |\n| 1   | 13       | 4    |\n| 1   | 19       | 2    |\n\n# Create Flash MCU Convenience Script\n\n```sh\nnano flash-mcu.sh\nchmod +x flash-mcu.sh\n./flash-mcu.sh\n```\n\nExample:\n\n```sh\ncd ~/klipper/\nmake clean\nread -p \"Press Enter to configure RPI MCU\" \u003c/dev/tty\nmake menuconfig KCONFIG_CONFIG=config.rpi\ncp config.rpi ../printer_data/config/Firmware/\necho \"Flashing RPI MCU\"\nsudo service klipper stop\nmake flash KCONFIG_CONFIG=config.rpi\nsudo service klipper start\n```\n\n# Resonance Compensation\n\nGet the most up to date info on the [official page](https://www.klipper3d.org/Measuring_Resonances.html)\n\n```sh\nsudo apt update\nsudo apt install python3-numpy python3-matplotlib libatlas-base-dev libopenblas-dev\n~/klippy-env/bin/pip install -v \"numpy\u003c1.26\"\n```\n\nThen check no errors from the command:\n\n```sh\n~/klippy-env/bin/python -c 'import numpy;'\n```\n\n# Setup Crowsnest\n\nGet the most up to date info on the [official page](https://crowsnest.mainsail.xyz/configuration/cam-section).\n\n# Fix for RepRapDiscount 128x64 Full Graphic Smart Controller\n\nMy Full Graphic Smart Controller Display is showing the same issue as described in the GitHub issue [RepRap Display doesn't work properly](https://github.com/Klipper3d/klipper/issues/5089)\n\n```sh\ncd ~/klipper/src/\nmv lcd_st7920.c lcd_st7920.c.bak\nwget https://github.com/Stout69/For-Klipper/raw/main/lcd_st7920.c\ncd ../klippy/extras/display/\nmv st7920.py st7920.py.bak\nwget https://github.com/Stout69/For-Klipper/raw/main/st7920.py\n```\n\nThen recompile klipper for the MCU (See above)\n\n\u003e [!WARNING]\n\u003e I have retried these steps recently, however the problem in the GitHub issue still persists.\n\u003e\n\u003e Since Klipper no longer uses GitHub issues for it's issue tracker, [I have created a post in config-support Channel on Discord](https://discord.com/channels/431557959978450984/1412458895254749366/1412458895254749366).\n\n# KlipperScreen Fix\n\nWhen installing KlipperScreen via kiauh you may get [Cannot open virtual Console](https://klipperscreen.readthedocs.io/en/latest/Troubleshooting/VC_ERROR/) error in the log:\n\n```\nxf86OpenConsole: Cannot open virtual console 2 (Permission denied)\n```\n\nTo fix this run the following:\n\n```sh\ncat /etc/X11/Xwrapper.config\n```\n\nThis should have the line `allowed_users=anybody` in it.\n\nNext run:\n\n```sh\ncat /etc/group | grep tty\n```\n\nIf your username is not listed under that line, you need to add it with the following command:\n\n```sh\nusermod -a -G tty $USER\n```\n\nAdd `needs_root_rights=yes` to `/etc/X11/Xwrapper.config`:\n\n```sh\nsudo bash -c \"echo needs_root_rights=yes\u003e\u003e/etc/X11/Xwrapper.config\"\nsudo service KlipperScreen restart\nsystemctl status KlipperScreen\n```\n","lastmod":"2025-09-04T21:19:32.286Z"},"related":[{"slug":"printer-voron-0.2","related":[],"external":[],"title":"Voron 0.2","heading":"","date":"","preview":"/assets/blog/printer-voron-0.2/voron-0.2-hero.jpg","author":{"name":"","picture":""},"description":"","tags":[],"categories":[],"keywords":[],"promoted":false,"content":""},{"slug":"printer-voron-1.8","related":[],"external":[],"title":"Voron 1.8","heading":"","date":"","preview":"/assets/blog/printer-voron-1.8/voron-hero.jpg","author":{"name":"","picture":""},"description":"","tags":[],"categories":[],"keywords":[],"promoted":false,"content":""},{"slug":"printer-voron-2.4","related":[],"external":[],"title":"Voron 2.4","heading":"","date":"","preview":"/assets/blog/printer-voron-2.4/voron-hero.jpg","author":{"name":"","picture":""},"description":"","tags":[],"categories":[],"keywords":[],"promoted":false,"content":""},{"slug":"printer-am8","related":[],"external":[],"title":"AM8 Switchwire","heading":"","date":"","preview":"/assets/blog/printer-am8/printer-am8-hero.jpg","author":{"name":"","picture":""},"description":"","tags":[],"categories":[],"keywords":[],"promoted":false,"content":""},{"slug":"single-board-computers","related":[],"external":[],"title":"Single Board Computers","heading":"","date":"","preview":"/assets/blog/single-board-computers/single-board-computers-hero.jpg","author":{"name":"","picture":""},"description":"","tags":[],"categories":[],"keywords":[],"promoted":false,"content":""}]},"__N_SSG":true},"page":"/projects/[slug]","query":{"slug":"printer-klipper-firmware"},"buildId":"Y5mSgE8YhqnLmiRs80-DT","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>