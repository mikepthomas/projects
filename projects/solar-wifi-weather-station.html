<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8" data-next-head=""/><meta name="viewport" content="width=device-width" data-next-head=""/><meta property="fb:app_id" content="395776161315353" data-next-head=""/><meta property="og:locale" content="en_GB" data-next-head=""/><meta property="og:site_name" content="I wish I was cool... I wish I was Mike Thomas" data-next-head=""/><link rel="apple-touch-icon" sizes="180x180" href="/favicon/apple-touch-icon.png" data-next-head=""/><link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png" data-next-head=""/><link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png" data-next-head=""/><link rel="manifest" href="/favicon/site.webmanifest" data-next-head=""/><link rel="mask-icon" href="/favicon/safari-pinned-tab.svg" color="#000000" data-next-head=""/><link rel="shortcut icon" href="/favicon/favicon.ico" data-next-head=""/><meta name="msapplication-TileColor" content="#000000" data-next-head=""/><meta name="msapplication-config" content="/favicon/browserconfig.xml" data-next-head=""/><meta name="theme-color" content="#000" data-next-head=""/><title data-next-head="">Solar Wi-fi Weather Station | I wish I was cool... I wish I was Mike Thomas</title><meta name="robots" content="index,follow" data-next-head=""/><meta name="description" content="I won an auction on ebay and there were 3 Wifi Weather Station PCBs and some other components in the lot, let&#x27;s order the rest of the parts and assemble them." data-next-head=""/><meta property="og:title" content="Creating a solar powered weather station" data-next-head=""/><meta property="og:description" content="I won an auction on ebay and there were 3 Wifi Weather Station PCBs and some other components in the lot, let&#x27;s order the rest of the parts and assemble them." data-next-head=""/><meta property="og:url" content="https://www.mikethomas.info/projects/solar-wifi-weather-station" data-next-head=""/><meta property="og:type" content="article" data-next-head=""/><meta property="article:published_time" content="2023-06-27T00:00:00.000Z" data-next-head=""/><meta property="article:modified_time" content="2024-07-17T12:36:30.270Z" data-next-head=""/><meta property="article:tag" content="ESPHome" data-next-head=""/><meta property="article:tag" content="Printed Circuit Board" data-next-head=""/><meta property="og:image" content="https://www.mikethomas.info/assets/blog/solar-wifi-weather-station/solar-wifi-weather-station-hero.jpg" data-next-head=""/><link rel="canonical" href="https://www.mikethomas.info/projects/solar-wifi-weather-station" data-next-head=""/><meta name="keywords" content="Weather Station" data-next-head=""/><script type="application/ld+json" data-next-head="">{"@context":"https://schema.org","@type":"BlogPosting","datePublished":"2023-06-27T00:00:00.000Z","description":"I won an auction on ebay and there were 3 Wifi Weather Station PCBs and some other components in the lot, let&apos;s order the rest of the parts and assemble them.","mainEntityOfPage":{"@type":"WebPage","@id":"https://www.mikethomas.info/projects/solar-wifi-weather-station"},"headline":"Creating a solar powered weather station","image":["https://www.mikethomas.info/assets/blog/solar-wifi-weather-station/solar-wifi-weather-station-hero.jpg"],"dateModified":"2024-07-17T12:36:30.270Z","author":{"@type":"Person","name":"Mike Thomas"}}</script><link rel="preload" href="/assets/blog/solar-wifi-weather-station/solar-wifi-weather-station-hero.jpg" as="image" data-next-head=""/><link rel="preload" href="/_next/static/css/c6f92de8e742614c.css" as="style"/><link rel="stylesheet" href="/_next/static/css/c6f92de8e742614c.css" data-n-g=""/><link rel="preload" href="/_next/static/css/393b0371505a9873.css" as="style"/><link rel="stylesheet" href="/_next/static/css/393b0371505a9873.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-42372ed130431b0a.js"></script><script src="/_next/static/chunks/webpack-a339f4a57035852b.js" defer=""></script><script src="/_next/static/chunks/framework-a6e0b7e30f98059a.js" defer=""></script><script src="/_next/static/chunks/main-a612c2988afed858.js" defer=""></script><script src="/_next/static/chunks/pages/_app-30e2974eb524b097.js" defer=""></script><script src="/_next/static/chunks/3614f49b-f41f0efde8a71c1f.js" defer=""></script><script src="/_next/static/chunks/04ce947b-4d20b65e4c63866a.js" defer=""></script><script src="/_next/static/chunks/982-f9815873e706e292.js" defer=""></script><script src="/_next/static/chunks/485-7196188b3ce17bec.js" defer=""></script><script src="/_next/static/chunks/pages/projects/%5Bslug%5D-0128a563287ec87a.js" defer=""></script><script src="/_next/static/Y5mSgE8YhqnLmiRs80-DT/_buildManifest.js" defer=""></script><script src="/_next/static/Y5mSgE8YhqnLmiRs80-DT/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div class="navigation"><a class="navigation_github-banner__Smckk github-fork-ribbon d-none d-md-block" href="https://github.com/mikepthomas/projects" target="_blank" rel="noopener noreferrer" data-ribbon="Fork me on GitHub" title="Fork me on GitHub">Fork me on GitHub</a><nav class="navbar navbar-expand-md navbar-dark bg-dark fixed-top"><div class="container-fluid"><a href="/" class="navbar-brand"><img class="navigation_navbar-logo__YrC5F" src="/logo-blue.png" alt="Mike Thomas"/></a><button aria-label="Toggle navigation" type="button" class="navbar-toggler"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse"><ul class="mr-auto navbar-nav"><li class="nav-item"><a href="https://github.com/mikepthomas" target="_blank" class="nav-link"><svg data-prefix="fab" data-icon="github" class="svg-inline--fa fa-github" role="img" viewBox="0 0 512 512" aria-hidden="true"><path fill="currentColor" d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3 .3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5 .3-6.2 2.3zm44.2-1.7c-2.9 .7-4.9 2.6-4.6 4.9 .3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM252.8 8c-138.7 0-244.8 105.3-244.8 244 0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1 100-33.2 167.8-128.1 167.8-239 0-138.7-112.5-244-251.2-244zM105.2 352.9c-1.3 1-1 3.3 .7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3 .3 2.9 2.3 3.9 1.6 1 3.6 .7 4.3-.7 .7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3 .7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3 .7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path></svg> <!-- -->GitHub<!-- --> Profile</a></li><li class="nav-item"><a href="https://www.linkedin.com/in/mikepaulthomas" target="_blank" class="nav-link"><svg data-prefix="fab" data-icon="linkedin" class="svg-inline--fa fa-linkedin" role="img" viewBox="0 0 448 512" aria-hidden="true"><path fill="currentColor" d="M416 32L31.9 32C14.3 32 0 46.5 0 64.3L0 447.7C0 465.5 14.3 480 31.9 480L416 480c17.6 0 32-14.5 32-32.3l0-383.4C448 46.5 433.6 32 416 32zM135.4 416l-66.4 0 0-213.8 66.5 0 0 213.8-.1 0zM102.2 96a38.5 38.5 0 1 1 0 77 38.5 38.5 0 1 1 0-77zM384.3 416l-66.4 0 0-104c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9l0 105.8-66.4 0 0-213.8 63.7 0 0 29.2 .9 0c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9l0 117.2z"></path></svg> <!-- -->LinkedIn<!-- --> Profile</a></li><li class="nav-item"><a href="https://instagram.com/montycrabapple" target="_blank" class="nav-link"><svg data-prefix="fab" data-icon="instagram" class="svg-inline--fa fa-instagram" role="img" viewBox="0 0 448 512" aria-hidden="true"><path fill="currentColor" d="M224.3 141a115 115 0 1 0 -.6 230 115 115 0 1 0 .6-230zm-.6 40.4a74.6 74.6 0 1 1 .6 149.2 74.6 74.6 0 1 1 -.6-149.2zm93.4-45.1a26.8 26.8 0 1 1 53.6 0 26.8 26.8 0 1 1 -53.6 0zm129.7 27.2c-1.7-35.9-9.9-67.7-36.2-93.9-26.2-26.2-58-34.4-93.9-36.2-37-2.1-147.9-2.1-184.9 0-35.8 1.7-67.6 9.9-93.9 36.1s-34.4 58-36.2 93.9c-2.1 37-2.1 147.9 0 184.9 1.7 35.9 9.9 67.7 36.2 93.9s58 34.4 93.9 36.2c37 2.1 147.9 2.1 184.9 0 35.9-1.7 67.7-9.9 93.9-36.2 26.2-26.2 34.4-58 36.2-93.9 2.1-37 2.1-147.8 0-184.8zM399 388c-7.8 19.6-22.9 34.7-42.6 42.6-29.5 11.7-99.5 9-132.1 9s-102.7 2.6-132.1-9c-19.6-7.8-34.7-22.9-42.6-42.6-11.7-29.5-9-99.5-9-132.1s-2.6-102.7 9-132.1c7.8-19.6 22.9-34.7 42.6-42.6 29.5-11.7 99.5-9 132.1-9s102.7-2.6 132.1 9c19.6 7.8 34.7 22.9 42.6 42.6 11.7 29.5 9 99.5 9 132.1s2.7 102.7-9 132.1z"></path></svg> <!-- -->Instagram<!-- --> Profile</a></li><li class="nav-item"><a href="https://discordapp.com/users/460182324626325535" target="_blank" class="nav-link"><svg data-prefix="fab" data-icon="discord" class="svg-inline--fa fa-discord" role="img" viewBox="0 0 576 512" aria-hidden="true"><path fill="currentColor" d="M492.5 69.8c-.2-.3-.4-.6-.8-.7-38.1-17.5-78.4-30-119.7-37.1-.4-.1-.8 0-1.1 .1s-.6 .4-.8 .8c-5.5 9.9-10.5 20.2-14.9 30.6-44.6-6.8-89.9-6.8-134.4 0-4.5-10.5-9.5-20.7-15.1-30.6-.2-.3-.5-.6-.8-.8s-.7-.2-1.1-.2c-41.3 7.1-81.6 19.6-119.7 37.1-.3 .1-.6 .4-.8 .7-76.2 113.8-97.1 224.9-86.9 334.5 0 .3 .1 .5 .2 .8s.3 .4 .5 .6c44.4 32.9 94 58 146.8 74.2 .4 .1 .8 .1 1.1 0s.7-.4 .9-.7c11.3-15.4 21.4-31.8 30-48.8 .1-.2 .2-.5 .2-.8s0-.5-.1-.8-.2-.5-.4-.6-.4-.3-.7-.4c-15.8-6.1-31.2-13.4-45.9-21.9-.3-.2-.5-.4-.7-.6s-.3-.6-.3-.9 0-.6 .2-.9 .3-.5 .6-.7c3.1-2.3 6.2-4.7 9.1-7.1 .3-.2 .6-.4 .9-.4s.7 0 1 .1c96.2 43.9 200.4 43.9 295.5 0 .3-.1 .7-.2 1-.2s.7 .2 .9 .4c2.9 2.4 6 4.9 9.1 7.2 .2 .2 .4 .4 .6 .7s.2 .6 .2 .9-.1 .6-.3 .9-.4 .5-.6 .6c-14.7 8.6-30 15.9-45.9 21.8-.2 .1-.5 .2-.7 .4s-.3 .4-.4 .7-.1 .5-.1 .8 .1 .5 .2 .8c8.8 17 18.8 33.3 30 48.8 .2 .3 .6 .6 .9 .7s.8 .1 1.1 0c52.9-16.2 102.6-41.3 147.1-74.2 .2-.2 .4-.4 .5-.6s.2-.5 .2-.8c12.3-126.8-20.5-236.9-86.9-334.5zm-302 267.7c-29 0-52.8-26.6-52.8-59.2s23.4-59.2 52.8-59.2c29.7 0 53.3 26.8 52.8 59.2 0 32.7-23.4 59.2-52.8 59.2zm195.4 0c-29 0-52.8-26.6-52.8-59.2s23.4-59.2 52.8-59.2c29.7 0 53.3 26.8 52.8 59.2 0 32.7-23.2 59.2-52.8 59.2z"></path></svg> <!-- -->Discord<!-- --> Profile</a></li></ul></div></div></nav></div><div class="min-h-screen"><main><nav class="breadcrumbs_breadcrumbs__p9HFN position-sticky" aria-label="breadcrumb"><nav class="p-3 bg-light" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="/"><svg data-prefix="fas" data-icon="house" class="svg-inline--fa fa-house mr-2" role="img" viewBox="0 0 512 512" aria-hidden="true"><path fill="currentColor" d="M277.8 8.6c-12.3-11.4-31.3-11.4-43.5 0l-224 208c-9.6 9-12.8 22.9-8 35.1S18.8 272 32 272l16 0 0 176c0 35.3 28.7 64 64 64l288 0c35.3 0 64-28.7 64-64l0-176 16 0c13.2 0 25-8.1 29.8-20.3s1.6-26.2-8-35.1l-224-208zM240 320l32 0c26.5 0 48 21.5 48 48l0 96-128 0 0-96c0-26.5 21.5-48 48-48z"></path></svg>Home</a></li><li class="breadcrumb-item"><a href="/projects">Projects</a></li><li class="active breadcrumb-item" aria-current="page">Solar Wi-fi Weather Station</li></ol></nav></nav><div class="container"><article class="mb-16"><div class="mt-24 mb-6 container"><h1 class="text-5xl md:text-7xl lg:text-8xl font-bold tracking-tighter leading-tight md:leading-none mb-12 text-center md:text-left">Creating a solar powered weather station</h1></div><div class="mb-6 container"><div class="flex items-center"><img src="/assets/authors/mike.jpg" class="w-12 h-12 rounded-full mr-4" alt="Mike Thomas"/><div class="text-xl font-bold">Mike Thomas</div></div></div><div class="mb-6 container"><svg data-prefix="fas" data-icon="calendar-day" class="svg-inline--fa fa-calendar-day mr-2" role="img" viewBox="0 0 448 512" aria-hidden="true"><path fill="currentColor" d="M128 0c17.7 0 32 14.3 32 32l0 32 128 0 0-32c0-17.7 14.3-32 32-32s32 14.3 32 32l0 32 32 0c35.3 0 64 28.7 64 64l0 288c0 35.3-28.7 64-64 64L64 480c-35.3 0-64-28.7-64-64L0 128C0 92.7 28.7 64 64 64l32 0 0-32c0-17.7 14.3-32 32-32zm0 256c-17.7 0-32 14.3-32 32l0 64c0 17.7 14.3 32 32 32l64 0c17.7 0 32-14.3 32-32l0-64c0-17.7-14.3-32-32-32l-64 0z"></path></svg>Created <time dateTime="2023-06-27T00:00:00.000Z">27 June 2023</time>, last modified <time dateTime="2024-07-17T12:36:30.270Z">17 July 2024</time></div><div class="mb-6 container"><span class="mr-2 badge bg-orange rounded-pill">ESPHome</span><span class="mr-2 badge bg-orange rounded-pill">Printed Circuit Board</span></div><div class="mb-6 sm:mx-0 container"><div class="sm:mx-0"><img alt="Cover Image for Creating a solar powered weather station" width="1280" height="960" decoding="async" data-nimg="1" class="img-fluid img-thumbnail" style="color:transparent" src="/assets/blog/solar-wifi-weather-station/solar-wifi-weather-station-hero.jpg"/></div></div><div class="nav-padding projects-page container"><div class="row"><div class="blog_markdown__sabr0 col-lg-8"><h2 id="table-of-contents">Table of contents</h2><ol><li><a href="/projects/solar-wifi-weather-station#intro">Intro</a></li><li><a href="/projects/solar-wifi-weather-station#what-is-this">What is this?</a></li><li><a href="/projects/solar-wifi-weather-station#printed-circuit-board">Printed Circuit Board</a></li><li><a href="/projects/solar-wifi-weather-station#parts-required">Parts Required</a></li><li><a href="/projects/solar-wifi-weather-station#assembly">Assembly</a></li><li><a href="/projects/solar-wifi-weather-station#software">Software</a></li><li><a href="/projects/solar-wifi-weather-station#printing-parts">Printing Parts</a></li></ol><h2 id="intro">Intro</h2><p>I won an auction titled &quot;<code>Box of bits inc Arduinos, Pi&#x27;s, Odroid, various sensors etc</code>&quot; on ebay there were 3 Wifi Weather Station PCBs and a few other required components included in the lot, let&#x27;s order the rest of the parts and assemble them.</p><h2 id="what-is-this">What is this?</h2><p>This is a PCB to create a <a href="https://www.instructables.com/Solar-Powered-WiFi-Weather-Station-V20" rel="noopener noreferrer" target="_blank">Weather Station powered by an 18650 battery</a>, the project has had a few updates at the time of writing, the project is up to V4.0, however most of the parts required were included in the original listing so why not try assemble them and see how it goes.</p><h2 id="printed-circuit-board">Printed Circuit Board</h2><p>The PCB was designed by <a href="https://www.instructables.com/member/opengreenenergy" rel="noopener noreferrer" target="_blank">Open Green Energy</a> and was designed around the <a href="https://www.wemos.cc/en/latest/d1/d1_mini_pro.html" rel="noopener noreferrer" target="_blank">Wemos D1 Mini Pro</a> micro controller, and it includes a connector to attach a solar panel, a TP4056 to charge an 18650 Lithium battery, and a BMP280 Temperature, Humidity and Barometric Pressure sensor. It also has a few extra headers for attaching additional sensors such as a DS18B20 Temperature sensor or adding an I2C display.</p><h2 id="parts-required">Parts Required</h2><p>Quantities are for 1 PCB.</p><div class="table-responsive"><table class="table table-sm table-bordered table-striped table-hover"><thead><tr><th>Item</th><th>Quantity</th><th>Received</th><th>Notes</th></tr></thead><tbody><tr><td>Wemos D1 Mini Pro</td><td>1</td><td>3</td><td></td></tr><tr><td>TP4056 Charging Board</td><td>1</td><td>5</td><td></td></tr><tr><td>BMP280 Sensor</td><td>1</td><td>3</td><td></td></tr><tr><td>DS18B20 Sensor</td><td>1</td><td>3</td><td></td></tr><tr><td>Capacitive Soil Moisture Sensor</td><td>1</td><td>3</td><td></td></tr><tr><td>Raindrops Detection Sensor Module</td><td>1</td><td>3</td><td></td></tr><tr><td>Switch</td><td>1</td><td>19</td><td></td></tr><tr><td>Screw Terminals</td><td>1</td><td>15</td><td></td></tr><tr><td>Brass PCB standoffs</td><td>4</td><td>10</td><td></td></tr><tr><td>18650 Battery</td><td>1</td><td>6</td><td></td></tr><tr><td>18650 Battery Holder</td><td>1</td><td>3</td><td></td></tr><tr><td>Solar Panel</td><td>1</td><td>3</td><td></td></tr><tr><td>Straight Headers Pin</td><td>46 pins</td><td>400 pins</td><td></td></tr><tr><td>22 AWG wire</td><td>~500mm</td><td>2m</td><td></td></tr><tr><td>Weather Station V2.0 PCB</td><td>1</td><td>3</td><td></td></tr><tr><td>Super Glue</td><td>1</td><td>1</td><td></td></tr></tbody></table></div><h2 id="assembly">Assembly</h2><p><span style="opacity:0"><img alt="A Fully assembled Solar Wifi Weather Station V2.0 PCB" loading="lazy" width="1280" height="960" decoding="async" data-nimg="1" class="img-fluid img-thumbnail" style="color:transparent" src="/assets/blog/solar-wifi-weather-station/solar-wifi-weather-station-assembled.jpg"/></span></p><h2 id="software">Software</h2><p>To make the board work in ESPHome we need to select <code>d1_mini_pro</code> as the board type:</p><pre class="language-yaml"><code class="language-yaml code-highlight"><span class="code-line"><span class="token key atrule">esphome</span><span class="token punctuation">:</span>
</span><span class="code-line">  <span class="token key atrule">name</span><span class="token punctuation">:</span> weather<span class="token punctuation">-</span>station
</span><span class="code-line">  <span class="token key atrule">friendly_name</span><span class="token punctuation">:</span> Weather Station
</span><span class="code-line">  <span class="token key atrule">comment</span><span class="token punctuation">:</span> Solar Powered WiFi Weather Station V2.0
</span><span class="code-line">  <span class="token key atrule">project</span><span class="token punctuation">:</span>
</span><span class="code-line">    <span class="token key atrule">name</span><span class="token punctuation">:</span> <span class="token string">&#x27;Open-Green-Energy.Solar-Wifi-Weather-Station&#x27;</span>
</span><span class="code-line">    <span class="token key atrule">version</span><span class="token punctuation">:</span> <span class="token string">&#x27;2.0&#x27;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token key atrule">esp8266</span><span class="token punctuation">:</span>
</span><span class="code-line">  <span class="token key atrule">board</span><span class="token punctuation">:</span> d1_mini_pro
</span></code></pre><p>For the BME280 sensor we need to add:</p><pre class="language-yaml"><code class="language-yaml code-highlight"><span class="code-line"><span class="token key atrule">i2c</span><span class="token punctuation">:</span>
</span><span class="code-line">  <span class="token key atrule">scl</span><span class="token punctuation">:</span> D1
</span><span class="code-line">  <span class="token key atrule">sda</span><span class="token punctuation">:</span> D2
</span><span class="code-line">
</span><span class="code-line"><span class="token key atrule">sensor</span><span class="token punctuation">:</span>
</span><span class="code-line">  <span class="token punctuation">-</span> <span class="token key atrule">platform</span><span class="token punctuation">:</span> bme280
</span><span class="code-line">    <span class="token key atrule">temperature</span><span class="token punctuation">:</span>
</span><span class="code-line">      <span class="token key atrule">name</span><span class="token punctuation">:</span> Temperature
</span><span class="code-line">      <span class="token key atrule">id</span><span class="token punctuation">:</span> bme280_temperature
</span><span class="code-line">      <span class="token key atrule">oversampling</span><span class="token punctuation">:</span> 16x
</span><span class="code-line">    <span class="token key atrule">pressure</span><span class="token punctuation">:</span>
</span><span class="code-line">      <span class="token key atrule">name</span><span class="token punctuation">:</span> Pressure
</span><span class="code-line">      <span class="token key atrule">id</span><span class="token punctuation">:</span> bme280_pressure
</span><span class="code-line">    <span class="token key atrule">humidity</span><span class="token punctuation">:</span>
</span><span class="code-line">      <span class="token key atrule">name</span><span class="token punctuation">:</span> Relative Humidity
</span><span class="code-line">      <span class="token key atrule">id</span><span class="token punctuation">:</span> bme280_humidity
</span><span class="code-line">    <span class="token key atrule">address</span><span class="token punctuation">:</span> <span class="token number">0x76</span>
</span><span class="code-line">    <span class="token key atrule">update_interval</span><span class="token punctuation">:</span> 10s
</span><span class="code-line">
</span><span class="code-line">  <span class="token punctuation">-</span> <span class="token key atrule">platform</span><span class="token punctuation">:</span> absolute_humidity
</span><span class="code-line">    <span class="token key atrule">name</span><span class="token punctuation">:</span> Absolute Humidity
</span><span class="code-line">    <span class="token key atrule">temperature</span><span class="token punctuation">:</span> bme280_temperature
</span><span class="code-line">    <span class="token key atrule">humidity</span><span class="token punctuation">:</span> bme280_humidity
</span><span class="code-line">
</span><span class="code-line">  <span class="token punctuation">-</span> <span class="token key atrule">platform</span><span class="token punctuation">:</span> template
</span><span class="code-line">    <span class="token key atrule">name</span><span class="token punctuation">:</span> Equivalent sea level pressure
</span><span class="code-line">    <span class="token key atrule">lambda</span><span class="token punctuation">:</span> <span class="token punctuation">|</span><span class="token punctuation">-</span>
</span><span class="code-line">      const float STANDARD_ALTITUDE = 10.0; // in meters<span class="token punctuation">,</span> see note
</span><span class="code-line">      return id(bme280_pressure).state / powf(1 <span class="token punctuation">-</span> ((0.0065 * STANDARD_ALTITUDE) /
</span><span class="code-line">        (id(bme280_temperature).state + (0.0065 * STANDARD_ALTITUDE) + 273.15))<span class="token punctuation">,</span> 5.257); // in hPa
</span><span class="code-line">    <span class="token key atrule">update_interval</span><span class="token punctuation">:</span> 10s
</span><span class="code-line">    <span class="token key atrule">unit_of_measurement</span><span class="token punctuation">:</span> <span class="token string">&#x27;hPa&#x27;</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token punctuation">-</span> <span class="token key atrule">platform</span><span class="token punctuation">:</span> template
</span><span class="code-line">    <span class="token key atrule">name</span><span class="token punctuation">:</span> Dew Point
</span><span class="code-line">    <span class="token key atrule">lambda</span><span class="token punctuation">:</span> <span class="token punctuation">|</span><span class="token punctuation">-</span>
</span><span class="code-line">      return (243.5<span class="token important">*(log(id(bme280_humidity).state/100)+((17.67*id(bme280_temperature).state)/</span>
</span><span class="code-line">      (243.5+id(bme280_temperature).state)))/(17.67<span class="token punctuation">-</span>log(id(bme280_humidity).state/100)<span class="token punctuation">-</span>
</span><span class="code-line">      ((17.67<span class="token important">*id(bme280_temperature).state)/(243.5+id(bme280_temperature).state))));</span>
</span><span class="code-line">    <span class="token key atrule">update_interval</span><span class="token punctuation">:</span> 10s
</span><span class="code-line">    <span class="token key atrule">unit_of_measurement</span><span class="token punctuation">:</span> °C
</span><span class="code-line">    <span class="token key atrule">icon</span><span class="token punctuation">:</span> <span class="token string">&#x27;mdi:thermometer-alert&#x27;</span>
</span></code></pre><p>For a DS18B20 sensor we need to add:</p><pre class="language-yaml"><code class="language-yaml code-highlight"><span class="code-line"><span class="token key atrule">one_wire</span><span class="token punctuation">:</span>
</span><span class="code-line">  <span class="token punctuation">-</span> <span class="token key atrule">platform</span><span class="token punctuation">:</span> gpio
</span><span class="code-line">    <span class="token key atrule">pin</span><span class="token punctuation">:</span> D7
</span><span class="code-line">
</span><span class="code-line"><span class="token key atrule">sensor</span><span class="token punctuation">:</span>
</span><span class="code-line">  <span class="token punctuation">-</span> <span class="token key atrule">platform</span><span class="token punctuation">:</span> dallas_temp
</span><span class="code-line">    <span class="token key atrule">address</span><span class="token punctuation">:</span> <span class="token number">0x593ce1045707bc28</span>
</span><span class="code-line">    <span class="token key atrule">name</span><span class="token punctuation">:</span> External Temperature
</span></code></pre><p>And to calculate the battery voltage:</p><pre class="language-yaml"><code class="language-yaml code-highlight"><span class="code-line"><span class="token key atrule">sensor</span><span class="token punctuation">:</span>
</span><span class="code-line">  <span class="token punctuation">-</span> <span class="token key atrule">platform</span><span class="token punctuation">:</span> adc
</span><span class="code-line">    <span class="token key atrule">name</span><span class="token punctuation">:</span> Battery Voltage
</span><span class="code-line">    <span class="token key atrule">id</span><span class="token punctuation">:</span> battery_voltage
</span><span class="code-line">    <span class="token key atrule">device_class</span><span class="token punctuation">:</span> voltage
</span><span class="code-line">    <span class="token key atrule">pin</span><span class="token punctuation">:</span> A0
</span><span class="code-line">    <span class="token key atrule">filters</span><span class="token punctuation">:</span>
</span><span class="code-line">      <span class="token punctuation">-</span> <span class="token key atrule">multiply</span><span class="token punctuation">:</span> <span class="token number">5.2</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token punctuation">-</span> <span class="token key atrule">platform</span><span class="token punctuation">:</span> template
</span><span class="code-line">    <span class="token key atrule">name</span><span class="token punctuation">:</span> Battery Level
</span><span class="code-line">    <span class="token key atrule">device_class</span><span class="token punctuation">:</span> battery
</span><span class="code-line">    <span class="token key atrule">unit_of_measurement</span><span class="token punctuation">:</span> <span class="token string">&#x27;%&#x27;</span>
</span><span class="code-line">    <span class="token key atrule">lambda</span><span class="token punctuation">:</span> <span class="token tag">!lambda</span> <span class="token punctuation">|</span><span class="token punctuation">-</span>
</span><span class="code-line">      if (id(battery_voltage).state &lt;= 3) return 0;
</span><span class="code-line">      else return ((id(battery_voltage).state <span class="token punctuation">-</span> 3) / 1.2 * 100.00);
</span><span class="code-line">    <span class="token key atrule">update_interval</span><span class="token punctuation">:</span> 10s
</span></code></pre><h2 id="printing-parts">Printing Parts</h2><div class="table-responsive"><table class="table table-sm table-bordered table-striped table-hover"><thead><tr><th>Item</th><th>Quantity</th><th>Material</th><th style="text-align:center">Printed</th><th>Notes</th></tr></thead><tbody><tr><td><a href="https://www.thingiverse.com/thing:3615016/files" rel="noopener noreferrer" target="_blank">Stevenson_Screen_Screen_Top_Cover_for_Solar_Panel</a></td><td>1</td><td><a href="/projects/printer-filament#esun-abs-cold-white">eSun ABS+ (Cold White)</a></td><td style="text-align:center">❌</td><td>May need to be modified to fit different sized solar panel</td></tr><tr><td><a href="https://www.thingiverse.com/thing:3615016/files" rel="noopener noreferrer" target="_blank">Stevenson_Screen_Bottom_Mount</a></td><td>1</td><td><a href="/projects/printer-filament#esun-abs-cold-white">eSun ABS+ (Cold White)</a></td><td style="text-align:center">❌</td><td></td></tr><tr><td><a href="https://www.thingiverse.com/thing:3615016/files" rel="noopener noreferrer" target="_blank">Stevenson_Screen_PCB_Mount_Frame</a></td><td>1</td><td><a href="/projects/printer-filament#esun-abs-cold-white">eSun ABS+ (Cold White)</a></td><td style="text-align:center">❌</td><td></td></tr><tr><td><a href="https://www.thingiverse.com/thing:3615016/files" rel="noopener noreferrer" target="_blank">Stevenson_Screen_Middle_Rings_x_9</a></td><td>9</td><td><a href="/projects/printer-filament#esun-abs-cold-white">eSun ABS+ (Cold White)</a></td><td style="text-align:center">❌</td><td></td></tr><tr><td><a href="https://www.thingiverse.com/thing:3615016/files" rel="noopener noreferrer" target="_blank">Stevenson_Screen_Bottom_Plate</a></td><td>1</td><td><a href="/projects/printer-filament#esun-abs-cold-white">eSun ABS+ (Cold White)</a></td><td style="text-align:center">❌</td><td></td></tr><tr><td><a href="https://www.thingiverse.com/thing:3615016/files" rel="noopener noreferrer" target="_blank">Stevenson_Screen_Top_Cover</a></td><td>1</td><td><a href="/projects/printer-filament#esun-abs-cold-white">eSun ABS+ (Cold White)</a></td><td style="text-align:center">❌</td><td></td></tr><tr><td><a href="https://www.thingiverse.com/thing:3615016/files" rel="noopener noreferrer" target="_blank">M6_PLA_Rod_for_Weather_Station</a></td><td>4</td><td><a href="/projects/printer-filament#esun-abs-cold-white">eSun ABS+ (Cold White)</a></td><td style="text-align:center">❌</td><td></td></tr></tbody></table></div></div><div class="col-lg-4"><div class="blog_sidebar__nmDWW position-sticky"><div class="p-4 mb-3 bg-light rounded"><h5>Elsewhere</h5><ul><li><a href="/projects/printer">Anet A8</a></li><li><a href="/projects/printer-rook">Rook 2020</a></li><li><a href="/projects/printer-voron-0.2">Voron 0.2</a></li><li><a href="/projects/printer-voron-1.8">Voron 1.8</a></li><li><a href="/projects/printer-voron-2.4">Voron 2.4</a></li><li><a href="/projects/printer-polyformer">Polyformer</a></li><li><a href="/projects/3d-lab-print-piper-cub">3D LabPrint Piper Cub</a></li><li><a href="/projects/3d-sets-landy">3D Sets Landy</a></li><li><a href="/projects/openrc-f1">OpenRC F1</a></li><li><a href="/projects/openrc-truggy">OpenRC Truggy</a></li><li><a href="/projects/openrc-mini-quad">OpenRC Mini Quad</a></li><li><a href="/projects/knick-knacks">Knick Knacks</a></li><li><a href="/projects/fallout-wasteland-warfare">Fallout: Wasteland Warfare</a></li><li><a href="/projects/guitar">Guitar</a></li><li><a href="/projects/eurorack-modular-synth">Eurorack Modular Synth</a></li><li><a href="/projects/printer-klipper-fan-hat">Klipper Fan Hat</a></li><li><a href="/projects/homelab">Homelab</a></li><li><a href="/projects/cameras">Cameras</a></li><li><a href="/projects/horology">Horology</a></li></ul><h5>External Links</h5><ul><li><a href="https://www.opengreenenergy.com/solar-powered-wifi-weather-station-v2-0/" rel="noopener noreferrer" target="_blank">https://www.opengreenenergy.com/solar-powered-wifi-weather-station-v2-0/<!-- --> <svg data-prefix="fas" data-icon="link" class="svg-inline--fa fa-link" role="img" viewBox="0 0 576 512" aria-hidden="true"><path fill="currentColor" d="M419.5 96c-16.6 0-32.7 4.5-46.8 12.7-15.8-16-34.2-29.4-54.5-39.5 28.2-24 64.1-37.2 101.3-37.2 86.4 0 156.5 70 156.5 156.5 0 41.5-16.5 81.3-45.8 110.6l-71.1 71.1c-29.3 29.3-69.1 45.8-110.6 45.8-86.4 0-156.5-70-156.5-156.5 0-1.5 0-3 .1-4.5 .5-17.7 15.2-31.6 32.9-31.1s31.6 15.2 31.1 32.9c0 .9 0 1.8 0 2.6 0 51.1 41.4 92.5 92.5 92.5 24.5 0 48-9.7 65.4-27.1l71.1-71.1c17.3-17.3 27.1-40.9 27.1-65.4 0-51.1-41.4-92.5-92.5-92.5zM275.2 173.3c-1.9-.8-3.8-1.9-5.5-3.1-12.6-6.5-27-10.2-42.1-10.2-24.5 0-48 9.7-65.4 27.1L91.1 258.2c-17.3 17.3-27.1 40.9-27.1 65.4 0 51.1 41.4 92.5 92.5 92.5 16.5 0 32.6-4.4 46.7-12.6 15.8 16 34.2 29.4 54.6 39.5-28.2 23.9-64 37.2-101.3 37.2-86.4 0-156.5-70-156.5-156.5 0-41.5 16.5-81.3 45.8-110.6l71.1-71.1c29.3-29.3 69.1-45.8 110.6-45.8 86.6 0 156.5 70.6 156.5 156.9 0 1.3 0 2.6 0 3.9-.4 17.7-15.1 31.6-32.8 31.2s-31.6-15.1-31.2-32.8c0-.8 0-1.5 0-2.3 0-33.7-18-63.3-44.8-79.6z"></path></svg></a></li></ul></div></div></div></div></div></article></div></main></div><div class="container"><footer class="d-flex flex-wrap py-3 border-top text-muted"><div class="d-flex align-items-center col">© 2016-<!-- -->2025<!-- --> Mike Thomas, All rights reserved.</div><div class="d-flex justify-content-end col"><a href="/projects/solar-wifi-weather-station#__next">Back to top</a></div></footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"slug":"solar-wifi-weather-station","related":[],"external":["https://www.opengreenenergy.com/solar-powered-wifi-weather-station-v2-0/"],"title":"Solar Wi-fi Weather Station","heading":"Creating a solar powered weather station","date":"2023-06-27T00:00:00.000Z","preview":"/assets/blog/solar-wifi-weather-station/solar-wifi-weather-station-hero.jpg","author":{"name":"Mike Thomas","picture":"/assets/authors/mike.jpg"},"description":"I won an auction on ebay and there were 3 Wifi Weather Station PCBs and some other components in the lot, let's order the rest of the parts and assemble them.","tags":["ESPHome","Printed Circuit Board"],"categories":[],"keywords":["Weather Station"],"promoted":false,"content":"\n# Table of contents\n\n# Intro\n\nI won an auction titled \"`Box of bits inc Arduinos, Pi's, Odroid, various sensors etc`\" on ebay there were 3 Wifi Weather Station PCBs and a few other required components included in the lot, let's order the rest of the parts and assemble them.\n\n# What is this?\n\nThis is a PCB to create a [Weather Station powered by an 18650 battery](https://www.instructables.com/Solar-Powered-WiFi-Weather-Station-V20), the project has had a few updates at the time of writing, the project is up to V4.0, however most of the parts required were included in the original listing so why not try assemble them and see how it goes.\n\n# Printed Circuit Board\n\nThe PCB was designed by [Open Green Energy](https://www.instructables.com/member/opengreenenergy) and was designed around the [Wemos D1 Mini Pro](https://www.wemos.cc/en/latest/d1/d1_mini_pro.html) micro controller, and it includes a connector to attach a solar panel, a TP4056 to charge an 18650 Lithium battery, and a BMP280 Temperature, Humidity and Barometric Pressure sensor. It also has a few extra headers for attaching additional sensors such as a DS18B20 Temperature sensor or adding an I2C display.\n\n# Parts Required\n\nQuantities are for 1 PCB.\n\n| Item                              | Quantity | Received | Notes |\n| --------------------------------- | -------- | -------- | ----- |\n| Wemos D1 Mini Pro                 | 1        | 3        |       |\n| TP4056 Charging Board             | 1        | 5        |       |\n| BMP280 Sensor                     | 1        | 3        |       |\n| DS18B20 Sensor                    | 1        | 3        |       |\n| Capacitive Soil Moisture Sensor   | 1        | 3        |       |\n| Raindrops Detection Sensor Module | 1        | 3        |       |\n| Switch                            | 1        | 19       |       |\n| Screw Terminals                   | 1        | 15       |       |\n| Brass PCB standoffs               | 4        | 10       |       |\n| 18650 Battery                     | 1        | 6        |       |\n| 18650 Battery Holder              | 1        | 3        |       |\n| Solar Panel                       | 1        | 3        |       |\n| Straight Headers Pin              | 46 pins  | 400 pins |       |\n| 22 AWG wire                       | ~500mm   | 2m       |       |\n| Weather Station V2.0 PCB          | 1        | 3        |       |\n| Super Glue                        | 1        | 1        |       |\n\n# Assembly\n\n![A Fully assembled Solar Wifi Weather Station V2.0 PCB](/assets/blog/solar-wifi-weather-station/solar-wifi-weather-station-assembled.jpg)\n\n# Software\n\nTo make the board work in ESPHome we need to select `d1_mini_pro` as the board type:\n\n```yaml\nesphome:\n  name: weather-station\n  friendly_name: Weather Station\n  comment: Solar Powered WiFi Weather Station V2.0\n  project:\n    name: 'Open-Green-Energy.Solar-Wifi-Weather-Station'\n    version: '2.0'\n\nesp8266:\n  board: d1_mini_pro\n```\n\nFor the BME280 sensor we need to add:\n\n```yaml\ni2c:\n  scl: D1\n  sda: D2\n\nsensor:\n  - platform: bme280\n    temperature:\n      name: Temperature\n      id: bme280_temperature\n      oversampling: 16x\n    pressure:\n      name: Pressure\n      id: bme280_pressure\n    humidity:\n      name: Relative Humidity\n      id: bme280_humidity\n    address: 0x76\n    update_interval: 10s\n\n  - platform: absolute_humidity\n    name: Absolute Humidity\n    temperature: bme280_temperature\n    humidity: bme280_humidity\n\n  - platform: template\n    name: Equivalent sea level pressure\n    lambda: |-\n      const float STANDARD_ALTITUDE = 10.0; // in meters, see note\n      return id(bme280_pressure).state / powf(1 - ((0.0065 * STANDARD_ALTITUDE) /\n        (id(bme280_temperature).state + (0.0065 * STANDARD_ALTITUDE) + 273.15)), 5.257); // in hPa\n    update_interval: 10s\n    unit_of_measurement: 'hPa'\n\n  - platform: template\n    name: Dew Point\n    lambda: |-\n      return (243.5*(log(id(bme280_humidity).state/100)+((17.67*id(bme280_temperature).state)/\n      (243.5+id(bme280_temperature).state)))/(17.67-log(id(bme280_humidity).state/100)-\n      ((17.67*id(bme280_temperature).state)/(243.5+id(bme280_temperature).state))));\n    update_interval: 10s\n    unit_of_measurement: °C\n    icon: 'mdi:thermometer-alert'\n```\n\nFor a DS18B20 sensor we need to add:\n\n```yaml\none_wire:\n  - platform: gpio\n    pin: D7\n\nsensor:\n  - platform: dallas_temp\n    address: 0x593ce1045707bc28\n    name: External Temperature\n```\n\nAnd to calculate the battery voltage:\n\n```yaml\nsensor:\n  - platform: adc\n    name: Battery Voltage\n    id: battery_voltage\n    device_class: voltage\n    pin: A0\n    filters:\n      - multiply: 5.2\n\n  - platform: template\n    name: Battery Level\n    device_class: battery\n    unit_of_measurement: '%'\n    lambda: !lambda |-\n      if (id(battery_voltage).state \u003c= 3) return 0;\n      else return ((id(battery_voltage).state - 3) / 1.2 * 100.00);\n    update_interval: 10s\n```\n\n# Printing Parts\n\n| Item                                                                                                 | Quantity | Material                                                       | Printed | Notes                                                      |\n| ---------------------------------------------------------------------------------------------------- | -------- | -------------------------------------------------------------- | :-----: | ---------------------------------------------------------- |\n| [Stevenson_Screen_Screen_Top_Cover_for_Solar_Panel](https://www.thingiverse.com/thing:3615016/files) | 1        | [eSun ABS+ (Cold White)](printer-filament#esun-abs-cold-white) |   :x:   | May need to be modified to fit different sized solar panel |\n| [Stevenson_Screen_Bottom_Mount](https://www.thingiverse.com/thing:3615016/files)                     | 1        | [eSun ABS+ (Cold White)](printer-filament#esun-abs-cold-white) |   :x:   |                                                            |\n| [Stevenson_Screen_PCB_Mount_Frame](https://www.thingiverse.com/thing:3615016/files)                  | 1        | [eSun ABS+ (Cold White)](printer-filament#esun-abs-cold-white) |   :x:   |                                                            |\n| [Stevenson_Screen_Middle_Rings_x_9](https://www.thingiverse.com/thing:3615016/files)                 | 9        | [eSun ABS+ (Cold White)](printer-filament#esun-abs-cold-white) |   :x:   |                                                            |\n| [Stevenson_Screen_Bottom_Plate](https://www.thingiverse.com/thing:3615016/files)                     | 1        | [eSun ABS+ (Cold White)](printer-filament#esun-abs-cold-white) |   :x:   |                                                            |\n| [Stevenson_Screen_Top_Cover](https://www.thingiverse.com/thing:3615016/files)                        | 1        | [eSun ABS+ (Cold White)](printer-filament#esun-abs-cold-white) |   :x:   |                                                            |\n| [M6_PLA_Rod_for_Weather_Station](https://www.thingiverse.com/thing:3615016/files)                    | 4        | [eSun ABS+ (Cold White)](printer-filament#esun-abs-cold-white) |   :x:   |                                                            |\n","lastmod":"2024-07-17T12:36:30.270Z"},"related":[]},"__N_SSG":true},"page":"/projects/[slug]","query":{"slug":"solar-wifi-weather-station"},"buildId":"Y5mSgE8YhqnLmiRs80-DT","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>