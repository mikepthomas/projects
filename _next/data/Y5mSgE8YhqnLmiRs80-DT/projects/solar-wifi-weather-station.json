{"pageProps":{"post":{"slug":"solar-wifi-weather-station","related":[],"external":["https://www.opengreenenergy.com/solar-powered-wifi-weather-station-v2-0/"],"title":"Solar Wi-fi Weather Station","heading":"Creating a solar powered weather station","date":"2023-06-27T00:00:00.000Z","preview":"/assets/blog/solar-wifi-weather-station/solar-wifi-weather-station-hero.jpg","author":{"name":"Mike Thomas","picture":"/assets/authors/mike.jpg"},"description":"I won an auction on ebay and there were 3 Wifi Weather Station PCBs and some other components in the lot, let's order the rest of the parts and assemble them.","tags":["ESPHome","Printed Circuit Board"],"categories":[],"keywords":["Weather Station"],"promoted":false,"content":"\n# Table of contents\n\n# Intro\n\nI won an auction titled \"`Box of bits inc Arduinos, Pi's, Odroid, various sensors etc`\" on ebay there were 3 Wifi Weather Station PCBs and a few other required components included in the lot, let's order the rest of the parts and assemble them.\n\n# What is this?\n\nThis is a PCB to create a [Weather Station powered by an 18650 battery](https://www.instructables.com/Solar-Powered-WiFi-Weather-Station-V20), the project has had a few updates at the time of writing, the project is up to V4.0, however most of the parts required were included in the original listing so why not try assemble them and see how it goes.\n\n# Printed Circuit Board\n\nThe PCB was designed by [Open Green Energy](https://www.instructables.com/member/opengreenenergy) and was designed around the [Wemos D1 Mini Pro](https://www.wemos.cc/en/latest/d1/d1_mini_pro.html) micro controller, and it includes a connector to attach a solar panel, a TP4056 to charge an 18650 Lithium battery, and a BMP280 Temperature, Humidity and Barometric Pressure sensor. It also has a few extra headers for attaching additional sensors such as a DS18B20 Temperature sensor or adding an I2C display.\n\n# Parts Required\n\nQuantities are for 1 PCB.\n\n| Item                              | Quantity | Received | Notes |\n| --------------------------------- | -------- | -------- | ----- |\n| Wemos D1 Mini Pro                 | 1        | 3        |       |\n| TP4056 Charging Board             | 1        | 5        |       |\n| BMP280 Sensor                     | 1        | 3        |       |\n| DS18B20 Sensor                    | 1        | 3        |       |\n| Capacitive Soil Moisture Sensor   | 1        | 3        |       |\n| Raindrops Detection Sensor Module | 1        | 3        |       |\n| Switch                            | 1        | 19       |       |\n| Screw Terminals                   | 1        | 15       |       |\n| Brass PCB standoffs               | 4        | 10       |       |\n| 18650 Battery                     | 1        | 6        |       |\n| 18650 Battery Holder              | 1        | 3        |       |\n| Solar Panel                       | 1        | 3        |       |\n| Straight Headers Pin              | 46 pins  | 400 pins |       |\n| 22 AWG wire                       | ~500mm   | 2m       |       |\n| Weather Station V2.0 PCB          | 1        | 3        |       |\n| Super Glue                        | 1        | 1        |       |\n\n# Assembly\n\n![A Fully assembled Solar Wifi Weather Station V2.0 PCB](/assets/blog/solar-wifi-weather-station/solar-wifi-weather-station-assembled.jpg)\n\n# Software\n\nTo make the board work in ESPHome we need to select `d1_mini_pro` as the board type:\n\n```yaml\nesphome:\n  name: weather-station\n  friendly_name: Weather Station\n  comment: Solar Powered WiFi Weather Station V2.0\n  project:\n    name: 'Open-Green-Energy.Solar-Wifi-Weather-Station'\n    version: '2.0'\n\nesp8266:\n  board: d1_mini_pro\n```\n\nFor the BME280 sensor we need to add:\n\n```yaml\ni2c:\n  scl: D1\n  sda: D2\n\nsensor:\n  - platform: bme280\n    temperature:\n      name: Temperature\n      id: bme280_temperature\n      oversampling: 16x\n    pressure:\n      name: Pressure\n      id: bme280_pressure\n    humidity:\n      name: Relative Humidity\n      id: bme280_humidity\n    address: 0x76\n    update_interval: 10s\n\n  - platform: absolute_humidity\n    name: Absolute Humidity\n    temperature: bme280_temperature\n    humidity: bme280_humidity\n\n  - platform: template\n    name: Equivalent sea level pressure\n    lambda: |-\n      const float STANDARD_ALTITUDE = 10.0; // in meters, see note\n      return id(bme280_pressure).state / powf(1 - ((0.0065 * STANDARD_ALTITUDE) /\n        (id(bme280_temperature).state + (0.0065 * STANDARD_ALTITUDE) + 273.15)), 5.257); // in hPa\n    update_interval: 10s\n    unit_of_measurement: 'hPa'\n\n  - platform: template\n    name: Dew Point\n    lambda: |-\n      return (243.5*(log(id(bme280_humidity).state/100)+((17.67*id(bme280_temperature).state)/\n      (243.5+id(bme280_temperature).state)))/(17.67-log(id(bme280_humidity).state/100)-\n      ((17.67*id(bme280_temperature).state)/(243.5+id(bme280_temperature).state))));\n    update_interval: 10s\n    unit_of_measurement: Â°C\n    icon: 'mdi:thermometer-alert'\n```\n\nFor a DS18B20 sensor we need to add:\n\n```yaml\none_wire:\n  - platform: gpio\n    pin: D7\n\nsensor:\n  - platform: dallas_temp\n    address: 0x593ce1045707bc28\n    name: External Temperature\n```\n\nAnd to calculate the battery voltage:\n\n```yaml\nsensor:\n  - platform: adc\n    name: Battery Voltage\n    id: battery_voltage\n    device_class: voltage\n    pin: A0\n    filters:\n      - multiply: 5.2\n\n  - platform: template\n    name: Battery Level\n    device_class: battery\n    unit_of_measurement: '%'\n    lambda: !lambda |-\n      if (id(battery_voltage).state <= 3) return 0;\n      else return ((id(battery_voltage).state - 3) / 1.2 * 100.00);\n    update_interval: 10s\n```\n\n# Printing Parts\n\n| Item                                                                                                 | Quantity | Material                                                       | Printed | Notes                                                      |\n| ---------------------------------------------------------------------------------------------------- | -------- | -------------------------------------------------------------- | :-----: | ---------------------------------------------------------- |\n| [Stevenson_Screen_Screen_Top_Cover_for_Solar_Panel](https://www.thingiverse.com/thing:3615016/files) | 1        | [eSun ABS+ (Cold White)](printer-filament#esun-abs-cold-white) |   :x:   | May need to be modified to fit different sized solar panel |\n| [Stevenson_Screen_Bottom_Mount](https://www.thingiverse.com/thing:3615016/files)                     | 1        | [eSun ABS+ (Cold White)](printer-filament#esun-abs-cold-white) |   :x:   |                                                            |\n| [Stevenson_Screen_PCB_Mount_Frame](https://www.thingiverse.com/thing:3615016/files)                  | 1        | [eSun ABS+ (Cold White)](printer-filament#esun-abs-cold-white) |   :x:   |                                                            |\n| [Stevenson_Screen_Middle_Rings_x_9](https://www.thingiverse.com/thing:3615016/files)                 | 9        | [eSun ABS+ (Cold White)](printer-filament#esun-abs-cold-white) |   :x:   |                                                            |\n| [Stevenson_Screen_Bottom_Plate](https://www.thingiverse.com/thing:3615016/files)                     | 1        | [eSun ABS+ (Cold White)](printer-filament#esun-abs-cold-white) |   :x:   |                                                            |\n| [Stevenson_Screen_Top_Cover](https://www.thingiverse.com/thing:3615016/files)                        | 1        | [eSun ABS+ (Cold White)](printer-filament#esun-abs-cold-white) |   :x:   |                                                            |\n| [M6_PLA_Rod_for_Weather_Station](https://www.thingiverse.com/thing:3615016/files)                    | 4        | [eSun ABS+ (Cold White)](printer-filament#esun-abs-cold-white) |   :x:   |                                                            |\n","lastmod":"2024-07-17T12:36:30.270Z"},"related":[]},"__N_SSG":true}